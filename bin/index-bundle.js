!function(e){function t(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=13)}([function(e,t,r){"use strict";function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0});var n;t.default=(n={WCS_HOSTNAME:"54.200.124.128",WCS_HOSTNAME_NOPORT:"54.200.124.128",WCS_AWS_IMAGE_PATH:"http://s3.ap-south-1.amazonaws.com/sirius-ep-images/",WCS_IMAGE_FMT:".jpg",WCS_PRODUCT_DETAILS:"/search/resources/store/",WCS_PRODUCT_DETAILS_APPEND:"/productview/byId/",WCS_CATEGORY_TOP:"/categoryview/@top",WCS_CATEGORY:"/categoryview/byId/",WCS_SUB_CATEGORY:"/categoryview/byParentCategory/",WCS_CATEGORY_DETAILS_APPEND:"/productview/byCategory/",WCS_REST_URL:"/wcs/resources/store/",WCS_GUEST_IDENTITY:"/guestidentity",WCS_LOGIN_IDENTITY:"/loginidentity",WCS_KEYWORD_SUGGESTION:"/sitecontent/keywordSuggestionsByTerm/",WCS_STORE_ID:"10151",WCS_CAS_STORE_ID:"10051",WCS_CATALOG_ID:"10052",WCS_CART:"/cart/",WCS_ESPOT:"/espot/",WCS_CART_EXT:"/cart",WCS_DEFAULT:"/@default",WCS_WISHLIST:"/wishlist",WCS_WISHLIST_DELETE:"/wishlist/",WCS_LANG_ID:"-1",WCS_SHIPMODES_APPEND:"/cart/shipping_modes",WCS_INV_AVL:"/inventoryavailability/",WCS_UPDATE_SHIP_INFO:"/cart/@self/shipping_info",WCS_LOG_DIR:"log/wcs/trace.log",HTML_DIR:"WebContent/html/",WCS_PRODUCT_SEARCH_BY_KEYWORD:"/productview/bySearchTerm/",WCS_ADDRESS_DETAILS:"/person/@self/contact",WCS_CHECKOUT_PROFILE:"/person/@self/checkoutProfile",WCS_PRODUCT_ADDED:"Product Added Successfully",SLASH:"/",SHIP_CALC_USAGE:"-1,-2,-3,-4,-5,-6,-7",WCS_SHIP_INFO:"/cart/@self/shipping_info",MONGO_DB_URL:"mongodb://admin:passw0rd@ds121716.mlab.com:21716/projectc",MONGO_DB_COLLECTION_USERS:"users",WCS_GET_SHOPPINGCART:"/@self",WCS_AT_SELF:"/@self",WCS_UPDATE_CART:"/update_order_item",WCS_DELETE_CART:"/delete_order_item",WCS_UPDATECART_CALC_USAGE:"-1,-2,-3,-4,-5,-6,-7",WCS_UPDATECART_CALC_ORDER:"1",WCS_CART_AT_SELF:"/cart/@self",WCS_CART_PROMOTIONS:"/cart/@self/assigned_promotion_code",WCS_ITEM:"item",WCS_PRODUCT_BYIDS:"/productview/byIds?",WCS_PRODUCT_BY_SINGLE_ID:"/productview/byId/",WCS_CART_PRECHECKOUT:"/precheckout",WCS_CART_CHECKOUT:"/checkout",WCS_ORDER:"/order/",WCS_HISTORY:"@history",WCS_PERSON:"/person/",WCS_PROFILE_NAME:"?profileName=IBM_User_Registration_Details",WCS_ACCESS_TOKEN:"access_token",WCS_TRUSTED_ACCESS_TOKEN:"WCTrustedToken",WCS_USER_ID:"userId",WCS_PERSONALIZATION_ID:"personalizationID",WCS_TOKEN_EXPIRATION_TIME:"1800000",WCS_REGISTRATION:"/person?mode=self",WCS_PERSON_AT_SELF:"/person/@self",WCS_ESPOT_RECENTLY_VIEWED_PRODUCTD:"/espot/RecViewed_CatEntries",WCS_PAYMENT_INSTRUCTION_MASKED:"/payment_instruction/sensitive_data_mask_by_plain_string",WCS_PAYMENT_INSTRUCTION:"/payment_instruction",HTTP_URI_CONSTANT:"http:",WCS_SEO:"/seo/seoKeyword",WCS_LAYOUT:"/page_design?q=byObjectIdentifier"},o(n,"WCS_ESPOT","/espot/"),o(n,"WCS_COOKIE_DOMAIN",".herokuapp.com"),o(n,"WCS_ADDRESS_ADDED","Address Added Successfully"),o(n,"WCS_ADDRESS_DELETED","Address Deleted Successfully"),o(n,"WCS_ADDRESS_UPDATED","Address Updated Successfully"),o(n,"WCS_ADDRESS_SELECTED","Address Selected Successfully"),o(n,"WCS_SHIPMODE_SELECTED","Ship mode updated successfully"),o(n,"WCS_AUTH_TOKEN","12022%2C16Y0w9HO0rAvYKi42p4R3in9WzOQPJ2r8TMIejt6MF%2B4Skkt9f%2F%2FKf71IjRZHCf2cYp2UYzx2i3BGMwV9r5PzWAX5FGAZDsQhAErIsRZEEqWwLMXy6h6ethm5ngU0ijtNQaniaD%2FTOlllsVOreE4PYegQVzOkaXtACIhtQWUZr2RbaMC80nqEG6ORDp6CfKqua3wmqRUbHyqdRhmceBeMDfCs3OziIpsrO7tKefTyJQ%3D"),o(n,"WCS_TRUSTED_TOKEN","12022%2CR97hA7x3qfhBXYmRxOYjCaldMf8A9E2b%2BeLYoYpCneY%3D"),o(n,"WCS_DOUBLE_SLASH","//"),o(n,"DB_URL","mongodb://HeadStart:Headless1@ds125628.mlab.com:25628/headstartdb"),n)},function(e,t){e.exports=require("express")},function(e,t,r){"use strict";var o=r(0),n=function(e){return e&&e.__esModule?e:{default:e}}(o);r(9);e.exports={constructUrl:function(e,t,r){return r?"https://"+e+t:"http://"+e+t},sendErrorMessage:function(e,t){console.log("ERROR LOGGED: ",t);var r={error:!0,errorMessage:t};e.send(r)},getLogger:function(){var e=r(18);return new e.Logger({transports:[new e.transports.Console,new e.transports.File({filename:n.default.WCS_LOG_DIR})]})},constructRequest:function(e,t,r){return{url:e,method:t,json:r,headers:{"Content-Type":"application/json",WCToken:n.default.WCS_AUTH_TOKEN,WCTrustedToken:n.default.WCS_TRUSTED_TOKEN}}},constructRequestWithToken:function(e,t,r,o){return{url:e,method:t,json:r,headers:{"Content-Type":"application/json",WCToken:"14478%2C5BNxQ5rcuhCypChQ415EPoK7%2FJCiK%2BtSDBrlnEIzMKjanWjC3QmeFY%2B672d8QGuwIT9bhHHMfc1jKrGWCVyXx9kQ7GA7t%2FZ%2FOVe%2FN55WnjdSTRpM2N1zW1gtuvz4VpdAkq3849%2FRdq1MvTPm7HAKA%2FYGK7LgFWi7lz8EAtSq5mmPKdHUmLAJYKoDveBixiZLddK%2BrMSyugNhyhPEaUwOoJKit9e3c0yOIdv5VsYznzE%3D",WCTrustedToken:"14478%2CnZO8Oy9gtTQXlFTYUB1QXIoTGo9suWgoodntnNZHCkw%3D"}}},constructRequestWithoutToken:function(e,t,r){return{url:e,method:t,json:r,headers:{"Content-Type":"application/json"}}},getTokens:function(e){return{WCToken:e.cookies.access_token,WCTrustedToken:e.cookies.WCTrustedToken}},isJson:function(e){try{JSON.parse(e)}catch(e){return!1}return!0},requiredProtocolData:function(e){var t=["account","cc_cvc","expire_month","cc_brand","payment_method","expire_year"],r={totalPaymentDataArray:[]};return e.paymentInstruction.filter(function(e){var o=e.protocolData,n=o.filter(function(e){if(t.indexOf(e.name)>-1)return e});r.totalPaymentDataArray.push(n)}),r}}},function(e,t){e.exports=require("request-promise")},function(e,t){e.exports=require("bluebird")},function(e,t){e.exports=require("json-mapper")},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),s=o(n),a=r(2),u=r(19),i=o(u),d=r(3),c=(o(d),r(4)),l=o(c),f=r(10),S=o(f),_=(0,a.getLogger)();t.default={getSEOKeyword1:function(e,t){console.log("inside the getSEOKeyword1"),this.getSEOKeyword(e,t)},getSEOKeyword:function(e,t){var r=S.default.defer();return console.log("categoryId::"+e+":::tokenType:::"+t),i.default.getKeyword(e,t,-1,10051).then(function(t){if(_.info("Response"+JSON.stringify(t)),Object.keys(t[0]).length>0){var o=t[0].URLKEYWORD;t[0].TOKENNAME,t[0].TOKENVALUE;_.info("keyword:",o),$scope.que=o,r.resolve(o)}else _.info("No results fetched for categoryId:",e)}),l.default.all("ssee")},getSEODetails:function(e,t){console.log("Request:"+e),i.default.getRecords(e.query.keyword).then(function(e){if(_.info("Response"+JSON.stringify(e)),Object.keys(e[0]).length>0){var r=e[0].URLKEYWORD,o=e[0].TOKENNAME,n=e[0].TOKENVALUE;t.send({success:!0,keyword:r,tokenType:o,tokenValue:n})}else t.send({success:!1,error:"No matching keyword found!"})})},getIdByKeyword:function(e,t){_.info("keyword::"+e+"---TokenName::"+t);var r=S.default.defer();return isNaN(e)?(_.info("Param is  KeyWord "),i.default.getRecordsByKeyword(e,t,-1,s.default.WCS_CAS_STORE_ID).then(function(e){if(_.info("Response"+JSON.stringify(e)),Object.keys(e[0]).length>0){var t=(e[0].URLKEYWORD,e[0].TOKENNAME,e[0].TOKENVALUE);r.resolve(t)}})):(_.info("Param is  ProductId "),i.default.getRecordsByProductId(e,t,-1,s.default.WCS_CAS_STORE_ID).then(function(e){if(_.info("Response"+JSON.stringify(e)),Object.keys(e[0]).length>0){var t=(e[0].URLKEYWORD,e[0].TOKENNAME,e[0].TOKENVALUE);r.resolve(t)}})),r.promise}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),s=o(n),a=r(0),u=o(a);t.default={mapPdpJSON:function(e,t){var r=s.default.makeConverter({catalogEntryView:["catalogEntryView",s.default.map({hasSingleSKU:function(e){if(1==t)return e.hasSingleSKU},uniqueId:"uniqueID",parentCatalogGroupID:"parentCatalogGroupID",catalogEntryTypeCode:"catalogEntryTypeCode",buyable:"buyable",store:"storeID",listPrice:"price.0.value",purchasePrice:"price.1.value",code:"partNumber",resourceId:"resourceId",displayName:"name",manufacturer:"manufacturer",seoKeyword:"seo_token_ntk",attributes:["attributes",s.default.map({displayable:"displayable",name:"name",identifier:"identifier",values:["values",s.default.map({value:"value",identifier:"identifier",uniqueID:"uniqueID",image:["image1path",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}]})],usage:"usage",sequence:"sequence"})],merchandisingAssociations:["merchandisingAssociations",s.default.map({hasSingleSKU:"hasSingleSKU",catalogEntryTypeCode:"catalogEntryTypeCode",buyable:"buyable",store:"storeID",uniqueID:"uniqueID",listPrice:"price.0.value",purchasePrice:"price.1.value",code:"partNumber",resourceId:"resourceId",displayName:"name",seoKeyword:"seo_token_ntk",attributes:["attributes",s.default.map({displayable:"displayable",name:"name",identifier:"identifier",values:["values",s.default.map({identifier:"identifier",uniqueID:"uniqueID",image:["image1path",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}]})]})],thumbnail:["thumbnail",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}],fullImage:["fullImage",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}]})],skus:["sKUs",s.default.map({skuId:"uniqueID",hasSingleSKU:"hasSingleSKU",catalogEntryTypeCode:"catalogEntryTypeCode",buyable:"buyable",store:"storeID",listPrice:"price.0.value",purchasePrice:"price.1.value",code:"partNumber",resourceId:"resourceId",displayName:"name",seoKeyword:"seo_token_ntk",attributes:["attributes",s.default.map({displayable:"displayable",name:"name",identifier:"identifier",values:["values",s.default.map({identifier:"identifier",uniqueID:"uniqueID",image:["image1path",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}]})],usage:"usage",sequence:"sequence"})],attachments:["attachments",s.default.map({attachmentAssetPath:["attachmentAssetPath",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}],usage:"usage"})],thumbnail:["thumbnail",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}]})],thumbnail:["thumbnail",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}],fullImage:["fullImage",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}],attachments:["attachments",s.default.map({attachmentAssetPath:["attachmentAssetPath",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}],usage:"usage"})]})]}),o=r(e),n=o;if(1!=t)for(var a=0;a<n.catalogEntryView.length;a++){var i=t.InventoryAvailability[a].inventoryStatus,d=t.InventoryAvailability[a].availableQuantity;n.catalogEntryView[a].availability=i,n.catalogEntryView[a].quantity=d}return n},mapRelatedProductsJSON:function(e,t){var r=s.default.makeConverter({catalogEntryView:["catalogEntryView",s.default.map({merchandisingAssociations:["merchandisingAssociations",s.default.map({hasSingleSKU:"hasSingleSKU",catalogEntryTypeCode:"catalogEntryTypeCode",buyable:"buyable",store:"storeID",uniqueID:"uniqueID",listPrice:"price.0.value",purchasePrice:"price.1.value",code:"partNumber",resourceId:"resourceId",displayName:"name",seoKeyword:"seo_token_ntk",attributes:["attributes",s.default.map({displayable:"displayable",name:"name",identifier:"identifier",values:["values",s.default.map({identifier:"identifier",uniqueID:"uniqueID",image:["image1path",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}]})]})],thumbnail:["thumbnail",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}],fullImage:["fullImage",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}]})]})]}),o=r(e),n=o;if(1!=t)for(var a=0;a<n.catalogEntryView.length;a++){var i=t.InventoryAvailability[a].inventoryStatus,d=t.InventoryAvailability[a].availableQuantity;n.catalogEntryView[a].availability=i,n.catalogEntryView[a].quantity=d}return n},mapQuickViewJSON:function(e,t){for(var r=s.default.makeConverter({catalogEntryView:["catalogEntryView",s.default.map({hasSingleSKU:"hasSingleSKU",uniqueId:"uniqueID",catalogEntryTypeCode:"catalogEntryTypeCode",buyable:"buyable",store:"storeID",listPrice:"price.0.value",purchasePrice:"price.1.value",code:"partNumber",resourceId:"resourceId",displayName:"name",seoKeyword:"seo_token_ntk",attributes:["attributes",s.default.map({displayable:"displayable",name:"name",identifier:"identifier",values:["values",s.default.map({identifier:"identifier",uniqueID:"uniqueID",image:["image1path",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}]})]})],skus:["sKUs",s.default.map({skuId:"uniqueID",hasSingleSKU:"hasSingleSKU",catalogEntryTypeCode:"catalogEntryTypeCode",buyable:"buyable",store:"storeID",listPrice:"price.0.value",purchasePrice:"price.1.value",code:"partNumber",resourceId:"resourceId",displayName:"name",seoKeyword:"seo_token_ntk",attributes:["attributes",s.default.map({displayable:"displayable",name:"name",identifier:"identifier",values:["values",s.default.map({identifier:"identifier",uniqueID:"uniqueID",image:["image1path",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}]})]})],attachments:["attachments",s.default.map({attachmentAssetPath:["attachmentAssetPath",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}],usage:"usage"})],thumbnail:["thumbnail",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}]})],thumbnail:["thumbnail",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}],fullImage:["fullImage",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}],attachments:["attachments",s.default.map({attachmentAssetPath:["attachmentAssetPath",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}],usage:"usage"})]})]}),o=r(e),n=o,a=0;a<n.catalogEntryView.length;a++){var i=t.InventoryAvailability[a].inventoryStatus,d=t.InventoryAvailability[a].availableQuantity;n.catalogEntryView[a].availability=i,n.catalogEntryView[a].quantity=d}return n},mapRecentlyViewedProductsJSON:function(e){return s.default.makeConverter({resourceId:"resourceId",recentlyViewedProducts:["MarketingSpotData.0.baseMarketingSpotActivityData",s.default.map({catalogEntryTypeCode:"catalogEntryTypeCode",currency:"currency",partNumber:"productPartNumber",productId:"productId",purchasePrice:"standardPrice",listPrice:"listPrice",seoKeyword:"seo_token_ntk",description:["description",s.default.map({thumbnail:["thumbnail",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}],shortDescription:"shortDescription",longDescription:"longDescription",language:"language",productName:"productName"})],attributes:["attributes",s.default.map({name:"name",stringValue:"stringValue"})]})]})(e)},mapProductDetailBySingleIdJSON:function(e){return s.default.makeConverter({catalogEntryView:["catalogEntryView",s.default.map({hasSingleSKU:"hasSingleSKU",uniqueId:"uniqueID",catalogEntryTypeCode:"catalogEntryTypeCode",buyable:"buyable",store:"storeID",listPrice:"price.0.value",purchasePrice:"price.1.value",code:"partNumber",resourceId:"resourceId",displayName:"name",seoKeyword:"seo_token_ntk",attributes:["attributes",s.default.map({displayable:"displayable",name:"name",identifier:"identifier",values:["values",s.default.map({identifier:"identifier",uniqueID:"uniqueID",image:["image1path",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}]})]})],skus:["sKUs",s.default.map({skuId:"uniqueID",hasSingleSKU:"hasSingleSKU",catalogEntryTypeCode:"catalogEntryTypeCode",buyable:"buyable",store:"storeID",listPrice:"price.0.value",purchasePrice:"price.1.value",code:"partNumber",resourceId:"resourceId",displayName:"name",seoKeyword:"seo_token_ntk",attributes:["attributes",s.default.map({displayable:"displayable",name:"name",identifier:"identifier",values:["values",s.default.map({identifier:"identifier",uniqueID:"uniqueID",image:["image1path",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}]})]})],thumbnail:["thumbnail",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}],attachments:["attachments",s.default.map({attachmentAssetPath:["attachmentAssetPath",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}],usage:"usage"})]})],thumbnail:["thumbnail",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}],fullImage:["fullImage",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}],attachments:["attachments",s.default.map({attachmentAssetPath:["attachmentAssetPath",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}],usage:"usage"})]})]})(e)}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),s=o(n),a=r(5),u=o(a);t.default={addToCartJSON:function(e){return u.default.makeConverter({orderItem:["orderItem",u.default.map({orderItemId:"orderItemId"})],orderId:"orderId",addToCartMsg:s.default.WCS_PRODUCT_ADDED})(e)},mapShoppingCartJSON:function(e){return u.default.makeConverter({adjustments:["adjustment",u.default.map({code:"code",currency:"currency",description:"description",displayLevel:"displayLevel"})],grandTotal:"grandTotal",grandTotalCurrency:"grandTotalCurrency",orderId:"orderId",cartLineItemId:u.default.helpers.def(""),orderItem:["orderItem",u.default.map({currency:"currency",freeGift:"freeGift",orderItemId:"orderItemId",orderItemInventoryStatus:"orderItemInventoryStatus",orderItemPrice:"orderItemPrice",partNumber:"partNumber",productId:"productId",quantity:"quantity",salesTax:"salesTax",salesTaxCurrency:"salesTaxCurrency",shippingCharge:"shippingCharge",shippingChargeCurrency:"shippingChargeCurrency",shippingTax:"shippingTax",unitPrice:"unitPrice",unitQuantity:"unitQuantity",usableShippingChargePolicy:"usableShippingChargePolicy"})],orderStatus:"orderStatus",recordSetCount:"recordSetCount",recordSetStartNumber:"recordSetStartNumber",recordSetTotal:"recordSetTotal",resourceId:"resourceId",resourceName:"resourceName",shipAsComplete:"shipAsComplete",storeNameIdentifier:"storeNameIdentifier",storeUniqueID:"storeUniqueID",totalAdjustment:"totalAdjustment",totalAdjustmentCurrency:"totalAdjustmentCurrency",totalProductPrice:"totalProductPrice",totalProductPriceCurrency:"totalProductPriceCurrency",totalSalesTax:"totalSalesTax",totalSalesTaxCurrency:"totalSalesTaxCurrency",totalShippingCharge:"totalShippingCharge",totalShippingChargeCurrency:"totalShippingChargeCurrency",totalShippingTax:"totalShippingTax",totalShippingTaxCurrency:"totalShippingTaxCurrency"})(e)},mapUpdateCartRequestJSON:function(e){return u.default.makeConverter({orderItem:["lineItem",u.default.map({orderItemId:"lineItemId",quantity:"quantity"})],x_calculateOrder:u.default.helpers.def(s.default.WCS_UPDATECART_CALC_ORDER),x_calculationUsage:u.default.helpers.def(s.default.WCS_UPDATECART_CALC_USAGE)})(e)},mapUpdateCartResponseJSON:function(e){return u.default.makeConverter({orderId:"orderId",lineItem:["orderItem",u.default.map({lineItemId:"orderItemId"})]})(e)},mapDeleteCartRequestJSON:function(e){return u.default.makeConverter({orderItemId:"lineItem.0.lineItemId"})(e)},mapDeleteCartResponseJSON:function(e){return u.default.makeConverter({orderId:["orderId",function(e){return e[0]}]})(e)},mapDeleteAllCartJSON:function(e){return u.default.makeConverter({message:u.default.helpers.def("All Cart Items are Deleted Successfully")})(e)},mapOrderConfirmationResponseJSON:function(e,t){for(var r=t.totalPaymentDataArray,o=u.default.makeConverter({adjustment:["adjustment",u.default.map({code:"code",currency:"currency",description:"description",displayLevel:"displayLevel",usage:"usage"})],grandTotal:"grandTotal",grandTotalCurrency:"grandTotalCurrency",locked:"locked",orderId:"orderId",lineItem:["orderItem",u.default.map({adjustment:["adjustment",u.default.map({code:"code",currency:"currency",description:"description",usage:"usage"})],currency:"currency",freeGift:"freeGift",lineItemId:"orderItemId",lineItemPrice:"orderItemPrice",adjustedPrice:function(e){return Number(e.orderItemPrice)+Number(e.totalAdjustment.value)},partNumber:"partNumber",productId:"productId",quantity:"quantity",unitPrice:"unitPrice",unitQuantity:"unitQuantity"})],shipping:{firstName:"orderItem.0.firstName",lastName:"orderItem.0.lastName",middleName:"orderItem.0.middleName",email1:"orderItem.0.email1",addressId:"orderItem.0.addressId",addressLine:"orderItem.0.addressLine",city:"orderItem.0.city",state:"orderItem.0.state",country:"orderItem.0.country",postalCode:"orderItem.0.postalCode",carrier:"orderItem.0.carrier",expectedShipDate:"orderItem.0.expectedShipDate",shipModeCode:"orderItem.0.shipModeCode",shipModeDescription:"orderItem.0.shipModeDescription",shipModeId:"orderItem.0.shipModeId"},paymentInstruction:["paymentInstruction",u.default.map({firstName:"firstName",lastName:"lastName",middleName:"middleName",email1:"email1",addressId:"billing_address_id",addressLine:"addressLine",city:"city",state:"state",country:"country",postalCode:"postalCode",payMethodId:"payMethodId",piId:"piId",piAmount:"piAmount",piCurrency:"piCurrency",piDescription:"piDescription"})],placedDate:"placedDate",recordSetComplete:"recordSetComplete",recordSetCount:"recordSetCount",recordSetStartNumber:"recordSetStartNumber",recordSetTotal:"recordSetTotal",resourceId:"resourceId",totalAdjustment:"totalAdjustment",totalAdjustmentCurrency:"totalAdjustmentCurrency",totalProductPrice:"totalProductPrice",totalProductPriceCurrency:"totalProductPriceCurrency",totalSalesTax:"totalSalesTax",totalSalesTaxCurrency:"totalSalesTaxCurrency",totalShippingCharge:"totalShippingCharge",totalShippingChargeCurrency:"totalShippingChargeCurrency",totalShippingTax:"totalShippingTax",totalShippingTaxCurrency:"totalShippingTaxCurrency"}),n=o(e),s=n,a=0;a<r.length;a++){var i=r[a];s.paymentInstruction[a].paymentData=i}return s},mapOrderPaymentSummaryJSON:function(e){return u.default.makeConverter({shipAsComplete:"shipAsComplete",storeUniqueID:"storeUniqueID",totalAdjustment:"totalAdjustment",totalAdjustmentCurrency:"totalAdjustmentCurrency",totalProductPrice:"totalProductPrice",totalProductPriceCurrency:"totalProductPriceCurrency",totalSalesTax:"totalSalesTax",totalSalesTaxCurrency:"totalSalesTaxCurrency",totalShippingCharge:"totalShippingCharge",totalShippingChargeCurrency:"totalShippingChargeCurrency",totalShippingTax:"totalShippingTax",totalShippingTaxCurrency:"totalShippingTaxCurrency"})(e)}}},function(e,t){e.exports=require("mongodb")},function(e,t){e.exports=require("q")},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),s=o(n),a=r(2),u=r(3),i=o(u),d=r(4),c=o(d),l=(0,a.getLogger)();t.default={loginIdentityHandler:function(e,t){var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_LOGIN_IDENTITY,o=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0);l.info("Login url = "+o);var n={logonId:e.body.logonId,logonPassword:e.body.logonPassword};l.info("messageData = "+e.body.logonId+"|"+e.body.logonPassword);var u=(0,a.constructRequestWithoutToken)(o,"POST",n,"");(0,i.default)(u).then(function(e){t.cookie(s.default.WCS_ACCESS_TOKEN,e.WCToken),t.cookie(s.default.WCS_TRUSTED_ACCESS_TOKEN,e.WCTrustedToken),t.cookie(s.default.WCS_PERSONALIZATION_ID,e.personalizationID),t.cookie(s.default.WCS_USER_ID,e.userId),t.send({success:!0,result:e})}).catch(function(e){404===e.statusCode?(l.error("errors in service to loginIdentityHandler in WCS: ",e),t.send({success:!1,error:e.response.body})):(l.error("errors in service to loginIdentityHandler in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})},guestIdentityHandler:function(e,t){return l.info("inside guestIdentityHandler"),new c.default(function(e,r){var o=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_GUEST_IDENTITY,n=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0);l.info("GuestIdentityUrl = "+n);var u=(0,a.constructRequestWithoutToken)(n,"POST","");(0,i.default)(u).then(function(e){e=JSON.parse(e),t.cookie(s.default.WCS_ACCESS_TOKEN,e.WCToken),t.cookie(s.default.WCS_PERSONALIZATION_ID,e.personalizationID),t.cookie(s.default.WCS_USER_ID,e.userId),t.cookie(s.default.WCS_TRUSTED_ACCESS_TOKEN,e.WCTrustedToken),t.send({success:!0})}).catch(function(e){404===e.statusCode?(l.error("errors in service to guestIdentityHandler in WCS: ",e),t.send({success:!1,error:e.response.body})):(l.error("errors in service to guestIdentityHandler in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})})},logoutUser:function(e,t){return l.info("inside logout user"),new c.default(function(e,r){var o=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_LOGIN_IDENTITY+s.default.WCS_AT_SELF,n=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0);l.info("Logout user = "+n);var u={},d=(0,a.constructRequestWithoutToken)(n,"DELETE",u);(0,i.default)(d).then(function(e){t.clearCookie(s.default.WCS_ACCESS_TOKEN),t.clearCookie(s.default.WCS_TRUSTED_ACCESS_TOKEN),t.clearCookie(s.default.WCS_PERSONALIZATION_ID),t.clearCookie(s.default.WCS_USER_ID),t.send({success:!0})}).catch(function(e){404===e.statusCode?(l.error("errors in service to logout in WCS: ",e),t.send({success:!1,error:e.response.body})):(l.error("errors in service to logout in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})})}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),s=o(n),a=r(2),u=r(3),i=o(u),d=r(56),c=o(d),l=(0,a.getLogger)();t.default={getPaymentInstruction:function(e,t){var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_CART_AT_SELF+s.default.WCS_PAYMENT_INSTRUCTION,o=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0);l.info("Get payment instruction url = "+o);var n=(0,a.constructRequestWithToken)(o,"GET","",(0,a.getTokens)(e));(0,i.default)(n).then(function(e){(0,a.isJson)(e)&&(e=JSON.parse(e));var r=c.default.mapPaymentInstrutionJSON(e,(0,a.requiredProtocolData)(e));t.send({success:!0,result:r})}).catch(function(e){l.error("errors in service to getPaymentInstruction in WCS: ",e),t.send({success:!1,error:e.response.body})})},createPaymentInstruction:function(e){return new Promise(function(t,r){var o=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_CART_AT_SELF+s.default.WCS_PAYMENT_INSTRUCTION,n=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0),u=e,d=(0,a.constructRequestWithToken)(n,"POST",u,"");(0,i.default)(d).then(function(e){(0,a.isJson)(e)&&(e=JSON.parse(e)),console.log("payment ins created = ",e),t(e)}).catch(function(e){l.error("errors in service to createPaymentInstruction in WCS: ",e),res.send({success:!1,error:e.response.body}),r(!1)})})},putPaymentInstruction:function(e,t){var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_CART_AT_SELF+s.default.WCS_PAYMENT_INSTRUCTION,o=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0);l.info("Update payment instruction url = "+o);var n=e.body,u=(0,a.constructRequestWithToken)(o,"PUT",n,(0,a.getTokens)(e));(0,i.default)(u).then(function(e){t.send({success:!0,result:e})}).catch(function(e){l.error("errors in service to updatePaymentInstruction in WCS: ",e),t.send({success:!1,error:e.response.body})})},deletePaymentInstruction:function(e,t){var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_CART_AT_SELF+s.default.WCS_PAYMENT_INSTRUCTION+s.default.SLASH+e.body.piId,o=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0);l.info("delete payment instruction url = "+o);var n=(0,a.constructRequestWithToken)(o,"DELETE","",(0,a.getTokens)(e));(0,i.default)(n).then(function(e){t.send({success:!0,result:e})}).catch(function(e){l.error("errors in service to deletePaymentInstruction in WCS: ",e),t.send({success:!1,error:e.response.body})})}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n=r(1),s=o(n),a=r(14),u=o(a),i=r(15),d=o(i),c=r(62),l=o(c);process.env.NODE_TLS_REJECT_UNAUTHORIZED="0";var f=(0,s.default)();f.use(s.default.static("WebContent")),f.set("port",process.env.PORT||5e3),f.use((0,l.default)());var S=function(e,t,r){var o=["http://localhost:4200","http://project-c-web-app.herokuapp.com","https://project-c-web-app.herokuapp.com","http://127.0.0.1:4200","http://34.216.254.83:4200","http://34.216.254.83:5000"],n=e.headers.origin;o.indexOf(n)>-1&&t.setHeader("Access-Control-Allow-Origin",n),t.header("Access-Control-Allow-Methods","GET,PUT,POST,DELETE"),t.header("Access-Control-Allow-Headers","Content-Type, Cookie"),t.header("Access-Control-Allow-Credentials",!0),r()};f.use(S),f.use(u.default.urlencoded({extended:!1})),f.use(u.default.json()),f.all("/wcs/*",d.default),f.all("/vr/*",d.default),f.listen(f.get("port"),function(){console.log("running on port",f.get("port"))})},function(e,t){e.exports=require("body-parser")},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=o(n),a=r(16),u=o(a),i=r(20),d=o(i),c=r(23),l=o(c),f=r(27),S=o(f),_=r(30),C=o(_),p=r(35),T=o(p),O=r(37),g=o(O),y=r(40),m=o(y),W=r(43),I=o(W),h=r(45),E=o(h),N=r(47),R=o(N),v=r(48),A=o(v),P=r(51),D=o(P),L=r(53),b=o(L),U=r(55),M=o(U),k=r(57),H=o(k),q=r(58),w=o(q),J=r(60),G=o(J),j=(0,s.default)();j.use("/wcs/PDP",u.default),j.use("/wcs/category",d.default),j.use("/wcs/shipModes",l.default),j.use("/wcs/search",S.default),j.use("/wcs/address",C.default),j.use("/wcs/cart",T.default),j.use("/wcs/promotions",g.default),j.use("/wcs/wishlist",m.default),j.use("/wcs/product",I.default),j.use("/wcs/marketing",E.default),j.use("/wcs/login",R.default),j.use("/wcs/userProfile",A.default),j.use("/wcs/register",D.default),j.use("/wcs/myAccount",b.default),j.use("/wcs/payment",M.default),j.use("/wcs/seo",H.default),j.use("/wcs/page",w.default),j.use("/vr",G.default),t.default=j},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=o(n),a=r(17),u=o(a),i=s.default.Router();i.get("/getProductDetails",function(e,t){u.default.getProductDetails(e,t)}),i.get("/getRecentlyViewedProducts",function(e,t){u.default.getRecentlyViewedProducts(e,t)}),t.default=i},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),s=o(n),a=r(2),u=r(7),i=o(u),d=r(3),c=o(d),l=r(4),f=o(l),S=r(6),_=o(S),C=(0,a.getLogger)();t.default={getProductDetails:function(e,t){var r=e.query.productId,o=e.query.resourceName,n=void 0,u=void 0;C.info("getProductDetails product KeyWord:"+r),_.default.getIdByKeyword(r,"ProductToken").then(function(e){u=e;var r=s.default.WCS_PRODUCT_DETAILS+s.default.WCS_STORE_ID+s.default.WCS_PRODUCT_DETAILS_APPEND+u+"?catalogId="+s.default.WCS_CATALOG_ID+"&langId="+s.default.WCS_LANG_ID,d=(0,a.constructUrl)(s.default.WCS_HOSTNAME,r,!1);C.info("getProductDetails url:"+d);var l=(0,a.constructRequestWithoutToken)(d,"GET","");(0,c.default)(l).then(function(e){return S(e)}).catch(function(e){404===e.statusCode||500===e.statusCode?(C.error("error in service to getProductDetails in WCS: ",e),t.send({success:!1,error:e.response.body})):(C.error("errors in service to getProductDetails in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))});var S=function(e){return new f.default(function(r,d){(0,a.isJson)(e)&&(e=JSON.parse(e));var l=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_INV_AVL+u,f=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,l,!1),S=(0,a.constructRequestWithoutToken)(f,"GET","");C.info("request call = "+JSON.stringify(S)),"ProductBean"==e.catalogEntryView[0].catalogEntryTypeCode?("pdp"==o?n=i.default.mapPdpJSON(e,!0):"qv"==o||"cart"==o?n=i.default.mapQuickViewJSON(e,!0):"relatedProducts"==o&&(n=i.default.mapRelatedProductsJSON(e,!0)),t.send({success:!0,result:n})):(0,c.default)(S).then(function(r){(0,a.isJson)(r)&&(r=JSON.parse(r)),"pdp"==o?n=i.default.mapPdpJSON(e,r):"qv"!=o&&"cart"!=o||(n=i.default.mapQuickViewJSON(e,r)),t.send({success:!0,result:n})}).catch(function(e){404===e.statusCode||500===e.statusCode?(C.error("error in service to getProductDetails in WCS: ",e),t.send({success:!1,error:e.response.body})):(C.error("errors in service to getProductDetails in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})})}})},getRecentlyViewedProducts:function(e,t){var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_ESPOT_RECENTLY_VIEWED_PRODUCTD,o=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0);C.info("Get recently viewed products URL"+o);var n=(0,a.constructRequestWithToken)(o,"GET","",(0,a.getTokens)(e));(0,c.default)(n).then(function(e){var r=i.default.mapRecentlyViewedProductsJSON(JSON.parse(e));t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode||401===e.statusCode?(C.error("errors in service to getRecentlyViewedProducts in WCS: ",e),t.send({success:!1,error:e.response.body})):(C.error("errors in service to getRecentlyViewedProducts in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})}}},function(e,t){e.exports=require("winston")},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n,s=r(0),a=o(s),u=r(10),i=o(u),d=r(2),c=r(9),l=(0,d.getLogger)();c.MongoClient.connect(a.default.DB_URL,function(e,t){e?l.info("Unable to connect to the mongoDB server. Error:",e):(l.info("Connection established to: "+a.default.DB_URL),n=t)}),t.default={getKeyword:function(e,t,r,o){var s=i.default.defer();return n.collection("seo").find({TOKENNAME:t,TOKENVALUE:parseInt(e),STOREENT_ID:o,STATUS:1,LANGUAGE_ID:r}).toArray(function(e,t){var r={};l.info(JSON.stringify(t)),e?(l.info(e),r.errorObject=e,s.reject(r)):t.length?s.resolve(t):(l.info('No document(s) found with defined "find" criteria!'),s.resolve(t))}),s.promise},getRecords:function(e){var t=i.default.defer();return n.collection("seo").find({URLKEYWORD:e}).toArray(function(e,r){var o={};l.info(JSON.stringify(r)),e?(l.info("Errror in getRecords"+e),o.errorObject=e,t.reject(o)):r.length?t.resolve(r):(l.info('No document(s) found with defined "find" criteria!'),t.resolve(r))}),t.promise},getRecordsByKeyword:function(e,t,r,o){var s=i.default.defer();return n.collection("seo").find({URLKEYWORD:e,TOKENNAME:t,STOREENT_ID:parseInt(o),STATUS:1,LANGUAGE_ID:r}).toArray(function(e,t){var r={};l.info(JSON.stringify(t)),e?(l.info("Errror in getRecordsByKeyword"+e),r.errorObject=e,s.reject(r)):t.length?s.resolve(t):(l.info('No document(s) found with defined "find" criteria!'),s.resolve(t))}),s.promise},getRecordsByProductId:function(e,t,r,o){var s=i.default.defer();return n.collection("seo").find({TOKENVALUE:parseInt(e),TOKENNAME:t,STOREENT_ID:parseInt(o),STATUS:1,LANGUAGE_ID:r}).toArray(function(e,t){var r={};l.info(JSON.stringify(t)),e?(l.info("Errror in getRecordsByProductId"+e),r.errorObject=e,s.reject(r)):t.length?s.resolve(t):(l.info('No document(s) found with defined "find" criteria!'),s.resolve(t))}),s.promise}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=o(n),a=r(21),u=o(a),i=s.default.Router();i.get("/getTopCategories",function(e,t){u.default.getTopCategories(t)}),i.get("/getCategory",function(e,t){u.default.getCategory(t,e)}),i.get("/getSubCategories",function(e,t){u.default.getSubCategories(t,e)}),i.get("/getProductsListForCategory",function(e,t){u.default.getProductsListForCategory(e,t,e.query.identifier)}),t.default=i},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),s=o(n),a=r(2),u=r(22),i=o(u),d=r(6),c=o(d),l=r(3),f=o(l),S=(0,a.getLogger)();t.default={getTopCategories:function(e){var t=s.default.WCS_PRODUCT_DETAILS+s.default.WCS_STORE_ID+s.default.WCS_CATEGORY_TOP+"?catalogId="+s.default.WCS_CATALOG_ID+"&langId="+s.default.WCS_LANG_ID,r={},o=(0,a.constructUrl)(s.default.WCS_HOSTNAME,t,!1);S.info("getTopCategoriesUrl: "+o);var n=(0,a.constructRequestWithoutToken)(o,"GET",r);S.info(JSON.stringify(n)),(0,f.default)(n).then(function(t){var r=i.default.mapTopCategoryJSON(t);e.send({success:!0,result:r})}).catch(function(t){S.error("errors in service to getTopCategories in WCS: ",t),e.send({success:!1,error:t})})},getCategory:function(e,t){var r=t.query.identifier;console.log("Identifier::"+r),c.default.getIdByKeyword(t.query.identifier,"CategoryToken").then(function(t){var r=s.default.WCS_PRODUCT_DETAILS+s.default.WCS_STORE_ID+s.default.WCS_CATEGORY+t+"?catalogId="+s.default.WCS_CATALOG_ID+"&langId="+s.default.WCS_LANG_ID,o={},n=(0,a.constructUrl)(s.default.WCS_HOSTNAME,r,!1);S.info("getCategoriesUrl: "+n);var u=(0,a.constructRequestWithoutToken)(n,"GET",o);S.info(JSON.stringify(u)),(0,f.default)(u).then(function(t){var r=i.default.mapCategoryJSON(t);e.send({success:!0,result:r})}).catch(function(t){S.error("errors in service to getCategories in WCS: ",t),e.send({success:!1,error:t})})})},getSubCategories:function(e,t){S.info(" categoryCtrl -> getSubCategories: "),c.default.getIdByKeyword(t.query.identifier,"CategoryToken").then(function(t){var r=s.default.WCS_PRODUCT_DETAILS+s.default.WCS_STORE_ID+s.default.WCS_SUB_CATEGORY+t,o={},n=(0,a.constructUrl)(s.default.WCS_HOSTNAME,r,!1);S.info("getSubCategoriesUrl: "+n);var u=(0,a.constructRequestWithoutToken)(n,"GET",o);S.info(JSON.stringify(u)),(0,f.default)(u).then(function(t){console.log("Before Mapper");var r=i.default.mapSubCategoryJSON(t);e.send({success:!0,result:r})}).catch(function(t){S.error("errors in service to getSubCategories in WCS: ",t),e.send({success:!1,error:t})})})},getProductsListForCategory:function(e,t,r){var o=e.query.pagesize,n=e.query.currentPage;S.info("getProductsListForCategory -> categoryId::"+r),c.default.getIdByKeyword(r,"CategoryToken").then(function(r){var u=s.default.WCS_PRODUCT_DETAILS+s.default.WCS_STORE_ID+s.default.WCS_CATEGORY_DETAILS_APPEND+r+"?catalogId="+s.default.WCS_CATALOG_ID+"&langId="+s.default.WCS_LANG_ID+"&pageNumber="+n+"&pageSize="+o;if(e.query.orderBy){u=u+"&orderBy="+e.query.orderBy}if(e.query.facet){var d=e.query.facet;if(S.info("Multiple facets"+Array.isArray(d)),Array.isArray(d)){var c=d[Symbol.iterator](),l=!0,_=!1,C=void 0;try{for(var p,T=c[Symbol.iterator]();!(l=(p=T.next()).done);l=!0){u=u+"&facet="+p.value}}catch(e){_=!0,C=e}finally{try{!l&&T.return&&T.return()}finally{if(_)throw C}}}else u=u+"&facet="+d}var O=(0,a.constructUrl)(s.default.WCS_HOSTNAME,u,!1);S.info("getProductsListForCategoryUrl: "+O);var g=(0,a.constructRequestWithoutToken)(O,"GET","");S.info(JSON.stringify(g)),(0,f.default)(g).then(function(e){var r={pageSize:o,currentPage:n};(0,a.isJson)(e)&&(e=JSON.parse(e));var s=i.default.mapProductsListForCategoryJSON(e,r);t.send({success:!0,result:s})}).catch(function(e){S.error("errors in service to getProductsListForCategory in WCS: ",e),t.send({success:!1,error:e})})})}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),s=o(n),a=r(0),u=o(a),i=r(6);o(i);t.default={mapTopCategoryJSON:function(e){return s.default.makeConverter({TopCategories:["catalogGroupView",s.default.map({name:"name",identifier:"identifier",id:"uniqueID",seoKeyword:"seo_token_ntk",store:"storeID"})],totalCount:"recordSetCount"})(e)},mapCategoryJSON:function(e){return s.default.makeConverter({Category:["catalogGroupView",s.default.map({fullImage:"fullImage",fullImageAltDescription:"fullImageAltDescription",parentCatalogGroupID:"parentCatalogGroupID",identifier:"identifier",metaDescription:"metaDescription",metaKeyword:"metaKeyword",name:"name",productsURL:"productsURL",resourceId:"resourceId",shortDescription:"shortDescription",seoKeyword:"seo_token_ntk",thumbnail:"thumbnail",title:"title",uniqueID:"uniqueID"})]})(e)},mapSubCategoryJSON:function(e){return s.default.makeConverter({SubCategories:["catalogGroupView",s.default.map({name:"name",identifier:"identifier",id:"uniqueID",store:"storeID",seoKeyword:"seo_token_ntk",thumbnail:["thumbnail",function(e){if(e)return u.default.HTTP_URI_CONSTANT+u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}]})],totalCount:"recordSetCount"})(e)},mapProductsListForCategoryJSON:function(e,t){var r=Number(t.pageSize),o=Number(e.recordSetTotal),n=Math.ceil(o/r);return s.default.makeConverter({pagination:{pageSize:s.default.helpers.def(t.pageSize),currentPageNumber:s.default.helpers.def(t.currentPage),resultsTotal:"recordSetTotal",resultsCurrentPage:"recordSetCount",pages:s.default.helpers.def(n)},resourceIdentifier:"resourceId",productsList:["catalogEntryView",s.default.map({availability:"",listPrice:"price.0.value",purchasePrice:"price.1.value",displayName:"name",code:"partNumber",uniqueID:"uniqueID",store:"storeID",seoKeyword:"seo_token_ntk",thumbnail:["thumbnail",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}],attributes:["attributes",s.default.map({displayable:"displayable",name:"name",identifier:"identifier",values:"values.0.value"})],hasSingleSKU:"hasSingleSKU",catalogEntryTypeCode:"catalogEntryTypeCode"})],facets:["facetView",s.default.map({entry:["entry",s.default.map({count:"count",uniqueId:function(e){return e.extendedData.uniqueId},label:"label",value:"value",image:["image",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}]})],extendedData:{name:"name",value:"value",facet_id:"extendedData.facet_id",fdesc:"extendedData.fdesc",fname:"extendedData.fname",srchattr_id:"extendedData.srchattr_id",srchattridentifier:"extendedData.srchattridentifier",storeent_id:"extendedData.storeent_id"}})]})(e)}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=o(n),a=r(24),u=o(a),i=s.default.Router();i.get("/getShippingMethods",function(e,t){u.default.getShipModes(t,e)}),i.get("/getShippingInfo",function(e,t){u.default.getShippingInfo(t,e)}),i.put("/updateShippingMethods",function(e,t){u.default.updateShipModes(t,e)}),t.default=i},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),s=o(n),a=r(2),u=r(25),i=o(u),d=r(26),c=(o(d),r(3)),l=o(c),f=(0,a.getLogger)();t.default={getShipModes:function(e,t){var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_SHIPMODES_APPEND;f.info("getShipModes post form url:"+(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!1));var o={},n=(0,a.constructRequestWithoutToken)((0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!1),"GET",o);(0,l.default)(n).then(function(t){var r=i.default.mapShipModeJSON(t);e.send({success:!0,result:r})}).catch(function(t){t.response.body?(f.error("errors in service to get ship modes in WCS: ",body.errors),e.send({success:!1,error:body.errors})):(f.error("errors in service to get ship modes in WCS: ",t),e.send({success:!1,error:t}))})},updateShipModes:function(e,t){var r=t.body.shipModeId,o=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_UPDATE_SHIP_INFO;f.info("updateShipModes post form url:"+(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0));var n={shipModeId:r,x_calculationUsage:s.default.SHIP_CALC_USAGE},u=(0,a.constructRequestWithToken)((0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0),"PUT",n,(0,a.getTokens)(t));(0,l.default)(u).then(function(t){e.send({success:!0})}).catch(function(t){e.send({success:!1,error:t})})},getShippingInfo:function(e,t){var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_UPDATE_SHIP_INFO;f.info("getShippingInfo get form url:"+(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0));var o={},n=(0,a.constructRequestWithToken)((0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0),"GET",o,(0,a.getTokens)(t));(0,l.default)(n).then(function(t){e.send({success:!0,result:t})}).catch(function(t){e.send({success:!1,error:t})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(5),n=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default={mapShipModeJSON:function(e){return n.default.makeConverter({usableShippingMode:[{choice:["usableShippingMode",n.default.map({carrier:"field2",shipModeId:"shipModeId",displayName:"shipModeDescription",name:"shipModeCode"})]}]})(e)}}},function(e,t){e.exports=require("request")},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=o(n),a=r(28),u=o(a),i=s.default.Router();i.get("/getSearchResults",function(e,t){u.default.getSearchResults(e,t)}),i.get("/keywordSuggestionsByTerm",function(e,t){u.default.keywordSuggestionsByTerm(e,t)}),t.default=i},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),s=r(0),a=o(s),u=r(29),i=o(u),d=r(3),c=o(d),l=(0,n.getLogger)();t.default={getSearchResults:function(e,t){var r=e.query.keyword,o=e.query.pageSize,s=e.query.currentPage,u={pageSize:o,currentPage:s},d=a.default.WCS_PRODUCT_DETAILS+a.default.WCS_STORE_ID+a.default.WCS_PRODUCT_SEARCH_BY_KEYWORD+r+"?pageSize="+o+"&pageNumber="+s;if(e.query.orderBy){d=d+"&orderBy="+e.query.orderBy}if(e.query.categoryId){d=d+"&categoryId="+e.query.categoryId}if(e.query.facet){var f=e.query.facet;if(l.info("Multiple facets"+Array.isArray(f)),Array.isArray(f)){var S=f[Symbol.iterator](),_=!0,C=!1,p=void 0;try{for(var T,O=S[Symbol.iterator]();!(_=(T=O.next()).done);_=!0){d=d+"&facet="+T.value}}catch(e){C=!0,p=e}finally{try{!_&&O.return&&O.return()}finally{if(C)throw p}}}else d=d+"&facet="+f}var g=(0,n.constructUrl)(a.default.WCS_HOSTNAME,d,!1);l.info("search url = "+g);var y=(0,n.constructRequestWithoutToken)(g,"GET","");(0,c.default)(y).then(function(e){(0,n.isJson)(e)&&(e=JSON.parse(e));var r=i.default.mapSearchResultJSON(e,u);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode?(l.error("errors in service to getSearchResults in WCS: ",e),t.send({success:!1,error:e.response.body})):(l.error("errors in service to getSearchResults in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})},keywordSuggestionsByTerm:function(e,t){var r=e.query.term,o=a.default.WCS_PRODUCT_DETAILS+a.default.WCS_STORE_ID+a.default.WCS_KEYWORD_SUGGESTION+r,s=(0,n.constructUrl)(a.default.WCS_HOSTNAME,o,!1);l.info("keywordSuggestionsByTermUrl: "+s);var u={},i=(0,n.constructRequestWithoutToken)(s,"GET",u);(0,c.default)(i).then(function(e){t.send({success:!0,result:e})}).catch(function(e){404===e.statusCode?(l.error("404 error in service to keywordSuggestionsByTerm in WCS: ",e),t.send({success:!1,error:e})):(l.error("errors in service to keywordSuggestionsByTerm in WCS: ",e),t.send({success:!1,error:e}))})}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),s=o(n),a=r(0),u=o(a);t.default={mapSearchResultJSON:function(e,t){var r=Number(t.pageSize),o=Number(e.recordSetTotal),n=Math.ceil(o/r);return s.default.makeConverter({pagination:{pageSize:s.default.helpers.def(t.pageSize),currentPageNumber:s.default.helpers.def(t.currentPage),resultsTotal:"recordSetTotal",resultsCurrentPage:"recordSetCount",pages:s.default.helpers.def(n)},resourceIdentifier:"resourceId",searchResults:["catalogEntryView",s.default.map({uniqueID:"uniqueID",listPrice:"price.0.value",purchasePrice:"price.1.value",displayName:"name",code:"partNumber",store:"storeID",seoKeyword:"seo_token_ntk",thumbnail:["thumbnail",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}],attributes:["attributes",s.default.map({displayable:"displayable",name:"name",identifier:"identifier",values:"values.0.value"})]})],facets:["facetView",s.default.map({entry:["entry",s.default.map({count:"count",uniqueId:function(e){return e.extendedData.uniqueId},label:"label",value:"value",image:["image",function(e){if(e)return u.default.WCS_DOUBLE_SLASH+u.default.WCS_HOSTNAME_NOPORT+e}]})],extendedData:{name:"name",value:"value",facet_id:"extendedData.facet_id",fdesc:"extendedData.fdesc",fname:"extendedData.fname",srchattr_id:"extendedData.srchattr_id",srchattridentifier:"extendedData.srchattridentifier",storeent_id:"extendedData.storeent_id"}})]})(e)}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=o(n),a=r(31),u=o(a),i=s.default.Router();i.get("/getShippingAddresses",function(e,t){u.default.getShippingAddresses(t,e)}),i.post("/addShippingAddress",function(e,t){u.default.addShippingAddress(t,e)}),i.put("/updateShippingAddress",function(e,t){u.default.updateShippingAddress(t,e)}),i.delete("/deleteShippingAddress",function(e,t){u.default.deleteShippingAddress(t,e)}),i.put("/selectShippingAddress",function(e,t){u.default.selectShippingAddress(t,e)}),t.default=i},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),s=o(n),a=r(2),u=r(32),i=o(u),d=r(3),c=o(d),l=(0,a.getLogger)();t.default={getShippingAddresses:function(e,t){var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_ADDRESS_DETAILS;l.info("getAddress get form url:"+(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0));var o={},n=(0,a.constructRequestWithToken)((0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0),"GET",o,(0,a.getTokens)(t));l.info("requestCAll "+(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0)),(0,c.default)(n).then(function(r){var n=r,u=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_CHECKOUT_PROFILE;l.info("checkout profile get form url:"+(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,u,!0));var d=(0,a.constructRequestWithToken)((0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,u,!0),"GET",o,(0,a.getTokens)(t));l.info("requestCAll "+(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,u,!0)),(0,c.default)(d).then(function(t){var r=i.default.mapGetAddressJSON(n,t);e.send({success:!0,result:r})}).catch(function(t){t.response.body?(l.error("errors in service to getShippingAddress(checkoutProfile) in WCS: ",t.response.body),e.send({success:!1,error:t.response.body})):(l.error("errors in service to getShippingAddress(checkoutProfile) in WCS: ",t),e.send({success:!1,error:t}))})}).catch(function(t){t.response.body?(l.error("errors in service to getShippingAddress(person/contact) in WCS: ",t.response.body),e.send({success:!1,error:t.response.body})):(l.error("errors in service to getShippingAddress(person/contact) in WCS: ",t),e.send({success:!1,error:t}))})},addShippingAddress:function(e,t){var r=Math.round(+new Date/1e3),o=(t.body.addressType,s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_ADDRESS_DETAILS);l.info("addAddress POST form url:"+(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0));var n=t.body,u=(0,a.constructRequestWithToken)((0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0),"POST",n,(0,a.getTokens)(t));l.info("requestCAll "+JSON.stringify((0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0))),(0,c.default)(u).then(function(t){e.send({success:!0})}).catch(function(t){console.log("addressCtlr => addShippingAddress",t),e.send({success:!1,error:t})})},updateShippingAddress:function(e,t){var r=t.body.nickName,o=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_ADDRESS_DETAILS+s.default.SLASH+r;l.info("updateAddress PUT form url:"+(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0));var n=t.body,u=(0,a.constructRequestWithToken)((0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0),"PUT",n,(0,a.getTokens)(t));(0,c.default)(u).then(function(t){e.send({success:!0})}).catch(function(t){console.log("addressCtlr => addShippingAddress",t),e.send({success:!1,error:t})})},deleteShippingAddress:function(e,t){var r=t.query.nickName,o=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_ADDRESS_DETAILS+s.default.SLASH+r;l.info("deleteAddress POST form url:"+(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0));var n={},u=(0,a.constructRequestWithToken)((0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0),"DELETE",n,(0,a.getTokens)(t));(0,c.default)(u).then(function(t){e.send({success:!0})}).catch(function(t){console.log("addressCtlr => addShippingAddress",t),e.send({success:!1,error:t})})},selectShippingAddress:function(e,t){i={};var r=t.body.addressId,o=s.default.SHIP_CALC_USAGE,n=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_SHIP_INFO,u=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,n,!0);l.info("selectShippingAddress url ",u);var i={addressId:r,orderId:".",orderItem:[{addressId:r}],x_calculationUsage:o},d=(0,a.constructRequestWithToken)(u,"PUT",i,(0,a.getTokens)(t));(0,c.default)(d).then(function(t){e.send({success:!0,result:t})}).catch(function(t){e.send({success:!1,error:t})})}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),s=o(n),a=r(33),u=o(a),i=r(34),d=o(i);t.default={mapGetAddressJSON:function(e,t){var r=s.default.makeConverter({address:["contact",s.default.map({addressId:"addressId",addressLine:{addressLine1:"addressLine.0",addressLine2:"addressLine.1"},addressType:"addressType",country:"country",city:"city",firstName:"firstName",lastName:"lastName",nickName:"nickName",zipCode:"zipCode",state:"state",email1:"email1",phone1:"phone1",primary:"primary"})]}),o=s.default.makeConverter({defaultAddress:["CheckoutProfile",s.default.map({addressId:"shipping_addressId",addressLine:{addressLine1:"shipping_addressLine.0",addressLine2:"shipping_addressLine.1"},addressType:"shipping_addressType",country:"shipping_country",city:"shipping_city",firstName:"shipping_firstName",lastName:"shipping_lastName",nickName:"shipping_nickName",zipCode:"shipping_zipCode",state:"shipping_state",email1:"shipping_email1",phone1:"shipping_phone1",primary:"shipping_primary"})]}),n=o(t),a=r(e);u.default.extend=(0,d.default)({inPlace:!1,arrays:"replace",isDeep:!0});var i=u.default.extend(n,a),c={contact:[i]};return console.log(JSON.stringify(i)),i.userId=t.userId,c},mapAddAddressJSON:function(e){var t={userId:e.userId,addressId:e.addressId,addShippingAddressMsg:constants.WCS_ADDRESS_ADDED};return JSON.parse(JSON.stringify(t))},mapUpdateAddressJSON:function(e){var t={addressId:e.addressId,updateShippingAddressMsg:constants.WCS_ADDRESS_UPDATED};return JSON.parse(JSON.stringify(t))},mapDeleteAddressJSON:function(e){var t={deleteShippingAddressMsg:constants.WCS_ADDRESS_DELETED};return JSON.parse(JSON.stringify(t))},mapSelectAddressJSON:function(e){var t={selectShippingAddressMsg:constants.WCS_ADDRESS_SELECTED};return JSON.parse(JSON.stringify(t))}}},function(e,t){e.exports=require("underscore")},function(e,t){e.exports=require("extendify")},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=o(n),a=r(36),u=o(a),i=s.default.Router();i.post("/addToCart",function(e,t){u.default.addToCart(e,t)}),i.get("/shoppingCart",function(e,t){u.default.shoppingCart(e,t)}),i.put("/updateShoppingCartItem",function(e,t){u.default.updateShoppingCartItem(e,t)}),i.post("/deleteShoppingCartItem",function(e,t){u.default.deleteShoppingCartItem(e,t)}),i.delete("/deleteAllShoppingCartItem",function(e,t){u.default.deleteAllShoppingCartItem(e,t)}),i.post("/submitOrder",function(e,t){u.default.submitOrder(e,t)}),i.get("/orderPaymentSummary",function(e,t){u.default.orderPaymentSummary(e,t)}),i.post("/orderReview",function(e,t){u.default.orderReview(e,t)}),t.default=i},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),s=o(n),a=r(2),u=r(8),i=o(u),d=r(11),c=o(d),l=r(3),f=o(l),S=r(4),_=o(S),C=(0,a.getLogger)();t.default={addToCart:function(e,t){C.info("inside add to cart"),C.info("req.cookie.userId::"+e.cookies.userId),"undefined"==e.cookies.userId&&c.default.guestIdentityHandler(e,t);var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_CART_EXT+"?catalogId="+s.default.WCS_CATALOG_ID+"&langId="+s.default.WCS_LANG_ID,o=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0),n=e.body;C.info("addToCartUrl:"+o+"messageData: "+JSON.stringify(n));var u=(0,a.constructRequestWithToken)(o,"POST",n,(0,a.getTokens)(e));(0,f.default)(u).then(function(e){var r=i.default.addToCartJSON(e);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode||400===e.statusCode?(C.error("errors in service to addToCartFunction in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(C.error("errors in service to addToCartFunction in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},shoppingCart:function(e,t){var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_CART_AT_SELF;C.info("ShoppingCart URL"+(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0));var o=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0),n={},u=(0,a.constructRequestWithToken)(o,"GET",n,(0,a.getTokens)(e));(0,f.default)(u).then(function(e){var r=i.default.mapShoppingCartJSON(e);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode||400===e.statusCode?(C.error("errors in service to shoppingCart in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(C.error("errors in service to shoppingCart in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},updateShoppingCartItem:function(e,t){var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_CART+s.default.WCS_GET_SHOPPINGCART+s.default.WCS_UPDATE_CART;C.info("Update ShoppingCart URL"+(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0));var o=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0),n=i.default.mapUpdateCartRequestJSON(e.body);C.info("request to wcs"+n);var u=(0,a.constructRequestWithToken)(o,"PUT",n,(0,a.getTokens)(e));(0,f.default)(u).then(function(e){var r=i.default.mapUpdateCartResponseJSON(e);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode||400===e.statusCode?(C.error("errors in service to updateShoppingCartItem in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(C.error("errors in service to updateShoppingCartItem in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},deleteShoppingCartItem:function(e,t){var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_CART+s.default.WCS_GET_SHOPPINGCART+s.default.WCS_DELETE_CART;C.info("Delete ShoppingCart URL"+(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0));var o=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0),n=i.default.mapDeleteCartRequestJSON(e.body);C.info("request to wcs"+JSON.stringify(n));var u=(0,a.constructRequestWithToken)(o,"PUT",n,(0,a.getTokens)(e));(0,f.default)(u).then(function(e){result=i.default.mapDeleteCartResponseJSON(e),t.send({success:!0,result:result})}).catch(function(e){404===e.statusCode||400===e.statusCode?(C.error("errors in service to deleteShoppingCartItem in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(C.error("errors in service to deleteShoppingCartItem in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},deleteAllShoppingCartItem:function(e,t){var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_CART+s.default.WCS_GET_SHOPPINGCART;C.info("Delete All ShoppingCart Item URL"+(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0));var o=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0),n={},u=(0,a.constructRequestWithToken)(o,"DELETE",n,(0,a.getTokens)(e));(0,f.default)(u).then(function(e){var r=i.default.mapDeleteAllCartJSON(e);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode||400===e.statusCode?(C.error("errors in service to deleteAllShoppingCartItem in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(C.error("errors in service to deleteAllShoppingCartItem in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},submitOrder:function(e,t){var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_CART_EXT+s.default.WCS_GET_SHOPPINGCART+s.default.WCS_CART_PRECHECKOUT,o=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0),n=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_CART_EXT+s.default.WCS_GET_SHOPPINGCART+s.default.WCS_CART_CHECKOUT,u=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,n,!0),d=(0,a.getTokens)(e),c=function(e,r){return new _.default(function(o,n){C.info("inside checkOut of submitOrder"+u+"DATA: "+JSON.stringify(e));var s=(0,a.constructRequestWithToken)(u,"POST",e,r);(0,f.default)(s).then(function(e){return l(e,r)}).catch(function(e){404===e.statusCode||400===e.statusCode?(C.error("errors in service to checkOut of submitOrder in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(C.error("errors in service to checkOut of submitOrder in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})})},l=function(e,r){return new _.default(function(o,n){var u=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_ORDER+e.orderId,d=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,u,!0);C.info("inside getOrderConfirmationDetails of submitOrder: "+d),C.info("data: "+JSON.stringify(e)+"authToken: "+JSON.stringify(r));var c={},l=(0,a.constructRequestWithToken)(d,"GET",c,r);(0,f.default)(l).then(function(e){(0,a.isJson)(e)&&(e=JSON.parse(e)),C.info(JSON.stringify(e));var r=(0,a.requiredProtocolData)(e);C.info(JSON.stringify(r));var o=i.default.mapOrderConfirmationResponseJSON(e,r);C.info("finalResponse: "+JSON.stringify(o)),t.send({success:!0,result:o})}).catch(function(e){404===e.statusCode||400===e.statusCode?(C.error("errors in service to getOrderConfirmationDetails of submitOrder in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(C.error("errors in service to getOrderConfirmationDetails of submitOrder in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})})};(function(r){return new _.default(function(n,s){C.info("inside preCheckOut of submitOrder"+o);var u=e.body;C.info("messageData: "+u);var i=(0,a.constructRequestWithToken)(o,"PUT",u,r);(0,f.default)(i).then(function(e){n(e)}).catch(function(e){404===e.statusCode||400===e.statusCode?(C.error("errors in service to preCheckOut of submitOrder in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(C.error("errors in service to preCheckOut of submitOrder in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})})})(d).then(function(e){return c(e,d)})},orderPaymentSummary:function(e,t){var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_CART_AT_SELF;C.info("orderPaymentSummary URL"+(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0));var o=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0),n={},u=(0,a.constructRequestWithToken)(o,"GET",n,(0,a.getTokens)(e));(0,f.default)(u).then(function(e){var r=i.default.mapOrderPaymentSummaryJSON(e);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode||400===e.statusCode?(C.error("errors in service to orderPaymentSummary in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(C.error("errors in service to orderPaymentSummary in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},orderReview:function(e,t){var r=e.body,o=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_ORDER+r.orderId;C.info("orderReview URL"+(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0));var n=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0),u={},d=(0,a.constructRequestWithToken)(n,"GET",u,(0,a.getTokens)(e));C.info("review: "+JSON.stringify(d)),(0,f.default)(d).then(function(e){(0,a.isJson)(e)&&(e=JSON.parse(e)),C.info(JSON.stringify(e));var r=(0,a.requiredProtocolData)(e);C.info(JSON.stringify(r));var o=i.default.mapOrderConfirmationResponseJSON(e,r);C.info("finalResponse: "+JSON.stringify(o)),t.send({success:!0,result:o})}).catch(function(e){404===e.statusCode||400===e.statusCode?(C.error("errors in service to orderReview in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(C.error("errors in service to orderReview in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=o(n),a=r(38),u=o(a),i=s.default.Router();i.get("/getPromoCodePromotionsAtCart",function(e,t){u.default.getPromoCodePromotionsAtCart(e,t)}),i.post("/apply",function(e,t){u.default.apply(e,t)}),i.post("/delete",function(e,t){u.default.delete(e,t)}),t.default=i},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),s=o(n),a=r(39),u=o(a),i=r(3),d=o(i),c=r(4),l=(o(c),r(2)),f=(0,l.getLogger)();t.default={getPromoCodePromotionsAtCart:function(e,t){f.info("inside getPromoCodePromotionsAtCart ctrl");var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_CART_PROMOTIONS,o=(0,l.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0);f.info("Get Promo codes in Cart URL"+o);var n=(0,l.constructRequestWithToken)(o,"GET","",(0,l.getTokens)(e));(0,d.default)(n).then(function(e){(0,l.isJson)(e)&&(e=JSON.parse(e));var r=u.default.mapPromoCodesResultJSON(e);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode?(f.error("errors in service to getPromotionsAtCart in WCS: ",e),t.send({success:!1,error:e.response.body})):(f.error("errors in service to getPromotionsAtCart in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})},apply:function(e,t){var r=e.body.promoCode,o=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_CART_PROMOTIONS;f.info("promocode = "+r);var n=(0,l.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0);f.info("Apply Promotion URL"+n);var a={promoCode:r},u=(0,l.constructRequestWithToken)(n,"POST",a,(0,l.getTokens)(e));(0,d.default)(u).then(function(e){(0,l.isJson)(e)&&(e=JSON.parse(e)),t.send({success:!0,result:{orderId:e.orderId,promoCode:r}})}).catch(function(e){404===e.statusCode?(f.error("errors in service to getPromotionsAtCart in WCS: ",e),t.send({success:!1,error:e.response.body})):(f.error("errors in service to getPromotionsAtCart in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})},delete:function(e,t){var r=e.body.promoCode,o=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_CART_PROMOTIONS+"/"+r;f.info("promocode = "+r);var n=(0,l.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0);f.info("Delete Promotion URL "+n);var a=(0,l.constructRequestWithToken)(n,"DELETE","",(0,l.getTokens)(e));(0,d.default)(a).then(function(e){(0,l.isJson)(e)&&(e=JSON.parse(e)),t.send({success:!0,result:{orderId:e.orderId,promoCode:r}})}).catch(function(e){404===e.statusCode||400===e.statusCode?(f.error("errors in service to getPromotionsAtCart in WCS: ",e),t.send({success:!1,error:e.response.body})):(f.error("errors in service to getPromotionsAtCart in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(5),n=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default={mapPromotionsResultJSON:function(e){return n.default.makeConverter({promotions:["adjustment",n.default.map({name:"code",description:{longDescription:"",shortDescription:""}})],orderId:"orderId"})(e)},mapPromoCodesResultJSON:function(e){return n.default.makeConverter({promotions:["promotionCode",n.default.map({name:"",description:{longDescription:"associatedPromotion.0.description",shortDescription:"associatedPromotion.0.description"},code:"code",promotionId:"associatedPromotion.0.promotionId"})],orderId:"orderId"})(e)}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=o(n),a=r(41),u=o(a),i=s.default.Router();i.post("/addToDefaultWishList",function(e,t){u.default.addToDefaultWishList(e,t)}),i.post("/addToWishList",function(e,t){u.default.addToWishList(e,t)}),i.post("/deleteFromWishList",function(e,t){u.default.deleteFromWishList(e,t)}),i.get("/getWishList",function(e,t){u.default.getWishList(e,t)}),i.post("/moveWishListItemToCart",function(e,t){u.default.moveWishListItemToCart(e,t)}),i.get("/loadWishLists",function(e,t){u.default.loadWishLists(e,t)}),i.post("/addNewWishList",function(e,t){u.default.addNewWishList(e,t)}),t.default=i},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),s=o(n),a=r(2),u=r(3),i=o(u),d=r(42),c=o(d),l=r(8),f=o(l),S=r(4),_=o(S),C=(0,a.getLogger)();t.default={addNewWishList:function(e,t){var r={description:e.body.description,descriptionName:e.body.descriptionName,registry:"false"},o=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_WISHLIST+"?catalogId="+s.default.WCS_CATALOG_ID+"&langId="+s.default.WCS_LANG_ID+"&responseFormat=json",n=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0);C.info("addNewWishListUrl:"+n+"messageData: "+JSON.stringify(r));var u=(0,a.constructRequestWithToken)(n,"POST",r,(0,a.getTokens)(e));(0,i.default)(u).then(function(e){t.send({success:!0,result:e})}).catch(function(e){404===e.statusCode||400===e.statusCode?(C.error("errors in service to addNewWishList in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(C.error("errors in service to addNewWishList in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},addToDefaultWishList:function(e,t){C.info("inside add to wish list");var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_WISHLIST+"?catalogId="+s.default.WCS_CATALOG_ID+"&langId="+s.default.WCS_LANG_ID,o=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0);C.info(e.body);var n=c.default.addToWishListRequestMapperJSON(e.body);C.info("addToWishListUrl:"+o+"messageData: "+JSON.stringify(n));var u=(0,a.constructRequestWithToken)(o,"POST",n,(0,a.getTokens)(e));(0,i.default)(u).then(function(){t.send({success:!0})}).catch(function(e){404===e.statusCode||400===e.statusCode?(C.error("errors in service to addToWishList in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(C.error("errors in service to addToWishList in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},addToWishList:function(e,t){C.info("inside add to wish list");var r=e.body.wishListId,o=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_WISHLIST+s.default.SLASH+r+"?catalogId="+s.default.WCS_CATALOG_ID+"&langId="+s.default.WCS_LANG_ID+"&addItem=true&responseFormat=json",n=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0),u=c.default.addToWishListRequestMapperJSON(e.body);C.info("addToWishListUrl:"+n+"messageData: "+JSON.stringify(u));var d=(0,a.constructRequestWithToken)(n,"PUT",u,(0,a.getTokens)(e));(0,i.default)(d).then(function(e){t.send({success:!0})}).catch(function(e){404===e.statusCode||400===e.statusCode?(C.error("errors in service to addToWishList in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(C.error("errors in service to addToWishList in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},deleteFromWishList:function(e,t){C.info("inside delete from wish list");var r=e.body.wishListId,o=void 0,n=void 0;e.body.itemList?(o=e.body.itemList[0].wishListItemId,n=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_WISHLIST_DELETE+r+"?wishListItemId="+o+"&catalogId="+s.default.WCS_CATALOG_ID+"&langId="+s.default.WCS_LANG_ID):n=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_WISHLIST_DELETE+r+"?catalogId="+s.default.WCS_CATALOG_ID+"&langId="+s.default.WCS_LANG_ID;var u=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,n,!0);C.info("deleteFromWishListUrl:"+u+"messageData: ");var d=(0,a.constructRequestWithToken)(u,"DELETE","",(0,a.getTokens)(e));(0,i.default)(d).then(function(){t.send({success:!0})}).catch(function(e){404===e.statusCode||400===e.statusCode?(C.error("errors in service to deleteFromWishList in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(C.error("errors in service to deleteFromWishList in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},getWishList:function(e,t){C.info("inside getWishList");var r=e.query.wishListId,o=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_WISHLIST+s.default.SLASH+r+"?catalogId="+s.default.WCS_CATALOG_ID+"&langId="+s.default.WCS_LANG_ID+"&responseFormat=json",n=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0);C.info("getWishListUrl:"+n+"messageData: ");var u=(0,a.constructRequestWithToken)(n,"GET","",(0,a.getTokens)(e));(0,i.default)(u).then(function(e,r){var o=c.default.getWishListJSON(JSON.parse(e),r);t.send({success:!0,result:o})}).catch(function(e){404===e.statusCode||400===e.statusCode?(C.error("errors in service to getWishList in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(C.error("errors in service to getWishList in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},loadWishLists:function(e,t){C.info("inside loadWishLists Controller Load1");var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_WISHLIST+s.default.WCS_AT_SELF+"?responseFormat=json",o=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0),n={};C.info("loadWishListURL: "+o);var u=(0,a.constructRequestWithToken)(o,"GET",n,(0,a.getTokens)(e));(0,i.default)(u).then(function(e){var r=c.default.getWishListLists(e);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode||400===e.statusCode?(C.error("errors in service to getPersonalInformation in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(C.error("errors in service to getPersonalInformation in WCS: OTHER ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},moveWishListItemToCart:function(e,t){C.info("inside moveWishListItemToCart");var r=e.body.wishListItemId,o=e.body.wishListId,n=e.body.quantity,u=e.body.productId,d=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_WISHLIST_DELETE+o+"?wishListItemId="+r+"&catalogId="+s.default.WCS_CATALOG_ID+"&langId="+s.default.WCS_LANG_ID,l=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,d,!0),S=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_CART_EXT+"?catalogId="+s.default.WCS_CATALOG_ID+"&langId="+s.default.WCS_LANG_ID,p=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,S,!0),T=(0,a.getTokens)(e),O=function(e,r){return new _.default(function(o,s){C.info("inside addToCartFunction of moveWishListItemToCart"+p);var u=c.default.moveToCartMapperJSON(r,n);C.info("messageBody: "+JSON.stringify(u));var d=(0,a.constructRequestWithToken)(p,"POST",u,e);(0,i.default)(d).then(function(e,r){var o=f.default.addToCartJSON(e,r);t.send({success:!0,result:o})}).catch(function(e){404===e.statusCode||400===e.statusCode?(C.error("errors in service to addToCartFunction in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(C.error("errors in service to addToCartFunction in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})})};(function(e){return new _.default(function(r,o){C.info("inside delete of moveWishListItemToCart"+l);var n=(0,a.constructRequestWithToken)(l,"DELETE","",e);(0,i.default)(n).then(function(){r(e)}).catch(function(e){404===e.statusCode||400===e.statusCode?(C.error("errors in service to deleteItemsFromWishList in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(C.error("errors in service to deleteItemsFromWishList in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})})})(T).then(function(e){return O(e,u)})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(5),n=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default={getWishListJSON:function(e,t){return n.default.makeConverter({wishListId:"GiftList.0.uniqueID",itemList:["GiftList.0.item",n.default.map({wishListItemId:"giftListItemID",partNumber:"partNumber",productId:"productId",quantity:"quantityRequested"})]})(e)},getWishListLists:function(e,t){return n.default.makeConverter({wishListList:["GiftList",n.default.map({wishListId:"uniqueID",wishListName:"descriptionName",itemList:["item",n.default.map({wishListItemId:"giftListItemID",partNumber:"partNumber",productId:"productId",quantity:"quantityRequested"})]})]})(e)},addToWishListRequestMapperJSON:function(e){var t={item:[{productId:e.productId,quantityRequested:e.quantityRequested}]};return JSON.parse(JSON.stringify(t))},moveToCartMapperJSON:function(e,t){var r={orderItem:[{productId:e,quantity:t}]};return JSON.parse(JSON.stringify(r))}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=o(n),a=r(44),u=o(a),i=s.default.Router();i.get("/getProductDetailsByIds",function(e,t){u.default.getProductDetailsByIds(e,t)}),i.get("/getProductDetailBySingleId",function(e,t){u.default.getProductDetailBySingleId(e,t)}),t.default=i},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),s=o(n),a=r(2),u=r(7),i=o(u),d=r(3),c=o(d),l=r(4),f=(o(l),(0,a.getLogger)());t.default={getProductDetailsByIds:function(e,t){var r=e.query.id,o="",n=!0,u=!1,d=void 0;try{for(var l,S=r[Symbol.iterator]();!(n=(l=S.next()).done);n=!0){o=o+"id="+l.value+"&"}}catch(e){u=!0,d=e}finally{try{!n&&S.return&&S.return()}finally{if(u)throw d}}var _=s.default.WCS_PRODUCT_DETAILS+s.default.WCS_STORE_ID+s.default.WCS_PRODUCT_BYIDS+o;f.info("getProductDetailsByIds URL : "+(0,a.constructUrl)(s.default.WCS_HOSTNAME,_,!1));var C=(0,a.constructUrl)(s.default.WCS_HOSTNAME,_,!1),p={},T=(0,a.constructRequestWithoutToken)(C,"GET",p);(0,c.default)(T).then(function(e){var o=e,n=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_INV_AVL+r;f.info("getInvAvl post form url : "+(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,n,!1));var u=(0,a.constructRequestWithoutToken)((0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,n,!1),"GET",p);(0,c.default)(u).then(function(e){var r=i.default.mapPdpJSON(o,e);t.send({success:!0,result:r})}).catch(function(e){e&&(f.error("errors in service to get product details By Ids in WCS: ",e),t.send({success:!1,error:e}))})}).catch(function(e){f.error("errors in service to get product details By Ids in WCS",e),t.send({success:!1,error:e})})},getProductDetailBySingleId:function(e,t){var r=e.query.id,o=s.default.WCS_PRODUCT_DETAILS+s.default.WCS_STORE_ID+s.default.WCS_PRODUCT_BY_SINGLE_ID+r,n=(0,a.constructUrl)(s.default.WCS_HOSTNAME,o,!1),u={},d=(0,a.constructRequestWithoutToken)(n,"GET",u);(0,c.default)(d).then(function(e){var r=i.default.mapProductDetailBySingleIdJSON(e);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode?(f.error("errors in service to getProductDetailBySingleId in WCS: ",e),t.send({success:!1,error:e.response.body})):(f.error("errors in service to getProductDetailBySingleId in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=o(n),a=r(46),u=o(a),i=s.default.Router();i.get("/getEspotDetails",function(e,t){u.default.espotDetails(e,t)}),t.default=i},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),s=o(n),a=r(2),u=r(3),i=o(u),d=r(4),c=(o(d),(0,a.getLogger)());t.default={espotDetails:function(e,t){var r=e.query.emsName;console.log("emsName::"+r);var o=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_ESPOT+r;c.info("EMSpot URL"+(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0));var n=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0),u=(0,a.constructRequestWithoutToken)(n,"GET","");(0,i.default)(u).then(function(e){var r=JSON.parse(e);t.send(r)}).catch(function(e){e&&(c.error("errors in service for espotURL in WCS: ",e),t.send({success:!1,error:e}))})}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=o(n),a=r(11),u=o(a),i=s.default.Router();i.post("/loginIdentityHandler",function(e,t){u.default.loginIdentityHandler(e,t)}),i.post("/guestIdentityHandler",function(e,t){console.log("guest handler"),u.default.guestIdentityHandler(e,t)}),i.delete("/logoutUser",function(e,t){console.log("logout handler"),u.default.logoutUser(e,t)}),t.default=i},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=o(n),a=r(49),u=o(a),i=s.default.Router();i.get("/getOrderHistory",function(e,t){u.default.getOrderHistory(e,t)}),i.get("/getOrderDetails",function(e,t){u.default.getOrderDetails(e,t)}),i.get("/getPersonalInformation",function(e,t){u.default.getPersonalInformation(e,t)}),i.get("/getAddressBook",function(e,t){u.default.getAddressBook(e,t)}),t.default=i},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),s=o(n),a=r(2),u=r(50),i=o(u),d=r(3),c=o(d),l=r(4),f=(o(l),(0,a.getLogger)());t.default={getOrderHistory:function(e,t){f.info("inside getOrderHistory");var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_ORDER+s.default.WCS_HISTORY,o=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0),n={};f.info("getOrderHistoryDetailsUrl: "+o);var u=(0,a.constructRequestWithToken)(o,"GET",n,(0,a.getTokens)(e));(0,c.default)(u).then(function(e){var r=i.default.orderHistoryJSON(e);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode||400===e.statusCode?(f.error("errors in service to getOrderHistory in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(f.error("errors in service to getOrderHistory in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},getOrderDetails:function(e,t){f.info("inside getOrderDetails");var r=e.query.orderId,o=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_ORDER+r,n=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0),u={};f.info("getOrderDetailsUrl: "+n);var i=(0,a.constructRequestWithToken)(n,"GET",u,(0,a.getTokens)(e));(0,c.default)(i).then(function(e){t.send({success:!0,result:e})}).catch(function(e){404===e.statusCode||400===e.statusCode?(f.error("errors in service to getOrderDetail in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(f.error("errors in service to getOrderDetail in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},getPersonalInformation:function(e,t){f.info("inside getPersonalInformation");var r=e.cookies.userId,o=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_PERSON+r+s.default.WCS_PROFILE_NAME,n=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0),u={};f.info("getPersonalInformationDetailsUrl: "+n);var d=(0,a.constructRequestWithToken)(n,"GET",u,(0,a.getTokens)(e));(0,c.default)(d).then(function(e){var r=i.default.personalInformationJSON(e);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode||400===e.statusCode?(f.error("errors in service to getPersonalInformation in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(f.error("errors in service to getPersonalInformation in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},getAddressBook:function(e,t){f.info("inside getAddressBook");var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_PERSON_AT_SELF,o=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0),n={};f.info("getAddressBookUrl: "+o);var u=(0,a.constructRequestWithToken)(o,"GET",n,(0,a.getTokens)(e));(0,c.default)(u).then(function(e){var r=i.default.addressBookJSON(e);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode||400===e.statusCode?(f.error("errors in service to getAddressBook in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(f.error("errors in service to getAddressBook in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(5),n=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default={orderHistoryJSON:function(e){return n.default.makeConverter({recordSetTotal:"recordSetTotal",resourceId:"resourceId",recordSetCount:"recordSetCount",recordSetComplete:"recordSetComplete",recordSetStartNumber:"recordSetStartNumber",Order:["Order",n.default.map({storeId:"storeUniqueID",totalSalesTaxCurrency:"totalSalesTaxCurrency",totalAdjustment:"totalAdjustment",totalShippingTax:"totalShippingTax",placedDate:"placedDate",resourceId:"resourceId",adjustment:["adjustment",n.default.map({amount:"amount",displayLevel:"displayLevel",usage:"usage",code:"code",currency:"currency"})],totalProductPrice:"totalProductPrice",grandTotalCurrency:"grandTotalCurrency",orderId:"orderId",totalShippingTaxCurrency:"totalShippingTaxCurrency",totalShippingCharge:"totalShippingCharge",totalShippingChargeCurrency:"totalShippingChargeCurrency",grandTotal:"grandTotal",orderStatus:"orderStatus",totalSalesTax:"totalSalesTax",totalProductPriceCurrency:"totalProductPriceCurrency",totalAdjustmentCurrency:"totalAdjustmentCurrency"})]})(e)},personalInformationJSON:function(e){return n.default.makeConverter({address:{addressId:"address.addressId",addressLine1:"address.address1",addressLine2:"address.address2",addressType:"address.addressType",city:"address.city",country:"address.country",email1:"address.email1",mobilePhone1Country:"address.mobilePhone1Country",phone1:"address.phone1",state:"address.state",zipCode:"address.zipCode"},userInfo:{demographics:{age:"demographics.age",dateOfBirth:"demographics.dateOfBirth",gender:"demographics.gender"},firstName:"address.firstName",lastName:"address.lastName",logonId:"logonId",middleName:"address.middleName",nickName:"address.nickName",personTitle:"personTitle",userId:"userId"}})(e)},addressBookJSON:function(e){return n.default.makeConverter({resourceId:"resourceId",defaultAddress:{firstName:"firstName",lastName:"lastName",nickName:"nickName",email1:"email1",phone1:"phone1",addressType:"addressType",addressId:"addressId",addressLine:{addressLine1:"addressLine.0",addressLine2:"addressLine.1"},zipCode:"zipCode",city:"city",state:"state",country:"country",primary:"primary"},addressList:["contact",n.default.map({firstName:"firstName",lastName:"lastName",nickName:"nickName",email1:"email1",phone1:"phone1",addressType:"addressType",addressId:"addressId",addressLine:{addressLine1:"addressLine.0",addressLine2:"addressLine.1"},zipCode:"zipCode",city:"city",state:"state",country:"country",primary:"primary"})]})(e)}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=o(n),a=r(52),u=o(a),i=s.default.Router();i.post("/user",function(e,t){u.default.registration(e,t)}),t.default=i},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),s=o(n),a=r(2),u=r(8),i=(o(u),r(3)),d=o(i),c=r(4),l=(o(c),(0,a.getLogger)());t.default={registration:function(e,t){var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_REGISTRATION;l.info("Registration URL"+(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0));var o=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0),n=e.body,u=(0,a.constructRequestWithoutToken)(o,"POST",n);(0,d.default)(u).then(function(e){l.info("userId after registration"+e.userId),t.cookie(s.default.WCS_ACCESS_TOKEN,e.WCToken),t.cookie(s.default.WCS_TRUSTED_ACCESS_TOKEN,e.WCTrustedToken),t.cookie(s.default.WCS_PERSONALIZATION_ID,e.personalizationID),t.cookie(s.default.WCS_USER_ID,e.userId),t.send({success:!0})}).catch(function(e){e&&(l.error("errors in service for Registration in WCS: ",e),t.send({success:!1,error:e}))})}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=o(n),a=r(54),u=o(a),i=s.default.Router();i.put("/resetPassword",function(e,t){u.default.resetPassword(e,t)}),t.default=i},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),s=o(n),a=r(2),u=r(3),i=o(u),d=(0,a.getLogger)();t.default={resetPassword:function(e,t){var r=e.body.logonId,o=e.body.logonPassword,n=e.body.logonPasswordVerify,u={logonId:r,logonPassword:o,logonPasswordVerify:n},c=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_PERSON+s.default.WCS_AT_SELF+"?action="+s.default.WCS_UPDATE_USER_REGISTRATOIN,l=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,c,!0);d.info("resetPasswordURL  = "+l);var f=(0,a.constructRequestWithToken)(l,"PUT",u,(0,a.getTokens)(e));(0,i.default)(f).then(function(e){t.send({success:!0,result:e})}).catch(function(e){404===e.statusCode?(d.error("errors in service to resetPassword in WCS: ",e),t.send({success:!1,error:e.response.body})):(d.error("errors in service to resetPassword in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=o(n),a=r(12),u=o(a),i=s.default.Router();i.get("/getPaymentInstruction",function(e,t){u.default.getPaymentInstruction(e,t)}),i.post("/createPaymentInstruction",function(e,t){u.default.createPaymentInstruction(e,t)}),i.put("/putPaymentInstruction",function(e,t){u.default.putPaymentInstruction(e,t)}),i.post("/deletePaymentInstruction",function(e,t){u.default.deletePaymentInstruction(e,t)}),t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(5),n=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default={mapPaymentInstrutionJSON:function(e,t){for(var r=t.totalPaymentDataArray,o=n.default.makeConverter({orderId:"orderId",paymentInstruction:["paymentInstruction",n.default.map({firstName:"firstName",lastName:"lastName",middleName:"middleName",email1:"email1",addressId:"billing_address_id",addressLine:"addressLine",city:"city",state:"state",country:"country",postalCode:"postalCode",payMethodId:"payMethodId",piAmount:"piAmount",piCurrency:"piCurrency",piDescription:"piDescription",piId:"piId"})]}),s=o(e),a=s,u=0;u<r.length;u++){var i=r[u];a.paymentInstruction[u].paymentData=i}return a}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=o(n),a=r(6),u=o(a),i=s.default.Router();i.get("/seoKeyword",function(e,t){u.default.getSEOKeyword(e,t)}),i.get("/seoDetails",function(e,t){u.default.getSEODetails(e,t)}),t.default=i},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=o(n),a=r(59),u=o(a),i=s.default.Router();i.get("/layout",function(e,t){u.default.getLayoutDetails(e,t)}),i.post("/espot",function(e,t){u.default.getEspotDetails(e,t)}),t.default=i},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),s=o(n),a=r(6),u=o(a),i=r(2),d=r(3),c=o(d),l=r(4),f=(o(l),(0,i.getLogger)());t.default={getLayoutDetails:function(e,t){var r=e.query.objectId,o=e.query.device,n=e.query.pageGroup,a="CategoryToken";"Category"==n?a="CategoryToken":"Product"==n&&(a="ProductToken"),console.log("objectId::"+r),u.default.getIdByKeyword(r,a).then(function(e){console.log("value:::"+e);var r="";"Category"==n?r="&categoryId="+e:"Product"==n&&(r="&productId="+e);var a=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_LAYOUT+"&objectIdentifier="+e+"&deviceClass="+o+"&pageGroup="+n+r;f.info("Layout URL"+(0,i.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,a,!0));var u=(0,i.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,a,!0),d=(0,i.constructRequestWithoutToken)(u,"GET","");(0,c.default)(d).then(function(e){var r=JSON.parse(e);t.send(r)}).catch(function(e){e&&(f.error("errors in service for layoutUrl in WCS: ",e),t.send({success:!1,error:e}))})})},getEspotDetails:function(e,t){var r=e.body.emsName,o=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_ESPOT+r;f.info("espot URL"+(0,i.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0));var n=(0,i.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,o,!0),a=(0,i.constructRequestWithoutToken)(n,"GET","");(0,c.default)(a).then(function(e){var r=JSON.parse(e);t.send(r)}).catch(function(e){e&&(f.error("errors in service for espotUrl in WCS: ",e),t.send({success:!1,error:e}))})}}},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=o(n),a=r(61),u=o(a),i=s.default.Router();i.get("/getProductDetails",function(e,t){u.default.getProductDetails(e,t)}),i.get("/getcartDetails",function(e,t){u.default.getCartDetails(e,t)}),i.post("/addToCart",function(e,t){u.default.addToCart(e,t)}),i.post("/checkout",function(e,t){u.default.submitOrder(e,t)}),t.default=i},function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),s=o(n),a=r(2),u=r(7),i=o(u),d=r(3),c=o(d),l=r(4),f=o(l),S=r(6),_=o(S),C=r(12),p=o(C),T=(0,a.getLogger)();t.default={getProductDetails:function(e,t){var r=e.query.productId,o=e.query.resourceName,n=void 0,u=void 0;T.info("getProductDetails product KeyWord:"+r),_.default.getIdByKeyword(r,"ProductToken").then(function(e){u=e;var r=s.default.WCS_PRODUCT_DETAILS+s.default.WCS_STORE_ID+s.default.WCS_PRODUCT_DETAILS_APPEND+u+"?catalogId="+s.default.WCS_CATALOG_ID+"&langId="+s.default.WCS_LANG_ID,d=(0,a.constructUrl)(s.default.WCS_HOSTNAME,r,!1);T.info("getProductDetails url:"+d);var l=(0,a.constructRequestWithoutToken)(d,"GET","");(0,c.default)(l).then(function(e){return S(e)}).catch(function(e){404===e.statusCode||500===e.statusCode?(T.error("error in service to getProductDetails in WCS: ",e),t.send({success:!1,error:e.response.body})):(T.error("errors in service to getProductDetails in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))});var S=function(e){return new f.default(function(r,d){(0,a.isJson)(e)&&(e=JSON.parse(e));var l=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_INV_AVL+u,f=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,l,!1),S=(0,a.constructRequestWithoutToken)(f,"GET","");T.info("request call = "+JSON.stringify(S)),"ProductBean"==e.catalogEntryView[0].catalogEntryTypeCode?("pdp"==o?n=i.default.mapPdpJSON(e,!0):"qv"==o||"cart"==o?n=i.default.mapQuickViewJSON(e,!0):"relatedProducts"==o&&(n=i.default.mapRelatedProductsJSON(e,!0)),t.send({success:!0,result:n})):(0,c.default)(S).then(function(r){(0,a.isJson)(r)&&(r=JSON.parse(r)),"pdp"==o?n=i.default.mapPdpJSON(e,r):"qv"!=o&&"cart"!=o||(n=i.default.mapQuickViewJSON(e,r)),t.send({success:!0,result:n})}).catch(function(e){404===e.statusCode||500===e.statusCode?(T.error("error in service to getProductDetails in WCS: ",e),t.send({success:!1,error:e.response.body})):(T.error("errors in service to getProductDetails in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})})}})},addToCart:function(e,t){T.info("inside add to cart");var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_CART_EXT+"?catalogId="+s.default.WCS_CATALOG_ID+"&langId="+s.default.WCS_LANG_ID,o=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0),n=e.body;T.info("addToCartUrl:"+o+"messageData: "+JSON.stringify(n));var u=(0,a.constructRequestWithToken)(o,"POST",n,(0,a.getTokens)(e));console.log("request call = ",u),(0,c.default)(u).then(function(e){console.log("add to cart success = ",e),t.send({success:!0,result:e})}).catch(function(e){console.log("add to cart error = ",e),t.send({success:!1,result:e})})},getCartDetails:function(e,t){var r=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_CART_AT_SELF;T.info("ShoppingCart URL"+(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0));var o=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,r,!0),n={},u=(0,a.constructRequestWithToken)(o,"GET",n,(0,a.getTokens)(e));(0,c.default)(u).then(function(e){t.send({success:!0,result:e})}).catch(function(e){t.send({success:!1,result:e})})},submitOrder:function(e,t){var r=function(){return new f.default(function(e,r){var o=(0,a.constructRequestWithToken)("https://54.200.124.128/wcs/resources/store/10151/cart/@self/precheckout","PUT","","");T.info("inside preCheckOut of submitOrder"+o),(0,c.default)(o).then(function(t){console.log("precheckout ",t),e(t)}).catch(function(e){404===e.statusCode||400===e.statusCode?(T.error("errors in service to preCheckOut of submitOrder in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(T.error("errors in service to preCheckOut of submitOrder in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})})},o=function(e){return new f.default(function(e,r){var o=(0,a.constructRequestWithToken)("https://54.200.124.128/wcs/resources/store/10151/cart/@self/checkout","POST","","");(0,c.default)(o).then(function(e){return console.log("checked out = ",e),n(e,!0)}).catch(function(e){404===e.statusCode||400===e.statusCode?(T.error("errors in service to checkOut of submitOrder in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(T.error("errors in service to checkOut of submitOrder in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})})},n=function(e,r){return new f.default(function(o,n){var u=s.default.WCS_REST_URL+s.default.WCS_STORE_ID+s.default.WCS_ORDER+JSON.parse(e).orderId,i=(0,a.constructUrl)(s.default.WCS_HOSTNAME_NOPORT,u,!0);T.info("inside getOrderConfirmationDetails of submitOrder: "+i);var d={},l=(0,a.constructRequestWithToken)(i,"GET",d,"");(0,c.default)(l).then(function(e){r?t.send({success:!0,result:e}):o(e)}).catch(function(e){404===e.statusCode||400===e.statusCode?t.send({success:!1,error:e.response.body}):t.send({success:!1,error:e.response.body.errors[0]})})})};r().then(function(e){console.log("precheckout = ",e),n(e,!1).then(function(e){console.log("get order conf = ",e);var t={account:"4012888888881881",billing_address_id:"18624",cc_brand:"VISA",cc_cvc:"121",expire_month:"11",expire_year:"2019",payMethodId:"VISA",piAmount:e.grandTotal};p.default.createPaymentInstruction(t).then(function(e){console.log("pi id = ",e),r().then(function(e){return o()})})})})}}},function(e,t){e.exports=require("cookie-parser")}]);