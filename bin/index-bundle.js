!function(e){function t(s){if(r[s])return r[s].exports;var o=r[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,s){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:s})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=16)}([function(e,t){e.exports=require("express")},function(e,t){e.exports=require("request-promise")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(19),o=function(e){return e&&e.__esModule?e:{default:e}}(s),n=o.default.EP_STORE;t.default={EP_HOSTNAME:o.default.EP_HOSTNAME,EP_HOSTNAME_CORTEX:o.default.EP_HOSTNAME_CORTEX,EP_STORE:n,EP_LOG_DIR:"log/elasticPath/trace.log",EP_COOKIE_NAME:"access_token",EP_USER_NAME:"&username=",EP_PASSWORD:"&password=",EP_GUEST_LOGIN:"/cortex/oauth2/tokens?grant_type=password&role=PUBLIC&scope="+n,EP_LOGIN:"/cortex/oauth2/tokens?grant_type=password&role=REGISTERED&scope="+n,EP_LOGOUT:"/cortex/oauth2/tokens",EP_REGISTER:"/cortex/registrations/"+n+"/newaccount/form?followlocation",EP_TOP_CATEGORIES:"/cortex/navigations/"+n+"?zoom=element",EP_PRODUCTS_FROM_CATEGORIES_NAV:"/searches/"+n+"/navigations/items/",EP_SEARCH:"/cortex/searches/"+n+"/keywords/items?followlocation",EP_ADD_SHIPPING_ADDRESS:"/cortex/addresses/"+n+"?followlocation",EP_DEFAULT_CART:"/cortex/carts/"+n+"/default",EP_DEFAULT_PROFILE:"/profiles/"+n+"/default",EP_SHOPPING_CART:"/carts/"+n+"/default",EP_CART:"/carts/"+n+"/default",EP_CURRENT_ORDER:"/orders/"+n+"/g5qwknzvgq4wkljqgfrtaljuga4dgllbmqytcljqmjstsntbg5rtqojsgq=",EP_WHISHLIST_URL:"/wishlists/"+n+"/default",EP_APPLY_PROMO:"/coupons",EP_ADDRESS_BOOK:"/cortex/addresses/"+n,EP_PURCHASES:"/purchases",EP_GET_BILLING_ADDRESS_SELECTOR:"/billingaddressinfo/selector",EP_FOLLOW_LOCATION:"?followlocation",EP_WHISHLIST:"/wishlists",HTML_DIR:"WebContent/html/",EP_FORM:"/form",EP_CARTS:"/carts",EP_AWS_IMAGE_PATH:"http://s3.ap-south-1.amazonaws.com/sirius-ep-images/",EP_IMAGE_FMT:".jpg",EP_SUB_CATEGORIES_ZOOM:"?zoom=child",EP_SEARCH_ZOOM:"?zoom=element:availability,element:code,element:definition,element:price",EP_PDP_ZOOM:"?zoom=availability,code,price,definition,definition:options:element:selector:choice:description,definition:options:element:selector:chosen:description,recommendations:crosssell:element:availability,recommendations:crosssell:element:code,recommendations:crosssell:element:definition,recommendations:crosssell:element:price",EP_SHOPPING_CART_ZOOM:"?zoom=discount,lineitems,lineitems:element,lineitems:element:availability,lineitems:element:item:code,lineitems:element:price,lineitems:element:total,order:tax,order:total,total,appliedpromotions:element",EP_GET_BILLING_ADDRESS_ZOOM:"/billingaddressinfo?zoom=selector:choice:description,selector:chosen:description",EP_GET_SHIPPING_ADDRESS_ZOOM:"/deliveries?zoom=element:destinationinfo:selector:chosen:description,element:destinationinfo:selector:choice:description",EP_SHIPMODE_ZOOM:"?zoom=order:deliveries:element:shippingoptioninfo:selector:choice:description,order:deliveries:element:shippingoptioninfo:selector:chosen:description",EP_GET_SHIPPING_ADDRESS_SELECTOR_ZOOM:"/deliveries?zoom=element:destinationinfo:selector",EP_WHISHLIST_CART_ZOOM:"?zoom=lineitems:element,lineitems:element:item:code",EP_GET_COUPON_PROMO_ZOOM:"?zoom=order:couponinfo:coupon,order:couponinfo:coupon:appliedpromotions:element",EP_GET_PROMO_ZOOM:"?zoom=appliedpromotions:element",EP_ADDRESS_BOOK_ZOOM:"?zoom=element",EP_GET_PERSONAL_INFO_ZOOM:"?zoom=addresses:billingaddresses:default,emails:element",EP_GET_ORDER_HISTORY_ZOOM:"?zoom=purchases:element,purchases:element:appliedpromotions:element,purchases:element:discount,purchases:element:lineitems:element:list:element",EP_GET_ORDER_REVIEW:"?zoom=cart:appliedpromotions:element,cart:discount,cart:lineitems,cart:lineitems:element,cart:lineitems:element:item:code,cart:lineitems:element:price,cart:lineitems:element:total,cart:total,deliveries:element:destinationinfo:selector:chosen:description,deliveries:element:shippingoptioninfo:selector:chosen:description,paymentmethodinfo:paymentmethod,tax,total",EP_PURCHASE_ZOOM:"?zoom=billingaddress,discount,lineitems,lineitems:element,paymentmeans:element,shipments:element:destination,shipments:element:shippingoption,shipments:element:tax",EP_PRODUCT_ADDED:"Product Added Successfully",EP_ADDRESS_ADDED:"Address Added Successfully",EP_ADDRESS_DELETED:"Address Deleted Successfully",EP_ADDRESS_UPDATED:"Address Updated Successfully",EP_ADDRESS_SELECTED:"Address Selected Successfully",EP_SHIPMODE_SELECTED:"Ship mode updated successfully",EP_TOKEN_EXPIRATION_TIME:o.default.EP_TOKEN_EXPIRATION_TIME}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={WCS_HOSTNAME:"54.200.124.128",WCS_HOSTNAME_NOPORT:"54.200.124.128",WCS_AWS_IMAGE_PATH:"http://s3.ap-south-1.amazonaws.com/sirius-ep-images/",WCS_IMAGE_FMT:".jpg",WCS_PRODUCT_DETAILS:"/search/resources/store/",WCS_PRODUCT_DETAILS_APPEND:"/productview/byId/",WCS_CATEGORY_TOP:"/categoryview/@top",WCS_CATEGORY:"/categoryview/byId/",WCS_SUB_CATEGORY:"/categoryview/byParentCategory/",WCS_CATEGORY_DETAILS_APPEND:"/productview/byCategory/",WCS_REST_URL:"/wcs/resources/store/",WCS_GUEST_IDENTITY:"/guestidentity",WCS_LOGIN_IDENTITY:"/loginidentity",WCS_KEYWORD_SUGGESTION:"/sitecontent/keywordSuggestionsByTerm/",WCS_STORE_ID:"10151",WCS_CATALOG_ID:"10052",WCS_CART:"/cart/",WCS_CART_EXT:"/cart",WCS_DEFAULT:"/@default",WCS_WISHLIST:"/wishlist",WCS_WISHLIST_DELETE:"/wishlist/",WCS_LANG_ID:"-1",WCS_SHIPMODES_APPEND:"/cart/shipping_modes",WCS_INV_AVL:"/inventoryavailability/",WCS_UPDATE_SHIP_INFO:"/cart/@self/shipping_info",WCS_LOG_DIR:"log/wcs/trace.log",HTML_DIR:"WebContent/html/",WCS_PRODUCT_SEARCH_BY_KEYWORD:"/productview/bySearchTerm/",WCS_ADDRESS_DETAILS:"/person/@self/contact",WCS_CHECKOUT_PROFILE:"/person/@self/checkoutProfile",WCS_PRODUCT_ADDED:"Product Added Successfully",SLASH:"/",SHIP_CALC_USAGE:"-1,-2,-3,-4,-5,-6,-7",WCS_SHIP_INFO:"/cart/@self/shipping_info",MONGO_DB_URL:"mongodb://admin:passw0rd@ds121716.mlab.com:21716/projectc",MONGO_DB_COLLECTION_USERS:"users",WCS_GET_SHOPPINGCART:"/@self",WCS_AT_SELF:"/@self",WCS_UPDATE_CART:"/update_order_item",WCS_DELETE_CART:"/delete_order_item",WCS_UPDATECART_CALC_USAGE:"-1,-2,-3,-4,-5,-6,-7",WCS_UPDATECART_CALC_ORDER:"1",WCS_CART_AT_SELF:"/cart/@self",WCS_CART_PROMOTIONS:"/cart/@self/assigned_promotion_code",WCS_ITEM:"item",WCS_PRODUCT_BYIDS:"/productview/byIds?",WCS_PRODUCT_BY_SINGLE_ID:"/productview/byId/",WCS_CART_PRECHECKOUT:"/precheckout",WCS_CART_CHECKOUT:"/checkout",WCS_ORDER:"/order/",WCS_HISTORY:"@history",WCS_PERSON:"/person/",WCS_PROFILE_NAME:"?profileName=IBM_User_Registration_Details",WCS_ACCESS_TOKEN:"access_token",WCS_TRUSTED_ACCESS_TOKEN:"WCTrustedToken",WCS_USER_ID:"userId",WCS_PERSONALIZATION_ID:"personalizationID",WCS_TOKEN_EXPIRATION_TIME:"1800000",WCS_REGISTRATION:"/person?mode=self",WCS_PERSON_AT_SELF:"/person/@self",WCS_ESPOT_RECENTLY_VIEWED_PRODUCTD:"/espot/RecViewed_CatEntries",WCS_PAYMENT_INSTRUCTION_MASKED:"/payment_instruction/sensitive_data_mask_by_plain_string",WCS_PAYMENT_INSTRUCTION:"/payment_instruction",HTTP_URI_CONSTANT:"http:",WCS_SEO:"/seo/seoKeyword",WCS_LAYOUT:"/page_design?q=byObjectIdentifier",WCS_ESPOT:"/espot/",WCS_COOKIE_DOMAIN:".herokuapp.com",WCS_ADDRESS_ADDED:"Address Added Successfully",WCS_ADDRESS_DELETED:"Address Deleted Successfully",WCS_ADDRESS_UPDATED:"Address Updated Successfully",WCS_ADDRESS_SELECTED:"Address Selected Successfully",WCS_SHIPMODE_SELECTED:"Ship mode updated successfully",WCS_AUTH_TOKEN:"12022%2C16Y0w9HO0rAvYKi42p4R3in9WzOQPJ2r8TMIejt6MF%2B4Skkt9f%2F%2FKf71IjRZHCf2cYp2UYzx2i3BGMwV9r5PzWAX5FGAZDsQhAErIsRZEEqWwLMXy6h6ethm5ngU0ijtNQaniaD%2FTOlllsVOreE4PYegQVzOkaXtACIhtQWUZr2RbaMC80nqEG6ORDp6CfKqua3wmqRUbHyqdRhmceBeMDfCs3OziIpsrO7tKefTyJQ%3D",WCS_TRUSTED_TOKEN:"12022%2CR97hA7x3qfhBXYmRxOYjCaldMf8A9E2b%2BeLYoYpCneY%3D",WCS_DOUBLE_SLASH:"//",DB_URL:"mongodb://HeadStart:Headless1@ds125628.mlab.com:25628/headstartdb"}},function(e,t){e.exports=require("json-mapper")},function(e,t,r){"use strict";var s=r(3),o=function(e){return e&&e.__esModule?e:{default:e}}(s);r(14);e.exports={constructUrl:function(e,t,r){return r?"https://"+e+t:"http://"+e+t},sendErrorMessage:function(e,t){console.log("ERROR LOGGED: ",t);var r={error:!0,errorMessage:t};e.send(r)},getLogger:function(){var e=r(11);return new e.Logger({transports:[new e.transports.Console,new e.transports.File({filename:o.default.WCS_LOG_DIR})]})},constructRequest:function(e,t,r){return{url:e,method:t,json:r,headers:{"Content-Type":"application/json",WCToken:o.default.WCS_AUTH_TOKEN,WCTrustedToken:o.default.WCS_TRUSTED_TOKEN}}},constructRequestWithToken:function(e,t,r,s){return{url:e,method:t,json:r,headers:{"Content-Type":"application/json",WCToken:s.WCToken,WCTrustedToken:s.WCTrustedToken}}},constructRequestWithoutToken:function(e,t,r){return{url:e,method:t,json:r,headers:{"Content-Type":"application/json"}}},getTokens:function(e){return{WCToken:e.cookies.access_token,WCTrustedToken:e.cookies.WCTrustedToken}},isJson:function(e){try{JSON.parse(e)}catch(e){return!1}return!0},requiredProtocolData:function(e){var t=["account","cc_cvc","expire_month","cc_brand","payment_method","expire_year"],r={totalPaymentDataArray:[]};return e.paymentInstruction.filter(function(e){var s=e.protocolData,o=s.filter(function(e){if(t.indexOf(e.name)>-1)return e});r.totalPaymentDataArray.push(o)}),r}}},function(e,t,r){"use strict";e.exports={constructUrl:function(e,t,r){return r?e.startsWith("https://")?e+t:"https://"+e+t:e.startsWith("http://")?e+t:"http://"+e+t},sendErrorMessage:function(e,t){console.log("ERROR LOGGED: ",t);var r={error:!0,errorMessage:t};e.send(r)},getLogger:function(){var e=r(11);return new e.Logger({transports:[new e.transports.Console,new e.transports.File({filename:"trace.log"})]})},constructRequest:function(e,t,r,s){return{uri:e,method:t,json:r,headers:{"Content-Type":"application/json",Authorization:"bearer "+s}}},constructRequestForLogin:function(e,t,r,s){return void 0==s&&(s=""),{uri:e,method:t,json:r,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"bearer "+s}}},constructRequestWithoutToken:function(e,t,r){return{uri:e,method:t,json:r,headers:{"Content-Type":"application/x-www-form-urlencoded"}}}}},function(e,t){e.exports=require("bluebird")},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var o=r(1),n=s(o),i=r(2),a=s(i),d=r(6),u=(0,d.getLogger)();e.exports={checkAndGetAuthToken:function(e,t,r){var s=e.cookies.access_token;if(void 0!=s)return r(s);var o={},i=(0,d.constructUrl)(a.default.EP_HOSTNAME,a.default.EP_GUEST_LOGIN,!1);u.info("guestLoginURL: ",i);var c=(0,d.constructRequestWithoutToken)(i,"POST",o);(0,n.default)(c).then(function(e){return t.cookie(a.default.EP_COOKIE_NAME,e.access_token,{httpOnly:!1}),r(e.access_token)})},loginIdentityHandler:function(e,t){var r=e.cookies.access_token,s={},o=e.body.logonId,i=e.body.logonPassword,c=a.default.EP_LOGIN+a.default.EP_USER_NAME+o+a.default.EP_PASSWORD+i,l=(0,d.constructUrl)(a.default.EP_HOSTNAME,c,!1);u.info("logon url: ",l);var f=(0,d.constructRequestForLogin)(l,"POST",s,r);(0,n.default)(f).then(function(e){t.cookie(a.default.EP_COOKIE_NAME,e.access_token,{httpOnly:!1}),t.send({success:!0})}).catch(function(e){e.response.body?(u.error("errors in service to logon in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(u.error("errors in service to logon in EP: ",e),t.send({success:!1,error:e}))})},logout:function(e,t){var r={},s=(0,d.constructUrl)(a.default.EP_HOSTNAME,a.default.EP_LOGOUT,!1);u.info("logout url: ",s);var o=(0,d.constructRequestWithoutToken)(s,"DELETE",r);(0,n.default)(o).then(function(e){t.clearCookie(a.default.EP_COOKIE_NAME,{path:"/"}),t.send({success:!0})}).catch(function(e){e.response.body?(u.error("errors in service to logout in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(u.error("errors in service to logout in EP: ",e),t.send({success:!1,error:e}))})}}},function(e,t){e.exports=require("body-parser")},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),n=s(o),i=r(4),a=s(i);t.default={addToCartJSON:function(e){return a.default.makeConverter({orderItem:["orderItem",a.default.map({orderItemId:"orderItemId"})],orderId:"orderId",addToCartMsg:n.default.WCS_PRODUCT_ADDED})(e)},mapShoppingCartJSON:function(e){return a.default.makeConverter({adjustments:["adjustment",a.default.map({code:"code",currency:"currency",description:"description",displayLevel:"displayLevel"})],grandTotal:"grandTotal",grandTotalCurrency:"grandTotalCurrency",orderId:"orderId",cartLineItemId:a.default.helpers.def(""),orderItem:["orderItem",a.default.map({currency:"currency",freeGift:"freeGift",orderItemId:"orderItemId",orderItemInventoryStatus:"orderItemInventoryStatus",orderItemPrice:"orderItemPrice",partNumber:"partNumber",productId:"productId",quantity:"quantity",salesTax:"salesTax",salesTaxCurrency:"salesTaxCurrency",shippingCharge:"shippingCharge",shippingChargeCurrency:"shippingChargeCurrency",shippingTax:"shippingTax",unitPrice:"unitPrice",unitQuantity:"unitQuantity",usableShippingChargePolicy:"usableShippingChargePolicy"})],orderStatus:"orderStatus",recordSetCount:"recordSetCount",recordSetStartNumber:"recordSetStartNumber",recordSetTotal:"recordSetTotal",resourceId:"resourceId",resourceName:"resourceName",shipAsComplete:"shipAsComplete",storeNameIdentifier:"storeNameIdentifier",storeUniqueID:"storeUniqueID",totalAdjustment:"totalAdjustment",totalAdjustmentCurrency:"totalAdjustmentCurrency",totalProductPrice:"totalProductPrice",totalProductPriceCurrency:"totalProductPriceCurrency",totalSalesTax:"totalSalesTax",totalSalesTaxCurrency:"totalSalesTaxCurrency",totalShippingCharge:"totalShippingCharge",totalShippingChargeCurrency:"totalShippingChargeCurrency",totalShippingTax:"totalShippingTax",totalShippingTaxCurrency:"totalShippingTaxCurrency"})(e)},mapUpdateCartRequestJSON:function(e){return a.default.makeConverter({orderItem:["lineItem",a.default.map({orderItemId:"lineItemId",quantity:"quantity"})],x_calculateOrder:a.default.helpers.def(n.default.WCS_UPDATECART_CALC_ORDER),x_calculationUsage:a.default.helpers.def(n.default.WCS_UPDATECART_CALC_USAGE)})(e)},mapUpdateCartResponseJSON:function(e){return a.default.makeConverter({orderId:"orderId",lineItem:["orderItem",a.default.map({lineItemId:"orderItemId"})]})(e)},mapDeleteCartRequestJSON:function(e){return a.default.makeConverter({orderItemId:"lineItem.0.lineItemId"})(e)},mapDeleteCartResponseJSON:function(e){return a.default.makeConverter({orderId:["orderId",function(e){return e[0]}]})(e)},mapDeleteAllCartJSON:function(e){return a.default.makeConverter({message:a.default.helpers.def("All Cart Items are Deleted Successfully")})(e)},mapOrderConfirmationResponseJSON:function(e,t){for(var r=t.totalPaymentDataArray,s=a.default.makeConverter({adjustment:["adjustment",a.default.map({code:"code",currency:"currency",description:"description",displayLevel:"displayLevel",usage:"usage"})],grandTotal:"grandTotal",grandTotalCurrency:"grandTotalCurrency",locked:"locked",orderId:"orderId",lineItem:["orderItem",a.default.map({adjustment:["adjustment",a.default.map({code:"code",currency:"currency",description:"description",usage:"usage"})],currency:"currency",freeGift:"freeGift",lineItemId:"orderItemId",lineItemPrice:"orderItemPrice",adjustedPrice:function(e){return Number(e.orderItemPrice)+Number(e.totalAdjustment.value)},partNumber:"partNumber",productId:"productId",quantity:"quantity",unitPrice:"unitPrice",unitQuantity:"unitQuantity"})],shipping:{firstName:"orderItem.0.firstName",lastName:"orderItem.0.lastName",middleName:"orderItem.0.middleName",email1:"orderItem.0.email1",addressId:"orderItem.0.addressId",addressLine:"orderItem.0.addressLine",city:"orderItem.0.city",state:"orderItem.0.state",country:"orderItem.0.country",postalCode:"orderItem.0.postalCode",carrier:"orderItem.0.carrier",expectedShipDate:"orderItem.0.expectedShipDate",shipModeCode:"orderItem.0.shipModeCode",shipModeDescription:"orderItem.0.shipModeDescription",shipModeId:"orderItem.0.shipModeId"},paymentInstruction:["paymentInstruction",a.default.map({firstName:"firstName",lastName:"lastName",middleName:"middleName",email1:"email1",addressId:"billing_address_id",addressLine:"addressLine",city:"city",state:"state",country:"country",postalCode:"postalCode",payMethodId:"payMethodId",piId:"piId",piAmount:"piAmount",piCurrency:"piCurrency",piDescription:"piDescription"})],placedDate:"placedDate",recordSetComplete:"recordSetComplete",recordSetCount:"recordSetCount",recordSetStartNumber:"recordSetStartNumber",recordSetTotal:"recordSetTotal",resourceId:"resourceId",totalAdjustment:"totalAdjustment",totalAdjustmentCurrency:"totalAdjustmentCurrency",totalProductPrice:"totalProductPrice",totalProductPriceCurrency:"totalProductPriceCurrency",totalSalesTax:"totalSalesTax",totalSalesTaxCurrency:"totalSalesTaxCurrency",totalShippingCharge:"totalShippingCharge",totalShippingChargeCurrency:"totalShippingChargeCurrency",totalShippingTax:"totalShippingTax",totalShippingTaxCurrency:"totalShippingTaxCurrency"}),o=s(e),n=o,i=0;i<r.length;i++){var d=r[i];n.paymentInstruction[i].paymentData=d}return n},mapOrderPaymentSummaryJSON:function(e){return a.default.makeConverter({shipAsComplete:"shipAsComplete",storeUniqueID:"storeUniqueID",totalAdjustment:"totalAdjustment",totalAdjustmentCurrency:"totalAdjustmentCurrency",totalProductPrice:"totalProductPrice",totalProductPriceCurrency:"totalProductPriceCurrency",totalSalesTax:"totalSalesTax",totalSalesTaxCurrency:"totalSalesTaxCurrency",totalShippingCharge:"totalShippingCharge",totalShippingChargeCurrency:"totalShippingChargeCurrency",totalShippingTax:"totalShippingTax",totalShippingTaxCurrency:"totalShippingTaxCurrency"})(e)}}},function(e,t){e.exports=require("winston")},function(e,t){e.exports=require("underscore")},function(e,t){e.exports=require("request")},function(e,t){e.exports=require("mongodb")},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(4),n=s(o),i=r(3),a=s(i);t.default={mapPdpJSON:function(e,t){var r=n.default.makeConverter({catalogEntryView:["catalogEntryView",n.default.map({hasSingleSKU:function(e){if(1==t)return e.hasSingleSKU},uniqueId:"uniqueID",parentCatalogGroupID:"parentCatalogGroupID",catalogEntryTypeCode:"catalogEntryTypeCode",buyable:"buyable",store:"storeID",listPrice:"price.0.value",purchasePrice:"price.1.value",code:"partNumber",resourceId:"resourceId",displayName:"name",attributes:["attributes",n.default.map({displayable:"displayable",name:"name",identifier:"identifier",values:["values",n.default.map({identifier:"identifier",uniqueID:"uniqueID",image:["image1path",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}]})]})],merchandisingAssociations:["merchandisingAssociations",n.default.map({hasSingleSKU:"hasSingleSKU",catalogEntryTypeCode:"catalogEntryTypeCode",buyable:"buyable",store:"storeID",uniqueID:"uniqueID",listPrice:"price.0.value",purchasePrice:"price.1.value",code:"partNumber",resourceId:"resourceId",displayName:"name",attributes:["attributes",n.default.map({displayable:"displayable",name:"name",identifier:"identifier",values:["values",n.default.map({identifier:"identifier",uniqueID:"uniqueID",image:["image1path",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}]})]})],thumbnail:["thumbnail",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}],fullImage:["fullImage",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}]})],skus:["sKUs",n.default.map({skuId:"uniqueID",hasSingleSKU:"hasSingleSKU",catalogEntryTypeCode:"catalogEntryTypeCode",buyable:"buyable",store:"storeID",listPrice:"price.0.value",purchasePrice:"price.1.value",code:"partNumber",resourceId:"resourceId",displayName:"name",attributes:["attributes",n.default.map({displayable:"displayable",name:"name",identifier:"identifier",values:["values",n.default.map({identifier:"identifier",uniqueID:"uniqueID",image:["image1path",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}]})]})],thumbnail:["thumbnail",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}]})],thumbnail:["thumbnail",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}],fullImage:["fullImage",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}]})]}),s=r(e),o=s;if(1!=t)for(var i=0;i<o.catalogEntryView.length;i++){var d=t.InventoryAvailability[i].inventoryStatus,u=t.InventoryAvailability[i].availableQuantity;o.catalogEntryView[i].availability=d,o.catalogEntryView[i].quantity=u}return o},mapQuickViewJSON:function(e,t){for(var r=n.default.makeConverter({catalogEntryView:["catalogEntryView",n.default.map({hasSingleSKU:"hasSingleSKU",uniqueId:"uniqueID",catalogEntryTypeCode:"catalogEntryTypeCode",buyable:"buyable",store:"storeID",listPrice:"price.0.value",purchasePrice:"price.1.value",code:"partNumber",resourceId:"resourceId",displayName:"name",attributes:["attributes",n.default.map({displayable:"displayable",name:"name",identifier:"identifier",values:["values",n.default.map({identifier:"identifier",uniqueID:"uniqueID",image:["image1path",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}]})]})],skus:["sKUs",n.default.map({skuId:"uniqueID",hasSingleSKU:"hasSingleSKU",catalogEntryTypeCode:"catalogEntryTypeCode",buyable:"buyable",store:"storeID",listPrice:"price.0.value",purchasePrice:"price.1.value",code:"partNumber",resourceId:"resourceId",displayName:"name",attributes:["attributes",n.default.map({displayable:"displayable",name:"name",identifier:"identifier",values:["values",n.default.map({identifier:"identifier",uniqueID:"uniqueID",image:["image1path",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}]})]})],thumbnail:["thumbnail",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}]})],thumbnail:["thumbnail",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}],fullImage:["fullImage",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}]})]}),s=r(e),o=s,i=0;i<o.catalogEntryView.length;i++){var d=t.InventoryAvailability[i].inventoryStatus,u=t.InventoryAvailability[i].availableQuantity;o.catalogEntryView[i].availability=d,o.catalogEntryView[i].quantity=u}return o},mapRecentlyViewedProductsJSON:function(e){return n.default.makeConverter({resourceId:"resourceId",recentlyViewedProducts:["MarketingSpotData.0.baseMarketingSpotActivityData",n.default.map({catalogEntryTypeCode:"catalogEntryTypeCode",currency:"currency",partNumber:"productPartNumber",productId:"productId",purchasePrice:"standardPrice",listPrice:"listPrice",description:["description",n.default.map({thumbnail:["thumbnail",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}],shortDescription:"shortDescription",longDescription:"longDescription",language:"language",productName:"productName"})],attributes:["attributes",n.default.map({name:"name",stringValue:"stringValue"})]})]})(e)},mapProductDetailBySingleIdJSON:function(e){return n.default.makeConverter({catalogEntryView:["catalogEntryView",n.default.map({hasSingleSKU:"hasSingleSKU",uniqueId:"uniqueID",catalogEntryTypeCode:"catalogEntryTypeCode",buyable:"buyable",store:"storeID",listPrice:"price.0.value",purchasePrice:"price.1.value",code:"partNumber",resourceId:"resourceId",displayName:"name",attributes:["attributes",n.default.map({displayable:"displayable",name:"name",identifier:"identifier",values:["values",n.default.map({identifier:"identifier",uniqueID:"uniqueID",image:["image1path",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}]})]})],skus:["sKUs",n.default.map({skuId:"uniqueID",hasSingleSKU:"hasSingleSKU",catalogEntryTypeCode:"catalogEntryTypeCode",buyable:"buyable",store:"storeID",listPrice:"price.0.value",purchasePrice:"price.1.value",code:"partNumber",resourceId:"resourceId",displayName:"name",attributes:["attributes",n.default.map({displayable:"displayable",name:"name",identifier:"identifier",values:["values",n.default.map({identifier:"identifier",uniqueID:"uniqueID",image:["image1path",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}]})]})],thumbnail:["thumbnail",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}]})],thumbnail:["thumbnail",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}],fullImage:["fullImage",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}]})]})(e)}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var o=r(0),n=s(o),i=r(9),a=s(i),d=r(6),u=r(17),c=s(u),l=r(49),f=s(l),p=r(94),_=s(p),S=(0,d.getLogger)();process.env.NODE_TLS_REJECT_UNAUTHORIZED="0";var m=(0,n.default)();m.use(n.default.static("WebContent")),m.set("port",process.env.PORT||5e3),m.use((0,_.default)());var g=function(e,t,r){var s=["http://localhost:4200","http://project-c-web-app.herokuapp.com","https://project-c-web-app.herokuapp.com","http://127.0.0.1:4200"],o=e.headers.origin;s.indexOf(o)>-1&&t.setHeader("Access-Control-Allow-Origin",o),t.header("Access-Control-Allow-Methods","GET,PUT,POST,DELETE"),t.header("Access-Control-Allow-Headers","Content-Type, Cookie"),t.header("Access-Control-Allow-Credentials",!0),r()};m.use(g),m.use(a.default.urlencoded({extended:!1})),m.use(a.default.json()),m.all("/ep/*",c.default),m.all("/wcs/*",f.default),m.listen(m.get("port"),function(){S.info("running on port",m.get("port"))})},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(18),a=s(i),d=r(20),u=s(d),c=r(23),l=s(c),f=r(26),p=s(f),_=r(29),S=s(_),m=r(32),g=s(m),C=r(35),y=s(C),O=r(38),h=s(O),T=r(41),E=s(T),P=r(44),I=s(P),v=r(46),N=s(v),A=(0,n.default)();A.use("/ep/login",a.default),A.use("/ep/search",u.default),A.use("/ep/category",l.default),A.use("/ep/PDP",p.default),A.use("/ep/cart",S.default),A.use("/ep/shipModes",g.default),A.use("/ep/address",y.default),A.use("/ep/wishlist/",h.default),A.use("/ep/promotions/",E.default),A.use("/ep/register/",I.default),A.use("/ep/userProfile/",N.default),t.default=A},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(9),a=s(i),d=r(8),u=s(d),c=n.default.Router();c.use(a.default.json()),c.post("/loginIdentityHandler",function(e,t){u.default.loginIdentityHandler(e,t)}),c.delete("/logout",function(e,t){u.default.logout(e,t)}),t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={EP_STORE:"britney",EP_HOSTNAME:"34.216.223.217:9080",EP_HOSTNAME_CORTEX:"34.216.223.217:9080/cortex",EP_TOKEN_EXPIRATION_TIME:"1800000"}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(21),a=s(i),d=r(2),u=(s(d),n.default.Router());u.get("/getSearchResults",function(e,t){a.default.getSearchResults(e,t)}),t.default=u},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var o=r(2),n=s(o),i=r(6),a=r(22),d=s(a),u=r(1),c=s(u),l=r(8),f=(0,i.getLogger)();e.exports={getSearchResults:function(e,t){var r=function(r){return new Promise(function(s,o){var a=e.query.keyword,u=e.query.pageSize,l={keywords:a,"page-size":u},p=(0,i.constructUrl)(n.default.EP_HOSTNAME,n.default.EP_SEARCH,!1);f.info("getSearchResults post form url",p);var _=(0,i.constructRequest)(p,"POST",l,r);f.info("requestCAll "+_),(0,c.default)(_).then(function(e){var s=e.self.uri,o=s+n.default.EP_SEARCH_ZOOM,a=(0,i.constructUrl)(n.default.EP_HOSTNAME_CORTEX,o,!1),u={};f.info("getSearchResults resource url:"+a);var l=(0,i.constructRequest)(a,"GET",u,r);return(0,c.default)(l).then(function(e){var r=d.default.mapSearchResultJSON(e);t.send({success:!0,result:r})}).catch(function(e){e.response.body?(f.error("errors in service to getSearchResults in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(f.error("errors in service to getSearchResults in EP: ",e),t.send({success:!1,error:e}))})}).catch(function(e){e.response.body?(f.error("errors in service to getSearchResults in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(f.error("errors in service to getSearchResults in EP: ",e),t.send({success:!1,error:e}))})})};(0,l.checkAndGetAuthToken)(e,t,function(e){r(e)})}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var o=r(2),n=s(o),i=r(4),a=s(i);e.exports={mapSearchResultJSON:function(e){return a.default.makeConverter({pagination:{pageSize:"pagination.page-size",currentPageNumber:"pagination.current",resultsTotal:"pagination.results",resultsCurrentPage:"pagination.results-on-page",pages:"pagination.pages"},searchResults:["_element",a.default.map({availability:"_availability.0.state",listPrice:"_price.0.list-price.0.display",purchasePrice:"_price.0.purchase-price.0.display",displayName:"_definition.0.display-name",code:"_code.0.code",uniqueID:"_code.0.links.0.uri",store:a.default.helpers.def(n.default.EP_STORE),thumbnail:["_code.0.code",function(e){var t=e.split(".")[0];return n.default.EP_AWS_IMAGE_PATH+t+n.default.EP_IMAGE_FMT}],attributes:["_definition.0.details",a.default.map({displayable:a.default.helpers.def("true"),usage:a.default.helpers.def("Descriptive"),name:"display-name",identifier:"name",values:"value"})],hasSingleSKU:["_definition.0.links",function(e){return!(e.length>=3)}],catalogEntryTypeCode:["_definition.0.links",function(e){return e.length>=3?"ProductBean":"ItemBean"}]})]})(e)}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(24),a=s(i),d=n.default.Router();d.get("/getTopCategories",function(e,t){a.default.getTopCategories(e,t)}),d.get("/getSubCategories",function(e,t){a.default.getSubCategories(e,t)}),d.get("/getProductsListForCategory",function(e,t){a.default.getProductsListForCategory(e,t)}),t.default=d},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var o=r(1),n=s(o),i=r(2),a=s(i),d=r(25),u=s(d),c=r(6),l=r(8),f=(0,c.getLogger)();e.exports={getTopCategories:function(e,t){var r=function(e){return new Promise(function(r,s){var o={},i=(0,c.constructUrl)(a.default.EP_HOSTNAME,a.default.EP_TOP_CATEGORIES,!1);f.info("Top categories EP url: ",i);var d=(0,c.constructRequest)(i,"GET",o,e);(0,n.default)(d).then(function(e){var r=u.default.mapTopCategoriesJSON(e);t.send({success:!0,result:r})}).catch(function(e){e.response.body?(f.error("errors in service to get Top categories in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(f.error("errors in service to get Top categories in EP: ",e),t.send({success:!1,error:e}))})})};(0,l.checkAndGetAuthToken)(e,t,function(e){r(e)})},getSubCategories:function(e,t){var r=function(r){return new Promise(function(s,o){var i={},d=e.query.identifier,l=d+a.default.EP_SUB_CATEGORIES_ZOOM,p=(0,c.constructUrl)(a.default.EP_HOSTNAME_CORTEX,l,!1);f.info("Sub Categories EP url:",p);var _=(0,c.constructRequest)(p,"GET",i,r);(0,n.default)(_).then(function(e){var r=u.default.mapSubCategoriesJSON(e,d);t.send({success:!0,result:r})}).catch(function(e){e.response.body?(f.error("errors in service to get Sub categories in EP:",e.response.body),t.send({success:!1,error:e.response.body})):(f.error("errors in service to get Sub categories in EP:",e),t.send({success:!1,error:e}))})})};(0,l.checkAndGetAuthToken)(e,t,function(e){r(e)})},getProductsListForCategory:function(e,t){var r=function(r){return new Promise(function(s,o){var i={},d=e.query.identifier,l=d.split("/"),p=l[l.length-1],_=a.default.EP_PRODUCTS_FROM_CATEGORIES_NAV+p+a.default.EP_SEARCH_ZOOM,S=(0,c.constructUrl)(a.default.EP_HOSTNAME_CORTEX,_,!1);f.info("Categories page Product List EP url:",S);var m=(0,c.constructRequest)(S,"GET",i,r);(0,n.default)(m).then(function(e){var r=u.default.mapProductsListForCategoryJSON(e);t.send({success:!0,result:r})}).catch(function(e){e.response.body?(f.error("errors in service to get products list for category in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(f.error("errors in service to get products list for category in EP: ",e),t.send({success:!1,error:e}))})})};(0,l.checkAndGetAuthToken)(e,t,function(e){r(e)})}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var o=r(2),n=s(o),i=r(4),a=s(i);e.exports={mapTopCategoriesJSON:function(e){return a.default.makeConverter({TopCategories:["_element",a.default.map({name:"display-name",identifier:"name",id:"self.uri",store:a.default.helpers.def(n.default.EP_STORE)})],totalCount:["_element",function(e){return e.length}]})(e)},mapSubCategoriesJSON:function(e,t){return a.default.makeConverter({SubCategories:["_child",a.default.map({name:"display-name",identifier:"name",id:"self.uri",store:a.default.helpers.def(n.default.EP_STORE)})],totalCount:["_child",function(e){return e.length}]})(e)},mapProductsListForCategoryJSON:function(e){return a.default.makeConverter({pagination:{pageSize:"pagination.page-size",currentPageNumber:"pagination.current",resultsTotal:"pagination.results",resultsCurrentPage:"pagination.results-on-page",pages:"pagination.pages"},productsList:["_element",a.default.map({availability:"_availability.0.state",listPrice:"_price.0.list-price.0.display",purchasePrice:"_price.0.purchase-price.0.display",displayName:"_definition.0.display-name",code:"_code.0.code",uniqueID:"_code.0.links.0.uri",store:a.default.helpers.def(n.default.EP_STORE),thumbnail:["_code.0.code",function(e){var t=e.split(".")[0];return n.default.EP_AWS_IMAGE_PATH+t+n.default.EP_IMAGE_FMT}],attributes:["_definition.0.details",a.default.map({displayable:a.default.helpers.def("true"),name:"display-name",identifier:"name",values:"value"})],hasSingleSKU:["_definition.0.links",function(e){return!(e.length>=3)}],catalogEntryTypeCode:["_definition.0.links",function(e){return e.length>=3?"ProductBean":"ItemBean"}]})]})(e)}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(27),a=s(i),d=n.default.Router();d.get("/getProductDetails",function(e,t){a.default.getProductDetails(e,t)}),t.default=d},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var o=r(2),n=s(o),i=r(6),a=r(8),d=r(28),u=s(d),c=r(1),l=s(c),f=r(4),p=(s(f),r(12)),_=(s(p),(0,i.getLogger)());e.exports={getProductDetails:function(e,t){var r=function(r){return new Promise(function(s,o){var a=e.query.productId,d=a+n.default.EP_PDP_ZOOM,c=(0,i.constructUrl)(n.default.EP_HOSTNAME_CORTEX,d,!1);_.info("getProductDetails post form url:"+c);var f={},p=(0,i.constructRequest)(c,"GET",f,r);(0,l.default)(p).then(function(e){var r=[],s=[];if(void 0!==e._recommendations)for(var o=e._recommendations[0]._crosssell[0]._element,n=o.length,i=0;i<n;i++)r[i]=u.default.convertMerchAssoc(e._recommendations[0]._crosssell[0]._element[i]);var a=r.concat(s),d=u.default.mapPdpJSON(e,a);t.send({success:!0,result:d})}).catch(function(e){_.error("errors in service to getProduct Details in EP: ",e),t.send({success:!1,error:e})})})};(0,a.checkAndGetAuthToken)(e,t,function(e){r(e)})}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var o=r(2),n=s(o),i=r(4),a=s(i);e.exports={mapPdpJSON:function(e,t){var r=a.default.makeConverter({catalogEntryView:[{hasSingleSKU:["_definition.0.links",function(e){return!(e.length>=3)}],catalogEntryTypeCode:["_definition.0.links",function(e){return e.length>=3?"ProductBean":"ItemBean"}],buyable:a.default.helpers.def("true"),store:a.default.helpers.def(n.default.EP_STORE),availability:"_availability.0.state",listPrice:"_price.0.list-price.0.display",purchasePrice:"_price.0.purchase-price.0.display",code:"_code.0.code",resourceId:"_code.0.links.0.uri",displayName:"_definition.0.display-name",attributes:["_definition.0.details",a.default.map({displayable:a.default.helpers.def("true"),usage:a.default.helpers.def("Descriptive"),name:"display-name",identifier:"name",values:"value"})],swatches:["_definition.0._options.0._element",a.default.map({displayName:"display-name",options:["_selector",a.default.map({choice:["_choice",a.default.map({name:"_description.0.display-name",unniqueId:"_description.0.self.uri"})],chosen:["_chosen",a.default.map({name:"_description.0.display-name",uniqueId:"_description.0.self.uri"})]})]})],thumbnail:["_code.0.code",function(e){var t=e.split("-")[0].toUpperCase();return t=t.replace(".","-"),n.default.EP_AWS_IMAGE_PATH+t+n.default.EP_IMAGE_FMT}],fullImage:["_code.0.code",function(e){var t=e.split("-")[0].toUpperCase();return t=t.replace(".","-"),n.default.EP_AWS_IMAGE_PATH+t+n.default.EP_IMAGE_FMT}]}]}),s=r(e);return s.catalogEntryView.merchandisingAssociations=t,s},convertMerchAssoc:function(e){return a.default.makeConverter({hasSingleSKU:["_definition.0.details",function(e){return!(e.length>=3)}],catalogEntryTypeCode:["_definition.0.details",function(e){return e.length>=3?"ProductBean":"ItemBean"}],buyable:a.default.helpers.def("true"),store:a.default.helpers.def(n.default.EP_STORE),availability:"_availability.0.state",listPrice:"_price.0.list-price.0.display",purchasePrice:"_price.0.purchase-price.0.display",code:"_code.0.code",resourceId:"_code.0.links.0.uri",displayName:"_definition.0.display-name",attributes:["_definition.0.details",a.default.map({displayable:a.default.helpers.def("true"),usage:a.default.helpers.def("Descriptive"),name:"display-name",identifier:"name",values:"value"})],thumbnail:["_code.0.code",function(e){var t=e.split("-")[0].toUpperCase();return t=t.replace(".","-"),n.default.EP_AWS_IMAGE_PATH+t+n.default.EP_IMAGE_FMT}],fullImage:["_code.0.code",function(e){var t=e.split("-")[0].toUpperCase();return t=t.replace(".","-"),n.default.EP_AWS_IMAGE_PATH+t+n.default.EP_IMAGE_FMT}]})(e)}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(30),a=s(i),d=n.default.Router();d.post("/addToCart",function(e,t){a.default.addToCart(e,t)}),d.get("/shoppingCart",function(e,t){a.default.getShoppingCart(e,t)}),d.put("/updateShoppingCartItem",function(e,t){a.default.updateShoppingCartItem(e,t)}),d.delete("/deleteShoppingCartItem",function(e,t){a.default.deleteShoppingCartItem(e,t)}),d.delete("/deleteAllShoppingCartItem",function(e,t){a.default.deleteAllShoppingCartItem(e,t)}),d.post("/orderReview",function(e,t){a.default.orderReview(e,t)}),d.post("/submitOrder",function(e,t){a.default.submitOrder(e,t)}),t.default=d},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var o=r(7),n=s(o),i=r(1),a=s(i),d=r(31),u=s(d),c=r(6),l=r(2),f=s(l),p=(0,c.getLogger)();e.exports={addToCart:function(e,t){var r=e.cookies.access_token;if(void 0!=e.body.swatches&&null!=e.body.swatches)for(var s=e.body.swatches,o=0;o<s.length;o++){var i=e.body.swatches[o].uri,d=i+f.default.EP_FOLLOW_LOCATION,l=(0,c.constructUrl)(f.default.EP_HOSTNAME_CORTEX,d,!1),_={},S=(0,c.constructRequest)(l,"POST",_,r);p.info("Post add to cart url",l),(0,a.default)(S).then(function(e){p.info(f.default.EP_SWATCH_SELECTED)}).catch(function(e){e.response.body?(p.error("errors in selecting swatch in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(p.error("errors in selecting swatch in EP: ",e),t.send({success:!1,error:e}))})}for(var m=[],g=0;g<e.body.orderItem.length;g++){var C=e.body.orderItem[g].productId+"?followlocation",y=(0,c.constructUrl)(f.default.EP_HOSTNAME_CORTEX,C,!1),O={quantity:e.body.orderItem[g].quantity};m.push(this.getAddToCartRequestPromise(r,JSON.parse(JSON.stringify(O)),y))}n.default.all(m).then(function(e){var r=u.default.addToCartJSON(e);t.send({success:!0,result:r})},function(e){p.error("errors in service hit to Add to Cart service"+e),t.send({success:!1,error:e})})},getAddToCartRequestPromise:function(e,t,r){return new n.default(function(s,o){var n=(0,c.constructRequest)(r,"POST",t,e);(0,a.default)(n).then(function(e){return s({success:!0,url:r,body:e})}).catch(function(e){return p.error("errors in service to Add to Cart in EP: ",e),s({success:!1,error:e})})})},getShoppingCart:function(e,t){var r=e.cookies.access_token,s={},o=f.default.EP_SHOPPING_CART+f.default.EP_SHOPPING_CART_ZOOM,n=(0,c.constructUrl)(f.default.EP_HOSTNAME_CORTEX,o,!1);p.info("Get shoppingCart form url",n);var i=(0,c.constructRequest)(n,"GET",s,r);(0,a.default)(i).then(function(e){var r=u.default.shoppingCartJSON(e);t.send({success:!0,result:r})}).catch(function(e){e.response.body?(p.error("errors in service to getShoppingCart in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(p.error("errors in service to getShoppingCart in EP: ",e),t.send({success:!1,error:e}))})},updateShoppingCartItem:function(e,t){var r=e.cookies.access_token,s={quantity:e.body.lineItem[0].quantity},o=e.body.lineItem[0].lineItemId,n=(0,c.constructUrl)(f.default.EP_HOSTNAME_CORTEX,o,!1);p.info("updateShoppingCart form url",n);var i=(0,c.constructRequest)(n,"PUT",s,r);(0,a.default)(i).then(function(e){var r=u.default.updateCartItemJSON(o);t.send({success:!0,result:r})}).catch(function(e){e.response.body?(p.error("errors in service to updateShoppingCartItem in EP: ",e.response.body),t.send({success:!1,error:e})):(p.error("errors in service to updateShoppingCartItem in EP: ",e),t.send({success:!1,error:e}))})},deleteShoppingCartItem:function(e,t){var r=e.cookies.access_token,s={},o=e.body.lineItem[0].lineItemId,n=(0,c.constructUrl)(f.default.EP_HOSTNAME_CORTEX,o,!1);p.info("delete Item form url",n);var i=(0,c.constructRequest)(n,"DELETE",s,r);(0,a.default)(i).then(function(e){var r=u.default.deleteCartItemJSON();t.send({success:!0,result:r})}).catch(function(e){e.response.body?(p.error("errors in service to DeleteItem in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(p.error("errors in service to DeleteItem in EP: ",e),t.send({success:!1,error:e}))})},deleteAllShoppingCartItem:function(e,t){var r=e.cookies.access_token,s={},o=e.body.cartLineItemId,n=(0,c.constructUrl)(f.default.EP_HOSTNAME_CORTEX,o,!1);p.info("delete All Item form url",n);var i=(0,c.constructRequest)(n,"DELETE",s,r);(0,a.default)(i).then(function(e){var r=u.default.deleteAllCartItemJSON();t.send({success:!0,result:r})}).catch(function(e){e.response.body?(p.error("errors in service to DeleteAllItem in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(p.error("errors in service to DeleteAllItem in EP: ",e),t.send({success:!1,error:e}))})},orderReview:function(e,t){var r=e.cookies.access_token,s={},o=e.body.orderId+f.default.EP_GET_ORDER_REVIEW,n=(0,c.constructUrl)(f.default.EP_HOSTNAME_CORTEX,o,!1);p.info("Order Review",n);var i=(0,c.constructRequest)(n,"GET",s,r);(0,a.default)(i).then(function(e){var r=u.default.mapOrderReviewJSON(e);t.send({success:!0,result:r})}).catch(function(e){e.response.body?(p.error("errors in service to order Review in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(p.error("errors in service to order Review in EP: ",e),t.send({success:!1,error:e}))})},submitOrder:function(e,t){var r=e.cookies.access_token,s={},o=f.default.EP_PURCHASES+e.body.orderId+f.default.EP_FOLLOW_LOCATION,n=(0,c.constructUrl)(f.default.EP_HOSTNAME_CORTEX,o,!1);p.info("Order Review",n);var i=(0,c.constructRequest)(n,"POST",s,r);(0,a.default)(i).then(function(e){var s=e.self.uri,o=s+f.default.EP_PURCHASE_ZOOM,n=(0,c.constructUrl)(f.default.EP_HOSTNAME_CORTEX,o,!1),i={};p.info("order Confirmation resource url:"+n);var d=(0,c.constructRequest)(n,"GET",i,r);return(0,a.default)(d).then(function(e){var r=u.default.mapOrderConfirmationJSON(e);t.send({success:!0,result:r})}).catch(function(e){e.response.body?(p.error("errors in service to orderConfirmation in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(p.error("errors in service to orderConfirmation in EP: ",e),t.send({success:!1,error:e}))})}).catch(function(e){e.response.body?(p.error("errors in service to Submit Order in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(p.error("errors in service to Submit Order in EP: ",e),t.send({success:!1,error:e}))})}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(6),n=r(2),i=s(n),a=r(4),d=s(a),u=(0,o.getLogger)();t.default={addToCartJSON:function(e){for(var t=[],r=void 0,s=0;s<e.length;s++)e[s].success?(t.push({orderItemId:e[s].body.self.uri}),r=e[s].body.links[3].uri):(u.info("RequestFailed"+JSON.stringify(e[s].error.message)),t.push({orderItemId:e[s].error.message}));var o={orderId:r,orderItem:t};return JSON.parse(JSON.stringify(o))},shoppingCartJSON:function(e){var t=e._order[0]._total[0].cost[0].currency;return d.default.makeConverter({totalQuantity:"total-quantity",adjustments:["_appliedpromotions.0._element",d.default.map({code:d.default.helpers.def(""),currency:d.default.helpers.def(t),description:"display-description",displayLevel:d.default.helpers.def("Order"),usage:d.default.helpers.def("Discount")})],grandTotal:"_order.0._total.0.cost.0.display",grandTotalCurrency:"_order.0_total.0.cost.0.currency",orderId:"_order.0._total.0.links.0.uri",cartLineItemId:"_lineitems.0.self.uri",orderItem:["_lineitems.0._element",d.default.map({currency:"_price.0.purchase-price.0.currency",freeGift:d.default.helpers.def("false"),orderItemId:"self.uri",orderItemInventoryStatus:"_availability.0.state",orderItemPrice:"_total.0.cost.0.display",partNumber:"_item.0._code.0.code",productId:"_item.0._code.0.links.0.uri",quantity:"quantity",salesTax:d.default.helpers.def(""),salesTaxCurrency:d.default.helpers.def(""),shippingCharge:d.default.helpers.def(""),shippingChargeCurrency:d.default.helpers.def(""),shippingTax:d.default.helpers.def(""),shippingTaxCurrency:d.default.helpers.def(""),unitPrice:"_price.0.purchase-price.0.display",unitQuantity:d.default.helpers.def("1"),usableShippingChargePolicy:[{name:d.default.helpers.def(""),type:d.default.helpers.def(""),uniqueID:d.default.helpers.def("")}]})],orderStatus:d.default.helpers.def(""),recordSetCount:["_lineitems.0._element",function(e){return e?e.length:0}],recordSetStartNumber:d.default.helpers.def(""),recordSetTotal:d.default.helpers.def(""),resourceId:d.default.helpers.def(""),resourceName:d.default.helpers.def("cart"),shipAsComplete:d.default.helpers.def(""),storeNameIdentifier:d.default.helpers.def(i.default.EP_STORE),storeUniqueID:d.default.helpers.def(i.default.EP_STORE),totalAdjustment:"_discount.0.discount.0.display",totalAdjustmentCurrency:"_discount.0.discount.0.currency",totalProductPrice:"_total.0.cost.0.display",totalProductPriceCurrency:"_total.0.cost.0.currency",totalSalesTax:"_order.0._tax.0.cost.0.display",totalSalesTaxCurrency:"_order.0._tax.0.cost.0.currency",totalShippingCharge:d.default.helpers.def(""),totalShippingChargeCurrency:d.default.helpers.def(""),totalShippingTax:d.default.helpers.def(""),totalShippingTaxCurrency:d.default.helpers.def("")})(e)},updateCartItemJSON:function(e){var t={orderId:"",lineItem:[{lineItemId:e}]};return JSON.parse(JSON.stringify(t))},deleteCartItemJSON:function(){var e={orderId:""};return JSON.parse(JSON.stringify(e))},deleteAllCartItemJSON:function(){var e={message:"All Cart Items are Deleted Successfully"};return JSON.parse(JSON.stringify(e))},mapOrderReviewJSON:function(e){return d.default.makeConverter({adjustment:["_cart.0._appliedpromotions.0._element",d.default.map({code:d.default.helpers.def(""),currency:d.default.helpers.def("USD"),description:"display-description",displayLevel:d.default.helpers.def("Order"),usage:d.default.helpers.def("Discount")})],grandTotal:"_total.0.cost.0.display",grandTotalCurrency:"_total.0.cost.0.currency",locked:d.default.helpers.def(""),orderId:"_total.0.links.0.uri",lineItem:["_cart.0._lineitems.0._element",d.default.map({adjustment:["_appliedpromotions.0._element",d.default.map({code:d.default.helpers.def(""),currency:d.default.helpers.def("USD"),description:"display-description",usage:d.default.helpers.def("Discount")})],currency:"_price.0.purchase-price.0.currency",freeGift:d.default.helpers.def("false"),lineItemId:"self.uri",lineItemPrice:"_total.0.cost.0.display",adjustedPrice:"_total.0.cost.0.display",partNumber:"_item.0._code.0.code",productId:"_item.0._code.0.links.0.uri",quantity:"quantity",unitPrice:"_price.0.purchase-price.0.display",unitQuantity:d.default.helpers.def("1")})],shipping:{firstName:"_deliveries.0._element.0._destinationinfo.0._selector.0._chosen.0._description.0.name.family-name",lastName:"_deliveries.0._element.0._destinationinfo.0._selector.0._chosen.0._description.0.name.given-name",middleName:d.default.helpers.def(" "),email1:d.default.helpers.def(" "),addressId:"_deliveries.0._element.0._destinationinfo.0._selector.0._chosen.0._description.0.self.uri",addressLine:"_deliveries.0._element.0._destinationinfo.0._selector.0._chosen.0._description.0.address.street-address",city:"_deliveries.0._element.0._destinationinfo.0._selector.0._chosen.0._description.0.address.locality",state:"_deliveries.0._element.0._destinationinfo.0._selector.0._chosen.0._description.0.address.region",country:"_deliveries.0._element.0._destinationinfo.0._selector.0._chosen.0._description.0.address.country-name",postalCode:"_deliveries.0._element.0._destinationinfo.0._selector.0._chosen.0._description.0.address.postal-code",carrier:"_deliveries.0._element.0._shippingoptioninfo.0._selector.0._chosen.0._description.0.carrier",expectedShipDate:d.default.helpers.def(" "),shipModeCode:"_deliveries.0._element.0._shippingoptioninfo.0._selector.0._chosen.0._description.0.name",shipModeDescription:"_deliveries.0._element.0._shippingoptioninfo.0._selector.0._chosen.0._description.0.display-name",shipModeId:"_deliveries.0._element.0._shippingoptioninfo.0._selector.0._chosen.0._description.0.self.uri"},paymentInstruction:["_paymentmethodinfo.0._paymentmethod",d.default.map({firstName:d.default.helpers.def(""),lastName:d.default.helpers.def(""),middleName:d.default.helpers.def(""),email1:d.default.helpers.def(""),addressId:d.default.helpers.def(""),addressLine:d.default.helpers.def(""),city:d.default.helpers.def(""),state:d.default.helpers.def(""),country:d.default.helpers.def(""),postalCode:d.default.helpers.def(""),payMethodId:"self.uri",piId:"token",piAmount:d.default.helpers.def(""),piCurrency:d.default.helpers.def(""),piDescription:"display-name"})],placedDate:d.default.helpers.def(""),recordSetComplete:d.default.helpers.def(""),recordSetCount:d.default.helpers.def(""),recordSetStartNumber:d.default.helpers.def(""),recordSetTotal:d.default.helpers.def(""),resourceId:d.default.helpers.def(""),totalAdjustment:"_cart.0._discount.0.discount.0.display",totalAdjustmentCurrency:"_cart.0._discount.0.discount.0.currency",totalProductPrice:"_cart.0._total.0.cost.0.display",totalProductPriceCurrency:"_cart.0._total.0.cost.0.currency",totalSalesTax:"_tax.0.cost.0.display",totalSalesTaxCurrency:"_tax.0.cost.0.currency",totalShippingCharge:"_deliveries.0._element.0._shippingoptioninfo.0._selector.0._chosen.0._description.0.cost.0.display",totalShippingChargeCurrency:"_deliveries.0._element.0._shippingoptioninfo.0._selector.0._chosen.0._description.0.cost.0.currency",totalShippingTax:d.default.helpers.def(""),totalShippingTaxCurrency:d.default.helpers.def("")})(e)},mapOrderConfirmationJSON:function(e){return d.default.makeConverter({adjustment:["_appliedpromotions.0._element",d.default.map({code:d.default.helpers.def(""),currency:d.default.helpers.def("USD"),description:"display-description",displayLevel:d.default.helpers.def("Order"),usage:d.default.helpers.def("Discount")})],grandTotal:"monetary-total.0.display",grandTotalCurrency:"monetary-total.0.currency",locked:d.default.helpers.def(""),orderId:"purchase-number",lineItem:["_lineitems.0._element",d.default.map({adjustment:["_appliedpromotions.0._element",d.default.map({code:d.default.helpers.def(""),currency:d.default.helpers.def("USD"),description:"display-description",usage:d.default.helpers.def("Discount")})],currency:"line-extension-amount.0.currency",freeGift:d.default.helpers.def("false"),lineItemId:"self.uri",lineItemPrice:"line-extension-amount.0.display",adjustedPrice:"line-extension-amount.0.display",partNumber:d.default.helpers.def(""),productId:d.default.helpers.def(""),quantity:"quantity",unitPrice:d.default.helpers.def(""),unitQuantity:d.default.helpers.def("1")})],shipping:{firstName:"_shipments.0._element.0._destination.0.name.family-name",lastName:"_shipments.0._element.0._destination.0.name.given-name",middleName:d.default.helpers.def(" "),email1:d.default.helpers.def(" "),addressId:"_shipments.0._element.0._destination.0.self.uri",addressLine:"_shipments.0._element.0._destination.0.address.street-address",city:"_shipments.0._element.0._destination.0.address.locality",state:"_shipments.0._element.0._destination.0.address.region",country:"_shipments.0._element.0._destination.0.address.country-name",postalCode:"_shipments.0._element.0._destination.0.address.postal-code",carrier:"_shipments.0._element.0._shippingoption.0.carrier",expectedShipDate:d.default.helpers.def(" "),shipModeCode:"_shipments.0._element.0._shippingoption.0.name",shipModeDescription:"_shipments.0._element.0._shippingoption.0.display-name",shipModeId:"_shipments.0._element.0._shippingoption.0.self.uri"},paymentInstruction:[{firstName:"_billingaddress.0.name.family-name",lastName:"_billingaddress.0.name.given-name",middleName:d.default.helpers.def(""),email1:d.default.helpers.def(""),addressId:d.default.helpers.def(""),addressLine:"_billingaddress.0.address.stree-address",city:"_billingaddress.0.address.locality",state:"_billingaddress.0.address.region",country:"_billingaddress.0.address.country-name",postalCode:"_billingaddress.0.address.postal-code",payMethodId:"_paymentmeans.0._element.0.self.uri",piId:d.default.helpers.def(""),piAmount:d.default.helpers.def(""),piCurrency:d.default.helpers.def(""),piDescription:"_paymentmeans.0._element.0.display-name"}],placedDate:"purchase-date.display-value",recordSetComplete:d.default.helpers.def(""),recordSetCount:d.default.helpers.def(""),recordSetStartNumber:d.default.helpers.def(""),recordSetTotal:d.default.helpers.def(""),resourceId:d.default.helpers.def(""),totalAdjustment:"_discount.0.discount.0.display",totalAdjustmentCurrency:"_discount.0.discount.0.currency",totalProductPrice:d.default.helpers.def(""),totalProductPriceCurrency:d.default.helpers.def(""),totalSalesTax:"_shipments.0._element.0._tax.0.cost.0.display",totalSalesTaxCurrency:"_shipments.0._element.0._tax.0.cost.0.currency",totalShippingCharge:"_shipments.0._element.0._shippingoption.0.cost.0.display",totalShippingChargeCurrency:"_shipments.0._element.0._shippingoption.0.cost.0.currency",totalShippingTax:d.default.helpers.def(""),totalShippingTaxCurrency:d.default.helpers.def("")})(e)}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(33),a=s(i),d=r(2),u=(s(d),n.default.Router());u.get("/getShippingMethods",function(e,t){a.default.getShippingMethods(e,t)}),u.get("/updateShippingMethod",function(e,t){a.default.updateShippingMethods(e,t)}),t.default=u},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var o=r(2),n=s(o),i=r(6),a=s(i),d=r(34),u=s(d),c=r(13),l=(s(c),r(1)),f=s(l),p=a.default.getLogger();e.exports={getShippingMethods:function(e,t){var r=e.cookies.access_token,s=n.default.EP_CART+n.default.EP_SHIPMODE_ZOOM;p.info("Shipping methods EP url: ",a.default.constructUrl(n.default.EP_HOSTNAME_CORTEX,s,!1));var o={},i=a.default.constructRequest(a.default.constructUrl(n.default.EP_HOSTNAME_CORTEX,s,!1),"GET",o,r);(0,f.default)(i).then(function(e){var r=u.default.mapShipModeJSON(e);t.send({success:!0,result:r})}).catch(function(e){e.response?void 0!=e.response.body&&null!=e.response.body&&(p.error("errors in service to get Shipping methods in EP: ",e.response.body),t.send({success:!1,error:body.errors})):(p.error("errors in service to get Shipping methods in EP: ",e),t.send({success:!1,error:e}))})},updateShippingMethods:function(e,t){var r=e.cookies.access_token,s=e.query.shipModeId+n.default.EP_FOLLOW_LOCATION;p.info("Update Shipping method EP url: ",a.default.constructUrl(n.default.EP_HOSTNAME_CORTEX,s,!1));var o={},i=a.default.constructRequest(a.default.constructUrl(n.default.EP_HOSTNAME_CORTEX,s,!1),"POST",o,r);(0,f.default)(i).then(function(e){t.send({success:!0,result:{updateShipModeMsg:n.default.EP_SHIPMODE_SELECTED}})}).catch(function(e){e.response.body?(p.error("errors in service to get Shipping methods in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(p.error("errors in service to get Shipping methods in EP: ",e),t.send({success:!1,error:e}))})}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var o=r(2),n=(s(o),r(4)),i=s(n);e.exports={mapShipModeJSON:function(e){return i.default.makeConverter({usableShippingMode:["_order.0._deliveries.0._element.0._shippingoptioninfo.0._selector",i.default.map({choice:["_choice",i.default.map({carrier:"_description.0.carrier",displayName:"_description.0.display-name",name:"_description.0.name",shipModeId:"_selectaction.0.self.uri",cost:"_description.0.cost"})],chosen:["_chosen",i.default.map({carrier:"_description.0.carrier",displayName:"_description.0.display-name",name:"_description.0.name",shipModeId:"_selectaction.0.self.uri",cost:"_description.0.cost"})]})]})(e)}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(36),a=s(i),d=r(2),u=(s(d),n.default.Router());u.post("/addShippingAddress",function(e,t){a.default.addShippingAddress(e,t)}),u.get("/getShippingAddresses",function(e,t){a.default.getShippingAddresses(e,t)}),u.delete("/deleteShippingAddress",function(e,t){a.default.deleteShippingAddress(e,t)}),u.put("/updateShippingAddress",function(e,t){a.default.updateShippingAddress(e,t)}),u.post("/selectShippingAddress",function(e,t){a.default.selectShippingAddress(e,t)}),u.get("/getBillingAddresses",function(e,t){a.default.getBillingAddresses(e,t)}),u.post("/selectBillingAddress",function(e,t){a.default.selectBillingAddress(e,t)}),t.default=u},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var o=r(1),n=s(o),i=r(2),a=s(i),d=r(37),u=s(d),c=r(6),l=(0,c.getLogger)();e.exports={addShippingAddress:function(e,t){var r=e.cookies.access_token,s={address:{"country-name":e.body.country,"extended-address":e.body.addressLine[1],locality:e.body.city,"postal-code":e.body.zipCode,region:e.body.state,"street-address":e.body.addressLine[0]},name:{"family-name":e.body.lastName,"given-name":e.body.firstName}},o=(0,c.constructUrl)(a.default.EP_HOSTNAME,a.default.EP_ADD_SHIPPING_ADDRESS,!1);l.info("addShippingAddress url: ",o);var i=(0,c.constructRequest)(o,"POST",s,r);(0,n.default)(i).then(function(e){var r=u.default.addShippingAddressJSON(e);t.send({success:!0,result:r})}).catch(function(e){e.response.body?(l.error("errors in service to addShippingAddress in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(l.error("errors in service to addShippingAddress in EP: ",e),t.send({success:!1,error:e}))})},getShippingAddresses:function(e,t){var r=e.cookies.access_token,s={},o=e.query.orderId+a.default.EP_GET_SHIPPING_ADDRESS_ZOOM,i=(0,c.constructUrl)(a.default.EP_HOSTNAME_CORTEX,o,!1);l.info("getShippingAddresses url: ",i);var d=(0,c.constructRequest)(i,"GET",s,r);(0,n.default)(d).then(function(e){var r=u.default.getShippingAddressesJSON(e);t.send({success:!0,result:r})}).catch(function(e){e.response.body?(l.error("errors in service to get ShippingAddress in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(l.error("errors in service to get ShippingAddress in EP: ",e),t.send({success:!1,error:e}))})},deleteShippingAddress:function(e,t){var r=e.cookies.access_token,s={},o=e.body.addressId,i=(0,c.constructUrl)(a.default.EP_HOSTNAME_CORTEX,o,!1);l.info("deleteShippingAddress url: ",i);var d=(0,c.constructRequest)(i,"DELETE",s,r);(0,n.default)(d).then(function(e){var r=u.default.deleteShippingAddressJSON(e);t.send({success:!0,result:r})}).catch(function(e){e.response.body?(l.error("errors in service to delete address in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(l.error("errors service to delete address in EP: ",e),t.send({success:!1,error:e}))})},updateShippingAddress:function(e,t){var r=e.cookies.access_token,s={address:{"country-name":e.body.country,"extended-address":e.body.addressLine[1],locality:e.body.city,"postal-code":e.body.zipCode,region:e.body.state,"street-address":e.body.addressLine[0]},name:{"family-name":e.body.lastName,"given-name":e.body.firstName}},o=e.body.addressId,i=(0,c.constructUrl)(a.default.EP_HOSTNAME_CORTEX,o,!1);l.info("updateShippingAddress url",i);var d=(0,c.constructRequest)(i,"PUT",s,r);(0,n.default)(d).then(function(e){var r=u.default.updateShippingAddressJSON(e);t.send({success:!0,result:r})}).catch(function(e){e.response.body?(l.error("errors in service to update address in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(l.error("errors in service to update address in EP: ",e),t.send({success:!1,error:e}))})},selectShippingAddress:function(e,t){var r=e.cookies.access_token,s={},o=e.body.addressId,i=e.body.orderId+a.default.EP_GET_SHIPPING_ADDRESS_SELECTOR_ZOOM,d=(0,c.constructUrl)(a.default.EP_HOSTNAME_CORTEX,i,!1);l.info("selectShippingAddress url ",d);var f=(0,c.constructRequest)(d,"GET",s,r);(0,n.default)(f).then(function(e){var s=e._element[0]._destinationinfo[0]._selector[0].self.uri,i=s+o+a.default.EP_FOLLOW_LOCATION,d=(0,c.constructUrl)(a.default.EP_HOSTNAME_CORTEX,i,!1);l.info("shipping address select post url ",d);var f={},p=(0,c.constructRequest)(d,"POST",f,r);return(0,n.default)(p).then(function(e){var r=u.default.selectShippingAddressJSON();t.send({success:!0,result:r})}).catch(function(e){e.response.body?(l.error("errors in service while selecting shipping address in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(l.error("errors in service while selecting shipping address in EP: ",e),t.send({success:!1,error:e}))})}).catch(function(e){e.response.body?(l.error("errors in service to get shipping address selector in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(l.error("errors in service to get shipping address selector in EP: ",e),t.send({success:!1,error:e}))})},getBillingAddresses:function(e,t){var r=e.cookies.access_token,s={},o=e.query.orderId+a.default.EP_GET_BILLING_ADDRESS_ZOOM,i=(0,c.constructUrl)(a.default.EP_HOSTNAME_CORTEX,o,!1);l.info("getBillingAddress url: ",i);var d=(0,c.constructRequest)(i,"GET",s,r);(0,n.default)(d).then(function(e){l.info("data",e);var r=u.default.getBillingAddressesJSON(e);t.send({success:!0,result:r})}).catch(function(e){e.response.body?(l.error("errors in service to get BillingAddress in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(l.error("errors in service to get getBillingAddress in EP: ",e),t.send({success:!1,error:e}))})},selectBillingAddress:function(e,t){var r=e.cookies.access_token,s={},o=(e.body.addressId,e.body.orderId+a.default.EP_GET_BILLING_ADDRESS_SELECTOR+e.body.addressId+a.default.EP_FOLLOW_LOCATION),i=(0,c.constructUrl)(a.default.EP_HOSTNAME_CORTEX,o,!1);l.info("selectBillingAddressURL url: ",i);var d=(0,c.constructRequest)(i,"POST",s,r);(0,n.default)(d).then(function(e){var r=u.default.selectBillingAddressJSON(e);t.send({success:!0,result:r})}).catch(function(e){e.response.body?(l.error("errors in service to select the BillingAddress in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(l.error("errors in service to select the BillingAddress in EP: ",e),t.send({success:!1,error:e}))})}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var o=r(2),n=s(o),i=r(4),a=s(i);e.exports={addShippingAddressJSON:function(){var e={userId:"",addShippingAddressMsg:n.default.EP_ADDRESS_ADDED};return JSON.parse(JSON.stringify(e))},getShippingAddressesJSON:function(e){return a.default.makeConverter({contact:["_element.0._destinationinfo.0._selector",a.default.map({address:["_choice",a.default.map({addressId:"_description.0.self.uri",addressLine:{addressLine1:"_description.0.address.street-address",addressLine2:"_description.0.address.extended-address"},addressType:a.default.helpers.def("ShippingAndBilling"),country:"_description.0.address.country-name",city:"_description.0.address.locality",firstName:"_description.0.name.given-name",lastName:"_description.0.name.family-name",nickName:"_description.0.name.given-name",zipCode:"_description.0.address.postal-code",state:"_description.0.address.region",email1:a.default.helpers.def(" "),phone1:a.default.helpers.def(" "),primary:a.default.helpers.def("false")})],defaultAddress:["_chosen",a.default.map({addressId:"_description.0.self.uri",addressLine:{addressLine1:"_description.0.address.street-address",addressLine2:"_description.0.address.extended-address"},addressType:a.default.helpers.def("ShippingAndBilling"),country:"_description.0.address.country-name",city:"_description.0.address.locality",firstName:"_description.0.name.given-name",lastName:"_description.0.name.family-name",nickName:"_description.0.name.given-name",zipCode:"_description.0.address.postal-code",state:"_description.0.address.region",email1:a.default.helpers.def(" "),phone1:a.default.helpers.def(" "),primary:a.default.helpers.def("true")})],userId:a.default.helpers.def(" ")})]})(e)},deleteShippingAddressJSON:function(e){var t={deleteShippingAddressMsg:n.default.EP_ADDRESS_DELETED};return JSON.parse(JSON.stringify(t))},updateShippingAddressJSON:function(e){var t={updateShippingAddressMsg:n.default.EP_ADDRESS_UPDATED};return JSON.parse(JSON.stringify(t))},selectShippingAddressJSON:function(e){var t={selectShippingAddressMsg:n.default.EP_ADDRESS_SELECTED};return JSON.parse(JSON.stringify(t))},getBillingAddressesJSON:function(e){return a.default.makeConverter({contact:["_selector",a.default.map({address:["_choice",a.default.map({addressId:"_description.0.self.uri",addressLine:{addressLine1:"_description.0.address.street-address",addressLine2:"_description.0.address.extended-address"},addressType:a.default.helpers.def("ShippingAndBilling"),country:"_description.0.address.country-name",city:"_description.0.address.locality",firstName:"_description.0.name.given-name",lastName:"_description.0.name.family-name",nickName:"_description.0.name.given-name",zipCode:"_description.0.address.postal-code",state:"_description.0.address.region",email1:a.default.helpers.def(" "),phone1:a.default.helpers.def(" "),primary:a.default.helpers.def("false")})],defaultAddress:["_chosen",a.default.map({addressId:"_description.0.self.uri",addressLine:{addressLine1:"_description.0.address.street-address",addressLine2:"_description.0.address.extended-address"},addressType:a.default.helpers.def("ShippingAndBilling"),country:"_description.0.address.country-name",city:"_description.0.address.locality",firstName:"_description.0.name.given-name",lastName:"_description.0.name.family-name",nickName:"_description.0.name.given-name",zipCode:"_description.0.address.postal-code",state:"_description.0.address.region",email1:a.default.helpers.def(" "),phone1:a.default.helpers.def(" "),primary:a.default.helpers.def("true")})],userId:a.default.helpers.def(" ")})]})(e)},selectBillingAddressJSON:function(e){var t={selectBillingAddressMsg:n.default.EP_ADDRESS_SELECTED};return JSON.parse(JSON.stringify(t))}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(39),a=s(i),d=n.default.Router();d.post("/addToWishList",function(e,t){a.default.addToWishList(e,t)}),d.get("/getWishList",function(e,t){a.default.getWishList(e,t)}),d.delete("/deleteFromWishList",function(e,t){a.default.deleteFromWishList(e,t)}),d.post("/moveWishListItemToCart",function(e,t){a.default.moveWishListItemToCart(e,t)}),t.default=d},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),n=s(o),i=r(6),a=r(40),d=s(a),u=r(1),c=s(u),l=r(7),f=s(l),p=(0,i.getLogger)();t.default={addToWishList:function(e,t){var r=e.cookies.access_token,s={},o=n.default.EP_WHISHLIST+e.body.productId+n.default.EP_FORM+n.default.EP_FOLLOW_LOCATION,a=(0,i.constructUrl)(n.default.EP_HOSTNAME_CORTEX,o,!1);p.info("Add to WishList URL ",a);var d=(0,i.constructRequest)(a,"POST",JSON.parse(JSON.stringify(s)),r);(0,c.default)(d).then(function(e){t.send({success:!0})}).catch(function(e){e.response.body?(p.error("errors in service to POST WishList in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(p.error("errors in service to POST WishList in EP: ",e),t.send({success:!1,error:e}))})},getWishList:function(e,t){var r=e.cookies.access_token,s={},o=n.default.EP_WHISHLIST_URL+n.default.EP_WHISHLIST_CART_ZOOM,a=(0,i.constructUrl)(n.default.EP_HOSTNAME_CORTEX,o,!1);p.info("Get wishList form url",a);var u=(0,i.constructRequest)(a,"GET",s,r);(0,c.default)(u).then(function(e){var r=d.default.getWishListJSON(JSON.parse(JSON.stringify(e)));t.send({success:!0,result:r})}).catch(function(e){e.response.body?(p.error("errors in service to getWishList in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(p.error("errors in service to getWishList in EP: ",e),t.send({success:!1,error:e}))})},deleteFromWishList:function(e,t){var r=e.cookies.access_token,s={};if(e.body.itemList)this.deleteItemsFromWishList(e.body.itemList,r,s,t),p.info("Delete Items in WishList");else{var o=e.body.wishListId;this.deleteAllItemsFromWishList(o,r,s,t),p.info("Delete All Items in WishList")}},deleteItemsFromWishList:function(e,t,r,s){for(var o=[],a=0;a<e.length;a++){var d=e[a].wishListItemId,u=(0,i.constructUrl)(n.default.EP_HOSTNAME_CORTEX,d,!1);p.info("Delete Item from WishList UrL "+u),o.push(this.getDeleteItemRequestPromise(u,t))}f.default.all(o).then(function(e){s.send({success:!0})},function(e){p.error("errors in service hit to deleteItems From WishList service"+e),s.send({success:!1,error:e})})},getDeleteItemRequestPromise:function(e,t){return new f.default(function(r,s){var o={},n=(0,i.constructRequest)(e,"DELETE",o,t);(0,c.default)(n).then(function(e){return r({success:!0,body:e})}).catch(function(e){return p.error("errors in service to delete item in EP:",e),r({success:!1,error:e})})})},deleteAllItemsFromWishList:function(e,t,r,s){var o=e,a=(0,i.constructUrl)(n.default.EP_HOSTNAME_CORTEX,o,!1);p.info("DELETE All items from WishList",a);var d=(0,i.constructRequest)(a,"DELETE",r,t);(0,c.default)(d).then(function(e){s.send({success:!0})}).catch(function(e){e.response.body?(p.error("errors in service to delete All item in EP: ",e.response.body),s.send({success:!1,error:e.response.body})):(p.error("errors in service to delete All item in EP: ",e),s.send({success:!1,error:e}))})},moveWishListItemToCart:function(e,t){var r=e.cookies.access_token,s={quantity:e.body.quantity},o=e.body.wishListItemId,a=o+n.default.EP_CARTS+n.default.EP_FORM+n.default.EP_FOLLOW_LOCATION,u=(0,i.constructUrl)(n.default.EP_HOSTNAME_CORTEX,a,!1);p.info("Move Item to WishList",u);var l=(0,i.constructRequest)(u,"POST",JSON.parse(JSON.stringify(s)),r);(0,c.default)(l).then(function(e){var r=d.default.getMoveWishListJSON(JSON.parse(JSON.stringify(e)));t.send({success:!0,result:r})}).catch(function(e){e.response.body?(p.error("errors in service to Move WishList to Cart EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(p.error("errors in service to Move WishList to Cart EP: ",e),t.send({success:!1,error:e}))})}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(6),n=r(2),i=(s(n),r(4)),a=s(i);(0,o.getLogger)();t.default={getWishListJSON:function(e){var t="";if(e._lineitems){t=a.default.makeConverter({wishListId:"links.0.uri",itemList:["_lineitems.0._element",a.default.map({wishListItemId:"self.uri",partNumber:"_item.0._code.0.code",productId:"_item.0._code.0.links.0.uri"})],recordSetCount:["_lineitems.0._element",function(e){return e.length}],recordSetStartNumber:a.default.helpers.def(""),recordSetTotal:a.default.helpers.def("")})(e)}else{t=a.default.makeConverter({wishListId:"links.0.uri",recordSetCount:a.default.helpers.def("0"),recordSetStartNumber:a.default.helpers.def(""),recordSetTotal:a.default.helpers.def("0")})(e)}return t},getMoveWishListJSON:function(e){var t={orderItem:[{orderItemId:e.self.uri}]};return JSON.parse(JSON.stringify(t))}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(42),a=s(i),d=r(2),u=(s(d),n.default.Router());u.post("/apply",function(e,t){a.default.apply(e,t)}),u.get("/getPromotionsAtCart",function(e,t){a.default.getPromotionsAtCart(e,t)}),u.get("/getPromoCodePromotionsAtCart",function(e,t){a.default.getPromoCodePromotionsAtCart(e,t)}),u.delete("/delete",function(e,t){a.default.delete(e,t)}),t.default=u},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),n=s(o),i=r(2),a=s(i),d=r(43),u=s(d),c=r(6),l=(0,c.getLogger)();t.default={apply:function(e,t){var r=e.cookies.access_token,s={code:e.body.promoCode},o=e.body.orderId,i=a.default.EP_APPLY_PROMO+o+a.default.EP_FOLLOW_LOCATION,d=(0,c.constructUrl)(a.default.EP_HOSTNAME_CORTEX,i,!1);l.info("applyPromo url: ",d);var u=(0,c.constructRequest)(d,"POST",s,r);(0,n.default)(u).then(function(e){t.send({success:!0,result:{promoCode:e.code,orderId:o}})}).catch(function(e){e.response.body?(l.error("errors in service to apply promo code in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(l.error("errors in service to apply promo code in EP: ",e),t.send({success:!1,error:e}))})},getPromoCodePromotionsAtCart:function(e,t){var r=e.cookies.access_token,s={},o=a.default.EP_DEFAULT_CART+a.default.EP_GET_COUPON_PROMO_ZOOM,i=(0,c.constructUrl)(a.default.EP_HOSTNAME,o,!1);l.info("getPromoCodePromo url: ",i);var d=(0,c.constructRequest)(i,"GET",s,r);(0,n.default)(d).then(function(e){var r=u.default.mapPromoCodePromotionsResultJSON(e);t.send({success:!0,result:r})}).catch(function(e){e.response.body?(l.error("errors in service to get promo code promotion details in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(l.error("errors in service to get promo code promotion details in EP: ",e),t.send({success:!1,error:e}))})},delete:function(e,t){var r=e.cookies.access_token,s={},o=e.body.promotionId,i=e.body.promoCode,d=(0,c.constructUrl)(a.default.EP_HOSTNAME_CORTEX,o,!1);l.info("deletePromoCode url: ",d);var u=(0,c.constructRequest)(d,"DELETE",s,r);(0,n.default)(u).then(function(e){t.send({success:!0,result:{orderId:"",promoCode:i}})}).catch(function(e){e.response.body?(l.error("errors in service to delete promo code in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(l.error("errors in service to delete promo code in EP: ",e),t.send({success:!1,error:e}))})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(4),o=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default={mapPromoCodePromotionsResultJSON:function(e){return o.default.makeConverter({promotions:["_order.0._couponinfo.0._coupon",o.default.map({name:"_appliedpromotions.0._element.0.name",description:{longDescription:"_appliedpromotions.0._element.0.display-description",shortDescription:"_appliedpromotions.0._element.0.display-name"},code:"code",promotionId:"self.uri"})],orderId:o.default.helpers.def("")})(e)}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(9),a=s(i),d=r(45),u=s(d),c=n.default.Router();c.use(a.default.json()),c.post("/register",function(e,t){u.default.register(e,t)}),t.default=c},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var o=r(1),n=s(o),i=r(2),a=s(i),d=r(6),u=r(8),c=(0,d.getLogger)();e.exports={register:function(e,t){var r=function(r){return new Promise(function(s,o){var i={"family-name":e.body.lastName,"given-name":e.body.firstName,password:e.body.logonPassword,username:e.body.logonId},u=(0,d.constructUrl)(a.default.EP_HOSTNAME,a.default.EP_REGISTER,!1);c.info("register url",u);var l=(0,d.constructRequest)(u,"POST",i,r);(0,n.default)(l).then(function(e){t.send({success:!0})}).catch(function(e){e.response.body?(c.error("errors in service to logout in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(c.error("errors in service to logout in EP: ",e),t.send({success:!1,error:e}))})})};(0,u.checkAndGetAuthToken)(e,t,function(e){r(e)})}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(47),a=s(i),d=r(2),u=(s(d),n.default.Router());u.get("/getAddressBook",function(e,t){a.default.getAddressBook(e,t)}),u.get("/getOrderHistory",function(e,t){a.default.getOrderHistory(e,t)}),u.get("/getPersonalInformation",function(e,t){a.default.getPersonalInformation(e,t)}),t.default=u},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=r(1),i=s(n),a=r(2),d=s(a),u=r(6),c=r(48),l=s(c),f=(r(8),(0,u.getLogger)());e.exports={getAddressBook:function(e,t){var r={},s=e.cookies.access_token,o=d.default.EP_ADDRESS_BOOK+d.default.EP_ADDRESS_BOOK_ZOOM,n=(0,u.constructUrl)(d.default.EP_HOSTNAME,o,!1);f.info("getAddressBook url: ",n);var a=(0,u.constructRequest)(n,"GET",r,s);(0,i.default)(a).then(function(e){var r=l.default.getAddressBookJSON(e);t.send({success:!0,result:r})}).catch(function(e){e.response.body?(f.error("errors in service to get AddressBook in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(f.error("errors in service to get AddressBook in EP: ",e),t.send({success:!1,error:e}))})},getOrderHistory:function(e,t){var r=e.cookies.access_token,s={},o=d.default.EP_DEFAULT_PROFILE+d.default.EP_GET_ORDER_HISTORY_ZOOM,n=(0,u.constructUrl)(d.default.EP_HOSTNAME_CORTEX,o,!1);f.info("getOrderHistoryUrl URL ",n);var a=(0,u.constructRequest)(n,"GET",JSON.parse(JSON.stringify(s)),r);(0,i.default)(a).then(function(e){var r=l.default.getOrderHistoryJSON(JSON.parse(JSON.stringify(e)));t.send({success:!0,result:r})}).catch(function(e){f.error("errors in service to get Order History in EP: ",e),t.send({success:!1,error:e})})},getPersonalInformation:function(e,t){f.info("inside getPersonalInformation");var r=e.cookies.access_token,s={},n=d.default.EP_DEFAULT_PROFILE+d.default.EP_GET_PERSONAL_INFO_ZOOM,a=(0,u.constructUrl)(d.default.EP_HOSTNAME_CORTEX,n,!1);f.info("getPersonalInformationDetailsUrl: "+a);var c=(0,u.constructRequest)(a,"GET",JSON.parse(JSON.stringify(s)),r);(0,i.default)(c).then(function(e){var r=l.default.personalInformationJSON(e);t.send({success:!0,result:r})}).catch(function(e){o(e.statusCode)==String(void 0)||String(e.statusCode).startsWith("4")?(f.error("errors in service to getPersonalInformation in EP: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(f.error("errors in service to getPersonalInformation in EP: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(6),n=r(2),i=s(n),a=r(4),d=s(a);(0,o.getLogger)();t.default={getOrderHistoryJSON:function(e){var t="";if(e._purchases&&e._purchases[0]._element){t=d.default.makeConverter({orderHistoryJSON:["_purchases.0._element",d.default.map({Order:[{storeId:d.default.helpers.def(i.default.EP_STORE),orderId:"purchase-number",grandTotal:"monetary-total.0.amount",orderStatus:"status",resourceId:"self.href",placedDate:"purchase-date.display-value",totalAdjustment:"tax-total.amount",totalSalesTaxCurrency:"tax-total.currency",adjustment:["_discount",d.default.map({amount:"discount.0.amount",displayLevel:d.default.helpers.def("Order"),usage:d.default.helpers.def("Discount"),currency:"discount.0.currency"})],totalShippingCharge:"",totalShippingChargeCurrency:"",totalProductPrice:"_lineitems.0._element.0._list.0._element.0.line-extension-total.0.amount",totalProductPriceCurrency:"_lineitems.0._element.0._list.0._element.0.line-extension-total.0.currency",grandTotalCurrency:"monetary-total.0.currency"}]})]})(e)}return t},getAddressBookJSON:function(e){return d.default.makeConverter({resourceId:"self.uri",addressList:["_element",d.default.map({addressId:"self.uri",addressLine:{addressLine1:"address.street-address",addressLine2:"address.extended-address"},addressType:d.default.helpers.def("ShippingAndBilling"),country:"address.country-name",city:"address.locality",firstName:"name.given-name",lastName:"name.family-name",nickName:"name.given-name",zipCode:"address.postal-code",state:"address.region",email1:d.default.helpers.def(" "),phone1:d.default.helpers.def(" "),primary:d.default.helpers.def("false")})]})(e)},personalInformationJSON:function(e){return d.default.makeConverter({address:{addressId:"_addresses.0._billingaddresses.0._default.0.self.uri",addressLine1:"_addresses.0._billingaddresses.0._default.0.address.street-address",addressLine2:"_addresses.0._billingaddresses.0._default.0.address.extended-address",addressType:d.default.helpers.def("SB"),city:"_addresses.0._billingaddresses.0._default.0.address.locality",country:"_addresses.0._billingaddresses.0._default.0.address.country-name",email1:"_emails.0._element.0.email",mobilePhone1Country:d.default.helpers.def(""),phone1:d.default.helpers.def(""),state:"_addresses.0._billingaddresses.0._default.0.address.region",zipCode:"_addresses.0._billingaddresses.0._default.0.address.postal-code"},userInfo:{demographics:{age:d.default.helpers.def(""),dateOfBirth:d.default.helpers.def(""),gender:d.default.helpers.def("")},firstName:"_addresses.0._billingaddresses.0._default.0.name.family-name",lastName:"_addresses.0._billingaddresses.0._default.0.name.given-name",logonId:"_emails.0._element.0.email",middleName:d.default.helpers.def(""),nickName:d.default.helpers.def(""),personTitle:d.default.helpers.def(""),userId:"self.uri"}})(e)}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(50),a=s(i),d=r(52),u=s(d),c=r(55),l=s(c),f=r(58),p=s(f),_=r(61),S=s(_),m=r(65),g=s(m),C=r(67),y=s(C),O=r(70),h=s(O),T=r(73),E=s(T),P=r(75),I=s(P),v=r(77),N=s(v),A=r(80),R=s(A),W=r(82),b=s(W),D=r(84),L=s(D),M=r(87),U=s(M),k=r(92),H=s(k),q=(0,n.default)();q.use("/wcs/PDP",a.default),q.use("/wcs/category",u.default),q.use("/wcs/shipModes",l.default),q.use("/wcs/search",p.default),q.use("/wcs/address",S.default),q.use("/wcs/cart",g.default),q.use("/wcs/promotions",y.default),q.use("/wcs/wishlist",h.default),q.use("/wcs/product",E.default),q.use("/wcs/login",I.default),q.use("/wcs/userProfile",N.default),q.use("/wcs/register",R.default),q.use("/wcs/myAccount",b.default),q.use("/wcs/payment",L.default),q.use("/wcs/seo",U.default),q.use("/wcs/page",H.default),t.default=q},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(51),a=s(i),d=n.default.Router();d.get("/getProductDetails",function(e,t){a.default.getProductDetails(e,t)}),d.get("/getRecentlyViewedProducts",function(e,t){a.default.getRecentlyViewedProducts(e,t)}),t.default=d},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),n=s(o),i=r(5),a=r(15),d=s(a),u=r(1),c=s(u),l=r(7),f=s(l),p=(0,i.getLogger)();t.default={getProductDetails:function(e,t){var r=e.query.productId,s=e.query.resourceName,o=void 0,a=n.default.WCS_PRODUCT_DETAILS+n.default.WCS_STORE_ID+n.default.WCS_PRODUCT_DETAILS_APPEND+r+"?catalogId="+n.default.WCS_CATALOG_ID+"&langId="+n.default.WCS_LANG_ID,u=(0,i.constructUrl)(n.default.WCS_HOSTNAME,a,!1);p.info("getProductDetails post form url:"+u);var l=(0,i.constructRequestWithoutToken)(u,"GET","");(0,c.default)(l).then(function(e){return _(e)}).catch(function(e){404===e.statusCode||500===e.statusCode?(p.error("error in service to getPromotionsAtCart in WCS: ",e),t.send({success:!1,error:e.response.body})):(p.error("errors in service to getPromotionsAtCart in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))});var _=function(e){return new f.default(function(a,u){(0,i.isJson)(e)&&(e=JSON.parse(e));var l=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_INV_AVL+r,f=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,l,!1),_=(0,i.constructRequestWithoutToken)(f,"GET","");p.info("request call = "+JSON.stringify(_)),"ProductBean"==e.catalogEntryView[0].catalogEntryTypeCode?("pdp"==s?o=d.default.mapPdpJSON(e,!0):"qv"!=s&&"cart"!=s||(o=d.default.mapQuickViewJSON(e,!0)),t.send({success:!0,result:o})):(0,c.default)(_).then(function(r){(0,i.isJson)(r)&&(r=JSON.parse(r)),"pdp"==s?o=d.default.mapPdpJSON(e,r):"qv"!=s&&"cart"!=s||(o=d.default.mapQuickViewJSON(e,r)),t.send({success:!0,result:o})}).catch(function(e){404===e.statusCode||500===e.statusCode?(p.error("error in service to getPromotionsAtCart in WCS: ",e),t.send({success:!1,error:e.response.body})):(p.error("errors in service to getPromotionsAtCart in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})})}},getRecentlyViewedProducts:function(e,t){var r=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_ESPOT_RECENTLY_VIEWED_PRODUCTD,s=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0);p.info("Get recently viewed products URL"+s);var o=(0,i.constructRequestWithToken)(s,"GET","",(0,i.getTokens)(e));(0,c.default)(o).then(function(e){var r=d.default.mapRecentlyViewedProductsJSON(e);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode||401===e.statusCode?(p.error("errors in service to getRecentlyViewedProducts in WCS: ",e),t.send({success:!1,error:e.response.body})):(p.error("errors in service to getRecentlyViewedProducts in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(53),a=s(i),d=n.default.Router();d.get("/getTopCategories",function(e,t){a.default.getTopCategories(t)}),d.get("/getCategory",function(e,t){a.default.getCategory(t,e)}),d.get("/getSubCategories",function(e,t){a.default.getSubCategories(t,e)}),d.get("/getProductsListForCategory",function(e,t){a.default.getProductsListForCategory(e,t,e.query.identifier)}),t.default=d},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),n=s(o),i=r(5),a=r(54),d=s(a),u=r(1),c=s(u),l=(0,i.getLogger)();t.default={getTopCategories:function(e){var t=n.default.WCS_PRODUCT_DETAILS+n.default.WCS_STORE_ID+n.default.WCS_CATEGORY_TOP+"?catalogId="+n.default.WCS_CATALOG_ID+"&langId="+n.default.WCS_LANG_ID,r={},s=(0,i.constructUrl)(n.default.WCS_HOSTNAME,t,!1);l.info("getTopCategoriesUrl: "+s);var o=(0,i.constructRequestWithoutToken)(s,"GET",r);l.info(JSON.stringify(o)),(0,c.default)(o).then(function(t){var r=d.default.mapTopCategoryJSON(t);e.send({success:!0,result:r})}).catch(function(t){l.error("errors in service to getTopCategories in WCS: ",t),e.send({success:!1,error:t})})},getCategory:function(e,t){var r=t.query.identifier,s=n.default.WCS_PRODUCT_DETAILS+n.default.WCS_STORE_ID+n.default.WCS_CATEGORY+r+"?catalogId="+n.default.WCS_CATALOG_ID+"&langId="+n.default.WCS_LANG_ID,o={},a=(0,i.constructUrl)(n.default.WCS_HOSTNAME,s,!1);l.info("getCategoriesUrl: "+a);var u=(0,i.constructRequestWithoutToken)(a,"GET",o);l.info(JSON.stringify(u)),(0,c.default)(u).then(function(t){var r=d.default.mapCategoryJSON(t);e.send({success:!0,result:r})}).catch(function(t){l.error("errors in service to getCategories in WCS: ",t),e.send({success:!1,error:t})})},getSubCategories:function(e,t){var r=t.query.identifier,s=n.default.WCS_PRODUCT_DETAILS+n.default.WCS_STORE_ID+n.default.WCS_SUB_CATEGORY+r,o={},a=(0,i.constructUrl)(n.default.WCS_HOSTNAME,s,!1);l.info("getSubCategoriesUrl: "+a);var u=(0,i.constructRequestWithoutToken)(a,"GET",o);l.info(JSON.stringify(u)),(0,c.default)(u).then(function(t){var r=d.default.mapSubCategoryJSON(t);e.send({success:!0,result:r})}).catch(function(t){l.error("errors in service to getSubCategories in WCS: ",t),e.send({success:!1,error:t})})},getProductsListForCategory:function(e,t,r){var s=e.query.pagesize,o=e.query.currentPage,a=n.default.WCS_PRODUCT_DETAILS+n.default.WCS_STORE_ID+n.default.WCS_CATEGORY_DETAILS_APPEND+r+"?catalogId="+n.default.WCS_CATALOG_ID+"&langId="+n.default.WCS_LANG_ID+"&pageNumber="+o+"&pageSize="+s;if(e.query.orderBy){a=a+"&orderBy="+e.query.orderBy}if(e.query.facet){var u=e.query.facet;if(l.info("Multiple facets"+Array.isArray(u)),Array.isArray(u)){var f=u[Symbol.iterator](),p=!0,_=!1,S=void 0;try{for(var m,g=f[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){a=a+"&facet="+m.value}}catch(e){_=!0,S=e}finally{try{!p&&g.return&&g.return()}finally{if(_)throw S}}}else a=a+"&facet="+u}var C=(0,i.constructUrl)(n.default.WCS_HOSTNAME,a,!1);l.info("getProductsListForCategoryUrl: "+C);var y=(0,i.constructRequestWithoutToken)(C,"GET","");l.info(JSON.stringify(y)),(0,c.default)(y).then(function(e){var r={pageSize:s,currentPage:o};(0,i.isJson)(e)&&(e=JSON.parse(e));var n=d.default.mapProductsListForCategoryJSON(e,r);t.send({success:!0,result:n})}).catch(function(e){l.error("errors in service to getProductsListForCategory in WCS: ",e),t.send({success:!1,error:e})})}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(4),n=s(o),i=r(3),a=s(i);t.default={mapTopCategoryJSON:function(e){return n.default.makeConverter({TopCategories:["catalogGroupView",n.default.map({name:"name",identifier:"identifier",id:"uniqueID",store:"storeID"})],totalCount:"recordSetCount"})(e)},mapCategoryJSON:function(e){return n.default.makeConverter({Category:["catalogGroupView",n.default.map({fullImage:"fullImage",fullImageAltDescription:"fullImageAltDescription",parentCatalogGroupID:"parentCatalogGroupID",identifier:"identifier",metaDescription:"metaDescription",metaKeyword:"metaKeyword",name:"name",productsURL:"productsURL",resourceId:"resourceId",shortDescription:"shortDescription",thumbnail:"thumbnail",title:"title",uniqueID:"uniqueID"})]})(e)},mapSubCategoryJSON:function(e){return n.default.makeConverter({SubCategories:["catalogGroupView",n.default.map({name:"name",identifier:"identifier",id:"uniqueID",store:"storeID",thumbnail:["thumbnail",function(e){if(e)return a.default.HTTP_URI_CONSTANT+a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}]})],totalCount:"recordSetCount"})(e)},mapProductsListForCategoryJSON:function(e,t){var r=Number(t.pageSize),s=Number(e.recordSetTotal),o=Math.ceil(s/r);return n.default.makeConverter({pagination:{pageSize:n.default.helpers.def(t.pageSize),currentPageNumber:n.default.helpers.def(t.currentPage),resultsTotal:"recordSetTotal",resultsCurrentPage:"recordSetCount",pages:n.default.helpers.def(o)},resourceIdentifier:"resourceId",productsList:["catalogEntryView",n.default.map({availability:"",listPrice:"price.0.value",purchasePrice:"price.1.value",displayName:"name",code:"partNumber",uniqueID:"uniqueID",store:"storeID",thumbnail:["thumbnail",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}],attributes:["attributes",n.default.map({displayable:"displayable",name:"name",identifier:"identifier",values:"values.0.value"})],hasSingleSKU:"hasSingleSKU",catalogEntryTypeCode:"catalogEntryTypeCode"})],facets:["facetView",n.default.map({entry:["entry",n.default.map({count:"count",uniqueId:function(e){return e.extendedData.uniqueId},label:"label",value:"value",image:["image",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}]})],extendedData:{name:"name",value:"value",facet_id:"extendedData.facet_id",fdesc:"extendedData.fdesc",fname:"extendedData.fname",srchattr_id:"extendedData.srchattr_id",srchattridentifier:"extendedData.srchattridentifier",storeent_id:"extendedData.storeent_id"}})]})(e)}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(56),a=s(i),d=n.default.Router();d.get("/getShippingMethods",function(e,t){a.default.getShipModes(t,e)}),d.get("/updateShippingMethods",function(e,t){a.default.updateShipModes(t,e)}),t.default=d},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),n=s(o),i=r(5),a=r(57),d=s(a),u=r(13),c=(s(u),r(1)),l=s(c),f=(0,i.getLogger)();t.default={getShipModes:function(e,t){var r=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_SHIPMODES_APPEND;f.info("getShipModes post form url:"+(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!1));var s={},o=(0,i.constructRequestWithoutToken)((0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!1),"GET",s);(0,l.default)(o).then(function(t){var r=d.default.mapShipModeJSON(t);e.send({success:!0,result:r})}).catch(function(t){t.response.body?(f.error("errors in service to get ship modes in WCS: ",body.errors),e.send({success:!1,error:body.errors})):(f.error("errors in service to get ship modes in WCS: ",t),e.send({success:!1,error:t}))})},updateShipModes:function(e,t){var r=t.query.shipModeId,s=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_UPDATE_SHIP_INFO;f.info("updateShipModes post form url:"+(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,s,!0));var o={shipModeId:r,x_calculationUsage:n.default.SHIP_CALC_USAGE},a=(0,i.constructRequestWithToken)((0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,s,!0),"PUT",o);(0,l.default)(a).then(function(t){e.send({success:!0,result:{updateShipModeMsg:n.default.WCS_SHIPMODE_SELECTED}})}).catch(function(t){t.response.body?(f.error("errors in service to get ship modes in WCS: ",t.response.body),e.send({success:!1,error:t.response.body})):(f.error("errors in service to get ship modes in WCS: ",t),e.send({success:!1,error:t}))})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(4),o=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default={mapShipModeJSON:function(e){return o.default.makeConverter({usableShippingMode:[{choice:["usableShippingMode",o.default.map({carrier:"field2",shipModeId:"shipModeId",displayName:"shipModeDescription",name:"shipModeCode"})]}]})(e)}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(59),a=s(i),d=n.default.Router();d.get("/getSearchResults",function(e,t){a.default.getSearchResults(e,t)}),d.get("/keywordSuggestionsByTerm",function(e,t){a.default.keywordSuggestionsByTerm(e,t)}),t.default=d},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(5),n=r(3),i=s(n),a=r(60),d=s(a),u=r(1),c=s(u),l=(0,o.getLogger)();t.default={getSearchResults:function(e,t){var r=e.query.keyword,s=e.query.pageSize,n=e.query.currentPage,a={pageSize:s,currentPage:n},u=i.default.WCS_PRODUCT_DETAILS+i.default.WCS_STORE_ID+i.default.WCS_PRODUCT_SEARCH_BY_KEYWORD+r+"?pageSize="+s+"&pageNumber="+n;if(e.query.orderBy){u=u+"&orderBy="+e.query.orderBy}if(e.query.categoryId){u=u+"&categoryId="+e.query.categoryId}if(e.query.facet){var f=e.query.facet;if(l.info("Multiple facets"+Array.isArray(f)),Array.isArray(f)){var p=f[Symbol.iterator](),_=!0,S=!1,m=void 0;try{for(var g,C=p[Symbol.iterator]();!(_=(g=C.next()).done);_=!0){u=u+"&facet="+g.value}}catch(e){S=!0,m=e}finally{try{!_&&C.return&&C.return()}finally{if(S)throw m}}}else u=u+"&facet="+f}var y=(0,o.constructUrl)(i.default.WCS_HOSTNAME,u,!1);l.info("search url = "+y);var O=(0,o.constructRequestWithoutToken)(y,"GET","");(0,c.default)(O).then(function(e){(0,o.isJson)(e)&&(e=JSON.parse(e));var r=d.default.mapSearchResultJSON(e,a);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode?(l.error("errors in service to getSearchResults in WCS: ",e),t.send({success:!1,error:e.response.body})):(l.error("errors in service to getSearchResults in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})},keywordSuggestionsByTerm:function(e,t){var r=e.query.term,s=i.default.WCS_PRODUCT_DETAILS+i.default.WCS_STORE_ID+i.default.WCS_KEYWORD_SUGGESTION+r,n=(0,o.constructUrl)(i.default.WCS_HOSTNAME,s,!1);l.info("my keywordSuggestionsByTermUrl URL : just checking "+n);var a={},d=(0,o.constructRequestWithoutToken)(n,"GET",a);(0,c.default)(d).then(function(e){t.send({success:!0,result:e})}).catch(function(e){404===e.statusCode?(l.error("404 error in service to keywordSuggestionsByTerm in WCS: ",e),t.send({success:!1,error:e})):(l.error("errors in service to keywordSuggestionsByTerm in WCS: ",e),t.send({success:!1,error:e}))})}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(4),n=s(o),i=r(3),a=s(i);t.default={mapSearchResultJSON:function(e,t){var r=Number(t.pageSize),s=Number(e.recordSetTotal),o=Math.ceil(s/r);return n.default.makeConverter({pagination:{pageSize:n.default.helpers.def(t.pageSize),currentPageNumber:n.default.helpers.def(t.currentPage),resultsTotal:"recordSetTotal",resultsCurrentPage:"recordSetCount",pages:n.default.helpers.def(o)},resourceIdentifier:"resourceId",searchResults:["catalogEntryView",n.default.map({uniqueID:"uniqueID",listPrice:"price.0.value",purchasePrice:"price.1.value",displayName:"name",code:"partNumber",store:"storeID",thumbnail:["thumbnail",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}],attributes:["attributes",n.default.map({displayable:"displayable",name:"name",identifier:"identifier",values:"values.0.value"})]})],facets:["facetView",n.default.map({entry:["entry",n.default.map({count:"count",uniqueId:function(e){return e.extendedData.uniqueId},label:"label",value:"value",image:["image",function(e){if(e)return a.default.WCS_DOUBLE_SLASH+a.default.WCS_HOSTNAME_NOPORT+e}]})],extendedData:{name:"name",value:"value",facet_id:"extendedData.facet_id",fdesc:"extendedData.fdesc",fname:"extendedData.fname",srchattr_id:"extendedData.srchattr_id",srchattridentifier:"extendedData.srchattridentifier",storeent_id:"extendedData.storeent_id"}})]})(e)}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(62),a=s(i),d=n.default.Router();d.get("/getShippingAddresses",function(e,t){a.default.getShippingAddresses(t,e)}),d.post("/addShippingAddress",function(e,t){a.default.addShippingAddress(t,e)}),d.put("/updateShippingAddress",function(e,t){a.default.updateShippingAddress(t,e)}),d.delete("/deleteShippingAddress",function(e,t){a.default.deleteShippingAddress(t,e)}),d.put("/selectShippingAddress",function(e,t){a.default.selectShippingAddress(t,e)}),t.default=d},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),n=s(o),i=r(5),a=r(63),d=s(a),u=r(1),c=s(u),l=(0,i.getLogger)();t.default={getShippingAddresses:function(e,t){var r=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_ADDRESS_DETAILS;l.info("getAddress get form url:"+(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0));var s={},o=(0,i.constructRequest)((0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0),"GET",s);l.info("requestCAll "+(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0)),(0,c.default)(o).then(function(t){var r=t,o=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_CHECKOUT_PROFILE;l.info("checkout profile get form url:"+(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,o,!0));var a=(0,i.constructRequest)((0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,o,!0),"GET",s);l.info("requestCAll "+(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,o,!0)),(0,c.default)(a).then(function(t){var s=d.default.mapGetAddressJSON(r,t);e.send({success:!0,result:s})}).catch(function(t){t.response.body?(l.error("errors in service to getShippingAddress(checkoutProfile) in WCS: ",t.response.body),e.send({success:!1,error:t.response.body})):(l.error("errors in service to getShippingAddress(checkoutProfile) in WCS: ",t),e.send({success:!1,error:t}))})}).catch(function(t){t.response.body?(l.error("errors in service to getShippingAddress(person/contact) in WCS: ",t.response.body),e.send({success:!1,error:t.response.body})):(l.error("errors in service to getShippingAddress(person/contact) in WCS: ",t),e.send({success:!1,error:t}))})},addShippingAddress:function(e,t){var r=Math.round(+new Date/1e3),s=t.body.addressType+"_"+r,o=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_ADDRESS_DETAILS;l.info("addAddress POST form url:"+(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,o,!0));var a={firstName:t.body.firstName,lastName:t.body.lastName,addressType:t.body.addressType,zipCode:t.body.zipCode,addressLine:t.body.addressLine,city:t.body.city,state:t.body.state,country:t.body.country,nickName:s},u=(0,i.constructRequest)((0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,o,!0),"POST",a);l.info("requestCAll "+JSON.stringify((0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,o,!0))),(0,c.default)(u).then(function(t){var r=d.default.mapAddAddressJSON(t);e.send({success:!0,result:r})}).catch(function(t){t.response.body?(l.error("errors in service to add Address in WCS: ",t.response.body),e.send({success:!1,error:t.response.body})):(l.error("errors in service to add Address in WCS: ",t),e.send({success:!1,error:t}))})},updateShippingAddress:function(e,t){var r=t.query.nickName,s=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_ADDRESS_DETAILS+n.default.SLASH+r;l.info("updateAddress PUT form url:"+(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,s,!0));var o={firstName:t.body.firstName,lastName:t.body.lastName,addressType:t.body.addressType,zipCode:t.body.zipCode,addressLine:t.body.addressLine[0],city:t.body.city,state:t.body.state,country:t.body.country},a=(0,i.constructRequest)((0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,s,!0),"PUT",o);(0,c.default)(a).then(function(t){var r=d.default.mapUpdateAddressJSON(t);e.send({success:!0,result:r})}).catch(function(t){t.response.body?(l.error("errors in service to update Address in WCS: ",t.response.body),e.send({success:!1,error:t.response.body})):(l.error("errors in service to update Address in WCS: ",t),e.send({success:!1,error:t}))})},deleteShippingAddress:function(e,t){var r=t.query.nickName,s=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_ADDRESS_DETAILS+n.default.SLASH+r;l.info("deleteAddress POST form url:"+(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,s,!0));var o={},a=(0,i.constructRequest)((0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,s,!0),"DELETE",o);(0,c.default)(a).then(function(t){var r=d.default.mapDeleteAddressJSON(t);e.send({success:!0,result:r})}).catch(function(t){t.response.body?(l.error("errors in service to delete Address in WCS: ",t.response.body),e.send({success:!1,error:t.response.body})):(l.error("errors in service to delete Address in WCS: ",t),e.send({success:!1,error:t}))})},selectShippingAddress:function(e,t){u={};var r=e.query.addressId,s=n.default.SHIP_CALC_USAGE,o=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_SHIP_INFO,a=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,o,!0);l.info("selectShippingAddress url ",a);var u={addressId:r,orderId:".",orderItem:[{addressId:r}],x_calculationUsage:s},f=(0,i.constructRequest)(a,"PUT",u);(0,c.default)(f).then(function(e){var r=d.default.mapSelectAddressJSON(e);t.send({success:!0,result:r})}).catch(function(e){e.response.body?(l.error("errors in service to select shipping address selector in EP: ",e.response.body),t.send({success:!1,error:e.response.body})):(l.error("errors in service to select shipping address selector in EP: ",e),t.send({success:!1,error:e}))})}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(4),n=s(o),i=r(12),a=s(i),d=r(64),u=s(d);t.default={mapGetAddressJSON:function(e,t){var r=n.default.makeConverter({address:["contact",n.default.map({addressId:"addressId",addressLine:{addressLine1:"addressLine.0",addressLine2:"addressLine.1"},addressType:"addressType",country:"country",city:"city",firstName:"firstName",lastName:"lastName",nickName:"nickName",zipCode:"zipCode",state:"state",email1:"email1",phone1:"phone1",primary:"primary"})]}),s=n.default.makeConverter({defaultAddress:["CheckoutProfile",n.default.map({addressId:"shipping_addressId",addressLine:{addressLine1:"shipping_addressLine.0",addressLine2:"shipping_addressLine.1"},addressType:"shipping_addressType",country:"shipping_country",city:"shipping_city",firstName:"shipping_firstName",lastName:"shipping_lastName",nickName:"shipping_nickName",zipCode:"shipping_zipCode",state:"shipping_state",email1:"shipping_email1",phone1:"shipping_phone1",primary:"shipping_primary"})]}),o=s(t),i=r(e);a.default.extend=(0,u.default)({inPlace:!1,arrays:"replace",isDeep:!0});var d=a.default.extend(o,i),c={contact:[d]};return console.log(JSON.stringify(d)),d.userId=t.userId,c},mapAddAddressJSON:function(e){var t={userId:e.userId,addressId:e.addressId,addShippingAddressMsg:constants.WCS_ADDRESS_ADDED};return JSON.parse(JSON.stringify(t))},mapUpdateAddressJSON:function(e){var t={addressId:e.addressId,updateShippingAddressMsg:constants.WCS_ADDRESS_UPDATED};return JSON.parse(JSON.stringify(t))},mapDeleteAddressJSON:function(e){var t={deleteShippingAddressMsg:constants.WCS_ADDRESS_DELETED};return JSON.parse(JSON.stringify(t))},mapSelectAddressJSON:function(e){var t={selectShippingAddressMsg:constants.WCS_ADDRESS_SELECTED};return JSON.parse(JSON.stringify(t))}}},function(e,t){e.exports=require("extendify")},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(66),a=s(i),d=n.default.Router();d.post("/addToCart",function(e,t){a.default.addToCart(e,t)}),d.get("/shoppingCart",function(e,t){a.default.shoppingCart(e,t)}),d.put("/updateShoppingCartItem",function(e,t){a.default.updateShoppingCartItem(e,t)}),d.delete("/deleteShoppingCartItem",function(e,t){a.default.deleteShoppingCartItem(e,t)}),d.delete("/deleteAllShoppingCartItem",function(e,t){a.default.deleteAllShoppingCartItem(e,t)}),d.post("/submitOrder",function(e,t){a.default.submitOrder(e,t)}),d.get("/orderPaymentSummary",function(e,t){a.default.orderPaymentSummary(e,t)}),d.post("/orderReview",function(e,t){a.default.orderReview(e,t)}),t.default=d},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),n=s(o),i=r(5),a=r(10),d=s(a),u=r(1),c=s(u),l=r(7),f=s(l),p=(0,i.getLogger)();t.default={addToCart:function(e,t){p.info("inside add to cart");var r=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_CART_EXT+"?catalogId="+n.default.WCS_CATALOG_ID+"&langId="+n.default.WCS_LANG_ID,s=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0),o=e.body;p.info("addToCartUrl:"+s+"messageData: "+JSON.stringify(o));var a=(0,i.constructRequestWithToken)(s,"POST",o,(0,i.getTokens)(e));(0,c.default)(a).then(function(e){var r=d.default.addToCartJSON(e);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode||400===e.statusCode?(p.error("errors in service to addToCartFunction in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(p.error("errors in service to addToCartFunction in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},shoppingCart:function(e,t){var r=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_CART_AT_SELF;p.info("ShoppingCart URL"+(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0));var s=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0),o={},a=(0,i.constructRequestWithToken)(s,"GET",o,(0,i.getTokens)(e));(0,c.default)(a).then(function(e){var r=d.default.mapShoppingCartJSON(e);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode||400===e.statusCode?(p.error("errors in service to shoppingCart in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(p.error("errors in service to shoppingCart in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},updateShoppingCartItem:function(e,t){var r=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_CART+n.default.WCS_GET_SHOPPINGCART+n.default.WCS_UPDATE_CART;p.info("Update ShoppingCart URL"+(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0));var s=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0),o=d.default.mapUpdateCartRequestJSON(e.body);p.info("request to wcs"+o);var a=(0,i.constructRequestWithToken)(s,"PUT",o,(0,i.getTokens)(e));(0,c.default)(a).then(function(e){var r=d.default.mapUpdateCartResponseJSON(e);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode||400===e.statusCode?(p.error("errors in service to updateShoppingCartItem in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(p.error("errors in service to updateShoppingCartItem in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},deleteShoppingCartItem:function(e,t){var r=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_CART+n.default.WCS_GET_SHOPPINGCART+n.default.WCS_DELETE_CART;p.info("Delete ShoppingCart URL"+(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0));var s=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0),o=d.default.mapDeleteCartRequestJSON(e.body);p.info("request to wcs"+JSON.stringify(o));var a=(0,i.constructRequestWithToken)(s,"PUT",o,(0,i.getTokens)(e));(0,c.default)(a).then(function(e){result=d.default.mapDeleteCartResponseJSON(e),t.send({success:!0,result:result})}).catch(function(e){404===e.statusCode||400===e.statusCode?(p.error("errors in service to deleteShoppingCartItem in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(p.error("errors in service to deleteShoppingCartItem in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},deleteAllShoppingCartItem:function(e,t){var r=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_CART+n.default.WCS_GET_SHOPPINGCART;p.info("Delete All ShoppingCart Item URL"+(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0));var s=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0),o={},a=(0,i.constructRequestWithToken)(s,"DELETE",o,(0,i.getTokens)(e));(0,c.default)(a).then(function(e){var r=d.default.mapDeleteAllCartJSON(e);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode||400===e.statusCode?(p.error("errors in service to deleteAllShoppingCartItem in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(p.error("errors in service to deleteAllShoppingCartItem in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},submitOrder:function(e,t){var r=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_CART_EXT+n.default.WCS_GET_SHOPPINGCART+n.default.WCS_CART_PRECHECKOUT,s=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0),o=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_CART_EXT+n.default.WCS_GET_SHOPPINGCART+n.default.WCS_CART_CHECKOUT,a=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,o,!0),u=(0,i.getTokens)(e),l=function(e,r){return new f.default(function(s,o){p.info("inside checkOut of submitOrder"+a+"DATA: "+JSON.stringify(e));var n=(0,i.constructRequestWithToken)(a,"POST",e,r);(0,c.default)(n).then(function(e){return _(e,r)}).catch(function(e){404===e.statusCode||400===e.statusCode?(p.error("errors in service to checkOut of submitOrder in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(p.error("errors in service to checkOut of submitOrder in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})})},_=function(e,r){return new f.default(function(s,o){var a=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_ORDER+e.orderId,u=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,a,!0);p.info("inside getOrderConfirmationDetails of submitOrder: "+u),p.info("data: "+JSON.stringify(e)+"authToken: "+JSON.stringify(r));var l={},f=(0,i.constructRequestWithToken)(u,"GET",l,r);(0,c.default)(f).then(function(e){(0,i.isJson)(e)&&(e=JSON.parse(e)),p.info(JSON.stringify(e));var r=(0,i.requiredProtocolData)(e);p.info(JSON.stringify(r));var s=d.default.mapOrderConfirmationResponseJSON(e,r);p.info("finalResponse: "+JSON.stringify(s)),t.send({success:!0,result:s})}).catch(function(e){404===e.statusCode||400===e.statusCode?(p.error("errors in service to getOrderConfirmationDetails of submitOrder in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(p.error("errors in service to getOrderConfirmationDetails of submitOrder in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})})};(function(r){return new f.default(function(o,n){p.info("inside preCheckOut of submitOrder"+s);var a=e.body;p.info("messageData: "+a);var d=(0,i.constructRequestWithToken)(s,"PUT",a,r);(0,c.default)(d).then(function(e){o(e)}).catch(function(e){404===e.statusCode||400===e.statusCode?(p.error("errors in service to preCheckOut of submitOrder in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(p.error("errors in service to preCheckOut of submitOrder in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})})})(u).then(function(e){return l(e,u)})},orderPaymentSummary:function(e,t){var r=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_CART_AT_SELF;p.info("orderPaymentSummary URL"+(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0));var s=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0),o={},a=(0,i.constructRequestWithToken)(s,"GET",o,(0,i.getTokens)(e));(0,c.default)(a).then(function(e){var r=d.default.mapOrderPaymentSummaryJSON(e);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode||400===e.statusCode?(p.error("errors in service to orderPaymentSummary in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(p.error("errors in service to orderPaymentSummary in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},orderReview:function(e,t){var r=e.body,s=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_ORDER+r.orderId;p.info("orderReview URL"+(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,s,!0));var o=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,s,!0),a={},u=(0,i.constructRequestWithToken)(o,"GET",a,(0,i.getTokens)(e));p.info("review: "+JSON.stringify(u)),(0,c.default)(u).then(function(e){(0,i.isJson)(e)&&(e=JSON.parse(e)),p.info(JSON.stringify(e));var r=(0,i.requiredProtocolData)(e);p.info(JSON.stringify(r));var s=d.default.mapOrderConfirmationResponseJSON(e,r);p.info("finalResponse: "+JSON.stringify(s)),t.send({success:!0,result:s})}).catch(function(e){404===e.statusCode||400===e.statusCode?(p.error("errors in service to orderReview in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(p.error("errors in service to orderReview in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(68),a=s(i),d=n.default.Router();d.get("/getPromotionsAtCart",function(e,t){a.default.getPromotionsAtCart(e,t)}),d.get("/getPromoCodePromotionsAtCart",function(e,t){a.default.getPromoCodePromotionsAtCart(e,t)}),d.post("/apply",function(e,t){a.default.apply(e,t)}),d.delete("/delete",function(e,t){a.default.delete(e,t)}),t.default=d},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),n=s(o),i=r(69),a=s(i),d=r(1),u=s(d),c=r(7),l=(s(c),r(5)),f=(0,l.getLogger)();t.default={getPromoCodePromotionsAtCart:function(e,t){f.info("inside getPromoCodePromotionsAtCart ctrl");var r=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_CART_PROMOTIONS,s=(0,l.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0);f.info("Get Promo codes in Cart URL"+s);var o=(0,l.constructRequestWithToken)(s,"GET","",(0,l.getTokens)(e));(0,u.default)(o).then(function(e){(0,l.isJson)(e)&&(e=JSON.parse(e));var r=a.default.mapPromoCodesResultJSON(e);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode?(f.error("errors in service to getPromotionsAtCart in WCS: ",e),t.send({success:!1,error:e.response.body})):(f.error("errors in service to getPromotionsAtCart in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})},apply:function(e,t){var r=e.body.promoCode,s=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_CART_PROMOTIONS;f.info("promocode = "+r);var o=(0,l.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,s,!0);f.info("Apply Promotion URL"+o);var i={promoCode:r},a=(0,l.constructRequestWithToken)(o,"POST",i,(0,l.getTokens)(e));(0,u.default)(a).then(function(e){(0,l.isJson)(e)&&(e=JSON.parse(e)),t.send({success:!0,result:{orderId:e.orderId,promoCode:r}})}).catch(function(e){404===e.statusCode?(f.error("errors in service to getPromotionsAtCart in WCS: ",e),t.send({success:!1,error:e.response.body})):(f.error("errors in service to getPromotionsAtCart in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})},delete:function(e,t){var r=e.body.promoCode,s=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_CART_PROMOTIONS+"/"+r;f.info("promocode = "+r);var o=(0,l.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,s,!0);f.info("Delete Promotion URL "+o);var i=(0,l.constructRequestWithToken)(o,"DELETE","",(0,l.getTokens)(e));(0,u.default)(i).then(function(e){(0,l.isJson)(e)&&(e=JSON.parse(e)),t.send({success:!0,result:{orderId:e.orderId,promoCode:r}})}).catch(function(e){404===e.statusCode||400===e.statusCode?(f.error("errors in service to getPromotionsAtCart in WCS: ",e),t.send({success:!1,error:e.response.body})):(f.error("errors in service to getPromotionsAtCart in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(4),o=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default={mapPromotionsResultJSON:function(e){return o.default.makeConverter({promotions:["adjustment",o.default.map({name:"code",description:{longDescription:"",shortDescription:""}})],orderId:"orderId"})(e)},mapPromoCodesResultJSON:function(e){return o.default.makeConverter({promotions:["promotionCode",o.default.map({name:"",description:{longDescription:"associatedPromotion.0.description",shortDescription:"associatedPromotion.0.description"},code:"code",promotionId:"associatedPromotion.0.promotionId"})],orderId:"orderId"})(e)}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(71),a=s(i),d=n.default.Router();d.post("/addToWishList",function(e,t){a.default.addToWishList(e,t)}),d.delete("/deleteFromWishList",function(e,t){a.default.deleteFromWishList(e,t)}),d.get("/getWishList",function(e,t){a.default.getWishList(e,t)}),d.post("/moveWishListItemToCart",function(e,t){a.default.moveWishListItemToCart(e,t)}),t.default=d},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),n=s(o),i=r(5),a=r(1),d=s(a),u=r(72),c=s(u),l=r(10),f=s(l),p=r(7),_=s(p),S=(0,i.getLogger)();t.default={addToWishList:function(e,t){S.info("inside add to wish list");var r=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_WISHLIST+"?catalogId="+n.default.WCS_CATALOG_ID+"&langId="+n.default.WCS_LANG_ID,s=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0);S.info(e.body);var o=c.default.addToWishListRequestMapperJSON(e.body);S.info("addToWishListUrl:"+s+"messageData: "+JSON.stringify(o));var a=(0,i.constructRequestWithToken)(s,"POST",o,(0,i.getTokens)(e));(0,d.default)(a).then(function(){t.send({success:!0})}).catch(function(e){404===e.statusCode||400===e.statusCode?(S.error("errors in service to addToWishList in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(S.error("errors in service to addToWishList in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},deleteFromWishList:function(e,t){S.info("inside delete from wish list");var r=e.body.wishListId,s=void 0,o=void 0;e.body.itemList?(s=e.body.itemList[0].wishListItemId,o=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_WISHLIST_DELETE+r+"?wishListItemId="+s+"&catalogId="+n.default.WCS_CATALOG_ID+"&langId="+n.default.WCS_LANG_ID):o=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_WISHLIST_DELETE+r+"?catalogId="+n.default.WCS_CATALOG_ID+"&langId="+n.default.WCS_LANG_ID;var a=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,o,!0);S.info("deleteFromWishListUrl:"+a+"messageData: ");var u=(0,i.constructRequestWithToken)(a,"DELETE","",(0,i.getTokens)(e));(0,d.default)(u).then(function(){t.send({success:!0})}).catch(function(e){404===e.statusCode||400===e.statusCode?(S.error("errors in service to deleteFromWishList in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(S.error("errors in service to deleteFromWishList in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},getWishList:function(e,t){S.info("inside getWishList");var r=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_WISHLIST+n.default.WCS_DEFAULT+"?catalogId="+n.default.WCS_CATALOG_ID+"&langId="+n.default.WCS_LANG_ID,s=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0);S.info("getWishListUrl:"+s+"messageData: ");var o=(0,i.constructRequestWithToken)(s,"GET","",(0,i.getTokens)(e));(0,d.default)(o).then(function(e,r){var s=c.default.getWishListJSON(e,r);t.send({success:!0,result:s})}).catch(function(e){404===e.statusCode||400===e.statusCode?(S.error("errors in service to getWishList in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(S.error("errors in service to getWishList in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},moveWishListItemToCart:function(e,t){S.info("inside moveWishListItemToCart");var r=e.body.wishListItemId,s=e.body.wishListId,o=e.body.quantity,a=e.body.productId,u=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_WISHLIST_DELETE+s+"?wishListItemId="+r+"&catalogId="+n.default.WCS_CATALOG_ID+"&langId="+n.default.WCS_LANG_ID,l=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,u,!0),p=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_CART_EXT+"?catalogId="+n.default.WCS_CATALOG_ID+"&langId="+n.default.WCS_LANG_ID,m=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,p,!0),g=(0,i.getTokens)(e),C=function(e,r){return new _.default(function(s,n){S.info("inside addToCartFunction of moveWishListItemToCart"+m);var a=c.default.moveToCartMapperJSON(r,o);S.info("messageBody: "+JSON.stringify(a));var u=(0,i.constructRequestWithToken)(m,"POST",a,e);(0,d.default)(u).then(function(e,r){var s=f.default.addToCartJSON(e,r);t.send({success:!0,result:s})}).catch(function(e){404===e.statusCode||400===e.statusCode?(S.error("errors in service to addToCartFunction in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(S.error("errors in service to addToCartFunction in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})})};(function(e){return new _.default(function(r,s){S.info("inside delete of moveWishListItemToCart"+l);var o=(0,i.constructRequestWithToken)(l,"DELETE","",e);(0,d.default)(o).then(function(){r(e)}).catch(function(e){404===e.statusCode||400===e.statusCode?(S.error("errors in service to deleteItemsFromWishList in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(S.error("errors in service to deleteItemsFromWishList in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})})})(g).then(function(e){return C(e,a)})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(4),o=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default={getWishListJSON:function(e,t){return o.default.makeConverter({wishListId:"GiftList.0.uniqueID",itemList:["GiftList.0.item",o.default.map({wishListItemId:"giftListItemID",partNumber:"partNumber",productId:"productId"})]})(e)},addToWishListRequestMapperJSON:function(e){var t={item:[{productId:e.productId,quantityRequested:e.quantityRequested}]};return JSON.parse(JSON.stringify(t))},moveToCartMapperJSON:function(e,t){var r={orderItem:[{productId:e,quantity:t}]};return JSON.parse(JSON.stringify(r))}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(74),a=s(i),d=n.default.Router();d.get("/getProductDetailsByIds",function(e,t){a.default.getProductDetailsByIds(e,t)}),d.get("/getProductDetailBySingleId",function(e,t){a.default.getProductDetailBySingleId(e,t)}),t.default=d},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),n=s(o),i=r(5),a=r(15),d=s(a),u=r(1),c=s(u),l=r(7),f=(s(l),(0,i.getLogger)());t.default={getProductDetailsByIds:function(e,t){var r=e.query.id,s="",o=!0,a=!1,u=void 0;try{for(var l,p=r[Symbol.iterator]();!(o=(l=p.next()).done);o=!0){s=s+"id="+l.value+"&"}}catch(e){a=!0,u=e}finally{try{!o&&p.return&&p.return()}finally{if(a)throw u}}var _=n.default.WCS_PRODUCT_DETAILS+n.default.WCS_STORE_ID+n.default.WCS_PRODUCT_BYIDS+s;f.info("getProductDetailsByIds URL : "+(0,i.constructUrl)(n.default.WCS_HOSTNAME,_,!1)),f.info("my URL : just checking ");var S=(0,i.constructUrl)(n.default.WCS_HOSTNAME,_,!1),m={},g=(0,i.constructRequestWithoutToken)(S,"GET",m);(0,c.default)(g).then(function(e){var s=e,o=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_INV_AVL+r;f.info("getInvAvl post form url : "+(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,o,!1));var a=(0,i.constructRequestWithoutToken)((0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,o,!1),"GET",m);(0,c.default)(a).then(function(e){var r=d.default.mapPdpJSON(s,e);t.send({success:!0,result:r})}).catch(function(e){e&&(f.error("errors in service to get product details By Ids in WCS: ",e),t.send({success:!1,error:e}))})}).catch(function(e){f.error("errors in service to get product details By Ids in WCS",e),t.send({success:!1,error:e})})},getProductDetailBySingleId:function(e,t){var r=e.query.id,s=n.default.WCS_PRODUCT_DETAILS+n.default.WCS_STORE_ID+n.default.WCS_PRODUCT_BY_SINGLE_ID+r;f.info("my new URL : just checking ");var o=(0,i.constructUrl)(n.default.WCS_HOSTNAME,s,!1),a={},u=(0,i.constructRequestWithoutToken)(o,"GET",a);(0,c.default)(u).then(function(e){var r=d.default.mapProductDetailBySingleIdJSON(e);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode?(f.error("errors in service to getProductDetailBySingleId in WCS: ",e),t.send({success:!1,error:e.response.body})):(f.error("errors in service to getProductDetailBySingleId in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(76),a=s(i),d=n.default.Router();d.post("/loginIdentityHandler",function(e,t){a.default.loginIdentityHandler(e,t)}),d.post("/guestIdentityHandler",function(e,t){console.log("guest handler"),a.default.guestIdentityHandler(e,t)}),d.delete("/logoutUser",function(e,t){console.log("logout handler"),a.default.logoutUser(e,t)}),t.default=d},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),n=s(o),i=r(5),a=r(1),d=s(a),u=r(7),c=s(u),l=(0,i.getLogger)();t.default={loginIdentityHandler:function(e,t){var r=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_LOGIN_IDENTITY,s=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0);l.info("Login url = "+s);var o={logonId:e.body.logonId,logonPassword:e.body.logonPassword};l.info("messageData = "+e.body.logonId+"|"+e.body.logonPassword);var a=(0,i.constructRequestWithoutToken)(s,"POST",o,"");(0,d.default)(a).then(function(e){t.cookie(n.default.WCS_ACCESS_TOKEN,e.WCToken),t.cookie(n.default.WCS_TRUSTED_ACCESS_TOKEN,e.WCTrustedToken),t.cookie(n.default.WCS_PERSONALIZATION_ID,e.personalizationID),t.cookie(n.default.WCS_USER_ID,e.userId),t.send({success:!0})}).catch(function(e){404===e.statusCode?(l.error("errors in service to loginIdentityHandler in WCS: ",e),t.send({success:!1,error:e.response.body})):(l.error("errors in service to loginIdentityHandler in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})},guestIdentityHandler:function(e,t){return l.info("inside guestIdentityHandler"),new c.default(function(e,r){var s=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_GUEST_IDENTITY,o=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,s,!0);l.info("GuestIdentityUrl = "+o);var a=(0,i.constructRequestWithoutToken)(o,"POST","");(0,d.default)(a).then(function(e){e=JSON.parse(e),t.cookie(n.default.WCS_ACCESS_TOKEN,e.WCToken),t.cookie(n.default.WCS_PERSONALIZATION_ID,e.personalizationID),t.cookie(n.default.WCS_USER_ID,e.userId),t.cookie(n.default.WCS_TRUSTED_ACCESS_TOKEN,e.WCTrustedToken),t.send({success:!0})}).catch(function(e){404===e.statusCode?(l.error("errors in service to guestIdentityHandler in WCS: ",e),t.send({success:!1,error:e.response.body})):(l.error("errors in service to guestIdentityHandler in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})})},logoutUser:function(e,t){return l.info("inside logout user"),new c.default(function(e,r){var s=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_LOGIN_IDENTITY+n.default.WCS_AT_SELF,o=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,s,!0);l.info("Logout user = "+o);var a={},u=(0,i.constructRequestWithoutToken)(o,"DELETE",a);(0,d.default)(u).then(function(e){t.clearCookie(n.default.WCS_ACCESS_TOKEN),t.clearCookie(n.default.WCS_TRUSTED_ACCESS_TOKEN),t.clearCookie(n.default.WCS_PERSONALIZATION_ID),t.clearCookie(n.default.WCS_USER_ID),t.send({success:!0})}).catch(function(e){404===e.statusCode?(l.error("errors in service to logout in WCS: ",e),t.send({success:!1,error:e.response.body})):(l.error("errors in service to logout in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})})}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(78),a=s(i),d=n.default.Router();d.get("/getOrderHistory",function(e,t){a.default.getOrderHistory(e,t)}),d.get("/getPersonalInformation",function(e,t){a.default.getPersonalInformation(e,t)}),d.get("/getAddressBook",function(e,t){a.default.getAddressBook(e,t)}),t.default=d},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),n=s(o),i=r(5),a=r(79),d=s(a),u=r(1),c=s(u),l=r(7),f=(s(l),(0,i.getLogger)());t.default={getOrderHistory:function(e,t){f.info("inside getOrderHistory");var r=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_ORDER+n.default.WCS_HISTORY,s=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0),o={};f.info("getOrderHistoryDetailsUrl: "+s);var a=(0,i.constructRequestWithToken)(s,"GET",o,(0,i.getTokens)(e));(0,c.default)(a).then(function(e){var r=d.default.orderHistoryJSON(e);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode||400===e.statusCode?(f.error("errors in service to getOrderHistory in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(f.error("errors in service to getOrderHistory in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},getPersonalInformation:function(e,t){f.info("inside getPersonalInformation");var r=e.query.userId,s=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_PERSON+r+n.default.WCS_PROFILE_NAME,o=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,s,!0),a={};f.info("getPersonalInformationDetailsUrl: "+o);var u=(0,i.constructRequestWithToken)(o,"GET",a,(0,i.getTokens)(e));(0,c.default)(u).then(function(e){var r=d.default.personalInformationJSON(e);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode||400===e.statusCode?(f.error("errors in service to getPersonalInformation in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(f.error("errors in service to getPersonalInformation in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})},getAddressBook:function(e,t){f.info("inside getAddressBook");var r=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_PERSON_AT_SELF,s=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0),o={};f.info("getAddressBookUrl: "+s);var a=(0,i.constructRequestWithToken)(s,"GET",o,(0,i.getTokens)(e));(0,c.default)(a).then(function(e){var r=d.default.addressBookJSON(e);t.send({success:!0,result:r})}).catch(function(e){404===e.statusCode||400===e.statusCode?(f.error("errors in service to getAddressBook in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body})):(f.error("errors in service to getAddressBook in WCS: ",JSON.stringify(e)),t.send({success:!1,error:e.response.body.errors[0]}))})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(4),o=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default={orderHistoryJSON:function(e){return o.default.makeConverter({recordSetTotal:"recordSetTotal",resourceId:"resourceId",recordSetCount:"recordSetCount",recordSetComplete:"recordSetComplete",recordSetStartNumber:"recordSetStartNumber",Order:["Order",o.default.map({storeId:"storeUniqueID",totalSalesTaxCurrency:"totalSalesTaxCurrency",totalAdjustment:"totalAdjustment",totalShippingTax:"totalShippingTax",placedDate:"placedDate",resourceId:"resourceId",adjustment:["adjustment",o.default.map({amount:"amount",displayLevel:"displayLevel",usage:"usage",code:"code",currency:"currency"})],totalProductPrice:"totalProductPrice",grandTotalCurrency:"grandTotalCurrency",orderId:"orderId",totalShippingTaxCurrency:"totalShippingTaxCurrency",totalShippingCharge:"totalShippingCharge",totalShippingChargeCurrency:"totalShippingChargeCurrency",grandTotal:"grandTotal",orderStatus:"orderStatus",totalSalesTax:"totalSalesTax",totalProductPriceCurrency:"totalProductPriceCurrency",totalAdjustmentCurrency:"totalAdjustmentCurrency"})]})(e)},personalInformationJSON:function(e){return o.default.makeConverter({address:{addressId:"address.addressId",addressLine1:"address.address1",addressLine2:"address.address2",addressType:"address.addressType",city:"address.city",country:"address.country",email1:"address.email1",mobilePhone1Country:"address.mobilePhone1Country",phone1:"address.phone1",state:"address.state",zipCode:"address.zipCode"},userInfo:{demographics:{age:"demographics.age",dateOfBirth:"demographics.dateOfBirth",gender:"demographics.gender"},firstName:"address.firstName",lastName:"address.lastName",logonId:"logonId",middleName:"address.middleName",nickName:"address.nickName",personTitle:"personTitle",userId:"userId"}})(e)},addressBookJSON:function(e){return o.default.makeConverter({resourceId:"resourceId",defaultAddress:{firstName:"firstName",lastName:"lastName",nickName:"nickName",email1:"email1",phone1:"phone1",addressType:"addressType",addressId:"addressId",addressLine:{addressLine1:"addressLine.0",addressLine2:"addressLine.1"},zipCode:"zipCode",city:"city",state:"state",country:"country",primary:"primary"},addressList:["contact",o.default.map({firstName:"firstName",lastName:"lastName",nickName:"nickName",email1:"email1",phone1:"phone1",addressType:"addressType",addressId:"addressId",addressLine:{addressLine1:"addressLine.0",addressLine2:"addressLine.1"},zipCode:"zipCode",city:"city",state:"state",country:"country",primary:"primary"})]})(e)}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(81),a=s(i),d=n.default.Router();d.post("/user",function(e,t){a.default.registration(e,t)}),t.default=d},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),n=s(o),i=r(5),a=r(10),d=(s(a),r(1)),u=s(d),c=r(7),l=(s(c),(0,i.getLogger)());t.default={registration:function(e,t){var r=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_REGISTRATION;l.info("Registration URL"+(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0));var s=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0),o=e.body,a=(0,i.constructRequestWithoutToken)(s,"POST",o);(0,u.default)(a).then(function(e){l.info("userId after registration"+e.userId),t.cookie(n.default.WCS_ACCESS_TOKEN,e.WCToken),t.cookie(n.default.WCS_TRUSTED_ACCESS_TOKEN,e.WCTrustedToken),t.cookie(n.default.WCS_PERSONALIZATION_ID,e.personalizationID),t.cookie(n.default.WCS_USER_ID,e.userId),t.send({success:!0})}).catch(function(e){e&&(l.error("errors in service for Registration in WCS: ",e),t.send({success:!1,error:e}))})}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(83),a=s(i),d=n.default.Router();d.put("/resetPassword",function(e,t){a.default.resetPassword(e,t)}),t.default=d},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),n=s(o),i=r(5),a=r(1),d=s(a),u=(0,i.getLogger)();t.default={resetPassword:function(e,t){var r=e.body.logonId,s=e.body.logonPassword,o=e.body.logonPasswordVerify,a={logonId:r,logonPassword:s,logonPasswordVerify:o},c=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_PERSON+n.default.WCS_AT_SELF+"?action="+n.default.WCS_UPDATE_USER_REGISTRATOIN,l=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,c,!0);u.info("resetPasswordURL  = "+l);var f=(0,i.constructRequestWithToken)(l,"PUT",a,(0,i.getTokens)(e));(0,d.default)(f).then(function(e){t.send({success:!0,result:e})}).catch(function(e){404===e.statusCode?(u.error("errors in service to resetPassword in WCS: ",e),t.send({success:!1,error:e.response.body})):(u.error("errors in service to resetPassword in WCS: ",e),t.send({success:!1,error:e.response.body.errors[0]}))})}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(85),a=s(i),d=n.default.Router();d.get("/getPaymentInstruction",function(e,t){a.default.getPaymentInstruction(e,t)}),d.post("/createPaymentInstruction",function(e,t){a.default.createPaymentInstruction(e,t)}),d.put("/putPaymentInstruction",function(e,t){a.default.putPaymentInstruction(e,t)}),d.delete("/deletePaymentInstruction",function(e,t){a.default.deletePaymentInstruction(e,t)}),t.default=d},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),n=s(o),i=r(5),a=r(1),d=s(a),u=r(86),c=s(u),l=(0,i.getLogger)();t.default={getPaymentInstruction:function(e,t){var r=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_CART_AT_SELF+n.default.WCS_PAYMENT_INSTRUCTION,s=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0);l.info("Get payment instruction url = "+s);var o=(0,i.constructRequestWithToken)(s,"GET","",(0,i.getTokens)(e));(0,d.default)(o).then(function(e){(0,i.isJson)(e)&&(e=JSON.parse(e));var r=c.default.mapPaymentInstrutionJSON(e,(0,i.requiredProtocolData)(e));t.send({success:!0,result:r})}).catch(function(e){l.error("errors in service to getPaymentInstruction in WCS: ",e),t.send({success:!1,error:e.response.body})})},createPaymentInstruction:function(e,t){var r=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_CART_AT_SELF+n.default.WCS_PAYMENT_INSTRUCTION,s=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0);l.info("Create payment instruction url = "+s);var o=e.body;o.authToken=(0,i.getTokens)(e).WCTrustedToken;var a=(0,i.constructRequestWithToken)(s,"POST",o,(0,i.getTokens)(e));(0,d.default)(a).then(function(e){(0,i.isJson)(e)&&(e=JSON.parse(e)),t.send({success:!0,result:e})}).catch(function(e){l.error("errors in service to createPaymentInstruction in WCS: ",e),t.send({success:!1,error:e.response.body})})},putPaymentInstruction:function(e,t){var r=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_CART_AT_SELF+n.default.WCS_PAYMENT_INSTRUCTION,s=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0);l.info("Update payment instruction url = "+s);var o=e.body,a=(0,i.constructRequestWithToken)(s,"PUT",o,(0,i.getTokens)(e));(0,d.default)(a).then(function(e){t.send({success:!0,result:e})}).catch(function(e){l.error("errors in service to updatePaymentInstruction in WCS: ",e),t.send({success:!1,error:e.response.body})})},deletePaymentInstruction:function(e,t){var r=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_CART_AT_SELF+n.default.WCS_PAYMENT_INSTRUCTION+n.default.SLASH+e.body.piId,s=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,r,!0);l.info("delete payment instruction url = "+s);var o=(0,i.constructRequestWithToken)(s,"DELETE","",(0,i.getTokens)(e));(0,d.default)(o).then(function(e){t.send({success:!0,result:e})}).catch(function(e){l.error("errors in service to deletePaymentInstruction in WCS: ",e),t.send({success:!1,error:e.response.body})})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(4),o=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default={mapPaymentInstrutionJSON:function(e,t){for(var r=t.totalPaymentDataArray,s=o.default.makeConverter({orderId:"orderId",paymentInstruction:["paymentInstruction",o.default.map({firstName:"firstName",lastName:"lastName",middleName:"middleName",email1:"email1",addressId:"billing_address_id",addressLine:"addressLine",city:"city",state:"state",country:"country",postalCode:"postalCode",payMethodId:"payMethodId",piAmount:"piAmount",piCurrency:"piCurrency",piDescription:"piDescription",piId:"piId"})]}),n=s(e),i=n,a=0;a<r.length;a++){var d=r[a];i.paymentInstruction[a].paymentData=d}return i}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(88),a=s(i),d=n.default.Router();d.get("/seoKeyword",function(e,t){a.default.getSEOKeyword(e,t)}),d.get("/seoDetails",function(e,t){a.default.getSEODetails(e,t)}),t.default=d},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),n=(s(o),r(5)),i=r(89),a=s(i),d=r(1),u=(s(d),r(7)),c=(s(u),(0,n.getLogger)());t.default={getSEOKeyword:function(e,t){a.default.getKeyword(e.query.uniqueId,e.query.tokenType).then(function(e){if(c.info("Response"+JSON.stringify(e)),Object.keys(e[0]).length>0){var r=e[0].URLKEYWORD,s=e[0].TOKENNAME,o=e[0].TOKENVALUE;t.send({success:!0,keyword:r,tokenType:s,tokenValue:o})}else t.send({success:!1,error:"No matching keyword found!"})})},getSEODetails:function(e,t){a.default.getRecords(e.query.keyword).then(function(e){if(c.info("Response"+JSON.stringify(e)),Object.keys(e[0]).length>0){var r=e[0].URLKEYWORD,s=e[0].TOKENNAME,o=e[0].TOKENVALUE;t.send({success:!0,keyword:r,tokenType:s,tokenValue:o})}else t.send({success:!1,error:"No matching keyword found!"})})}}},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,n=r(3),i=s(n),a=r(90),d=s(a),u=r(91),c=(s(u),r(14));c.MongoClient.connect(i.default.DB_URL,function(e,t){e?console.log("Unable to connect to the mongoDB server. Error:",e):(console.log("Connection established to: "+i.default.DB_URL),o=t)}),t.default={getKeyword:function(e,t){var r=d.default.defer();return o.collection("seo").find({TOKENNAME:t,TOKENVALUE:parseInt(e)}).toArray(function(e,t){var s={};console.log(JSON.stringify(t)),e?(console.log(e),s.errorObject=e,r.reject(s)):t.length?r.resolve(t):(console.log('No document(s) found with defined "find" criteria!'),r.resolve(t))}),r.promise},getRecords:function(e){var t=d.default.defer();return o.collection("seo").find({URLKEYWORD:e}).toArray(function(e,r){var s={};console.log(JSON.stringify(r)),e?(console.log(e),s.errorObject=e,t.reject(s)):r.length?t.resolve(r):(console.log('No document(s) found with defined "find" criteria!'),t.resolve(r))}),t.promise}}},function(e,t){e.exports=require("q")},function(e,t){e.exports=require("util")},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=s(o),i=r(93),a=s(i),d=n.default.Router();d.get("/layout",function(e,t){a.default.getLayoutDetails(e,t)}),d.post("/espot",function(e,t){a.default.getEspotDetails(e,t)}),t.default=d},function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),n=s(o),i=r(5),a=r(1),d=s(a),u=r(7),c=(s(u),(0,i.getLogger)());t.default={getLayoutDetails:function(e,t){var r=e.query.objectId,s=e.query.device,o=e.query.pageGroup,a=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_LAYOUT+"&objectIdentifier="+r+"&deviceClass="+s+"&pageGroup="+o;c.info("Layout URL"+(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,a,!0));var u=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,a,!0),l=(0,i.constructRequestWithoutToken)(u,"GET","");(0,d.default)(l).then(function(e){var r=JSON.parse(e);t.send(r)}).catch(function(e){e&&(c.error("errors in service for layoutUrl in WCS: ",e),t.send({success:!1,error:e}))})},getEspotDetails:function(e,t){var r=e.body.emsName,s=n.default.WCS_REST_URL+n.default.WCS_STORE_ID+n.default.WCS_ESPOT+r;c.info("espot URL"+(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,s,!0));var o=(0,i.constructUrl)(n.default.WCS_HOSTNAME_NOPORT,s,!0),a=(0,i.constructRequestWithoutToken)(o,"GET","");(0,d.default)(a).then(function(e){var r=JSON.parse(e);t.send(r)}).catch(function(e){e&&(c.error("errors in service for espotUrl in WCS: ",e),t.send({success:!1,error:e}))})}}},function(e,t){e.exports=require("cookie-parser")}]);